import{c as Ge,j as e,m as xt,b as zt,f as jr,B as q,l as v,r as u,i as Te,t as _,a as ue,T as wr,n as At,o as _t,p as kt,q as Ht,s as yr,h as Sr,P as Yt,v as Nr,u as Cr,A as Tr}from"./index-Cv5NJbIY.js";import{I as W}from"./input-B2M6Rnc4.js";import{S as Ee,a as Le,b as Ae,c as _e,d as ge,u as Er}from"./select-BcW_niFb.js";import{S as Ie,C as Lr,T as Ar,g as _r,R as kr,P as Rr,h as Dr,O as Ir,D as Oe,a as $e,b as Me,c as Fe,d as it,e as ze,f as He,L as St}from"./dialog-BgmrWCIF.js";import{B as Pr}from"./book-copy-BzYNhVUE.js";import{S as gt}from"./square-pen-JUMuKcjC.js";import{T as Nt,P as Ct}from"./trash-2-o3z7t4Hl.js";import{T as vt,a as bt,b as he,c as Y,d as jt,e as P,f as qt}from"./table-CaJGyP0l.js";import{B as Or}from"./badge-BjTUbt12.js";import{C as $r}from"./calendar-days-EEA8Yg5H.js";import{L as Rt}from"./layers-L46OBx6b.js";import{L as X}from"./label-TP1XFZWB.js";import{C as Dt}from"./circle-alert-BM_xj99-.js";import{S as Mr}from"./search-7qgJutrV.js";import"./Combination-DY268452.js";import"./check-C0R9PMCA.js";import"./chevron-up-Px7hDN_E.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],zr=Ge("activity",Fr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],Yr=Ge("archive-restore",Hr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Br=Ge("archive",qr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Vr=Ge("school",Ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Xr=Ge("sliders-horizontal",Wr),It=["from-purple-600 to-indigo-600","from-blue-500 to-teal-400","from-pink-500 to-rose-500","from-orange-500 to-amber-500","from-green-500 to-lime-500","from-cyan-500 to-sky-500"],Kr={hidden:{opacity:0,y:20},visible:t=>({opacity:1,y:0,transition:{delay:t*.05}})};function Jr({program:t,index:n,onEdit:r,onArchive:a,onRestore:o,onManage:s}){const b=t.total_subjects,d=t.total_units,y=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"icon",variant:"ghost",title:"Edit Program",onClick:w=>{w.stopPropagation(),r(t)},className:"h-8 w-8 bg-black/20 hover:bg-green-500",children:e.jsx(gt,{size:16})}),t.isActive?e.jsx(q,{size:"icon",variant:"ghost",title:"Archive Program",onClick:w=>{w.stopPropagation(),a(t.id)},className:"h-8 w-8 bg-black/20 hover:bg-destructive/80",children:e.jsx(Nt,{size:16})}):e.jsx(q,{size:"icon",variant:"ghost",title:"Restore Program",onClick:w=>{w.stopPropagation(),o(t.id)},className:"h-8 w-8 bg-black/20 hover:bg-green-500",children:e.jsx(Yr,{size:16})})]});return e.jsxs(xt.div,{variants:Kr,custom:n,initial:"hidden",animate:"visible",exit:"hidden",className:"bg-card rounded-xl border border-border shadow-sm overflow-hidden group flex flex-col transition-all duration-300 hover:shadow-md hover:-translate-y-1",children:[e.jsxs("div",{className:`p-5 bg-gradient-to-br text-white relative ${It[n%It.length]} ${!t.isActive&&"opacity-60"}`,children:[e.jsx("h2",{className:"text-xl font-bold pr-20",children:t.abbreviation}),e.jsx("p",{className:"opacity-80 truncate text-sm pr-20",children:t.name}),!t.isActive&&e.jsx("div",{className:"absolute bottom-2 left-5 px-2.5 py-1 bg-red-600/90 text-white text-[10px] font-bold rounded-full uppercase tracking-wider",children:"Inactive"}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(y,{})})]}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[e.jsx(zt,{size:15}),e.jsxs("span",{children:["A.Y. ",t.effectiveYear]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center text-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(Pr,{size:15,className:"text-muted-foreground"}),e.jsx("span",{children:"Total Subjects"})]}),e.jsx("span",{className:"px-2.5 py-0.5 bg-muted text-muted-foreground rounded-full font-semibold",children:b})]}),e.jsxs("div",{className:"flex justify-between items-center text-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(jr,{size:15,className:"text-muted-foreground"}),e.jsx("span",{children:"Total Units"})]}),e.jsx("span",{className:"px-2.5 py-0.5 bg-muted text-muted-foreground rounded-full font-semibold",children:d})]})]})]}),e.jsx(q,{onClick:s,className:"w-full mt-5",variant:"secondary",disabled:!t.isActive,children:"Manage Curriculum"})]})]})}function Gr(){return e.jsxs("div",{className:"bg-card rounded-xl border border-border shadow-sm p-5 space-y-4",children:[e.jsx(Ie,{className:"h-8 w-1/4"}),e.jsx(Ie,{className:"h-5 w-3/4"}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Ie,{className:"h-5 w-1/2"}),e.jsx(Ie,{className:"h-6 w-10 rounded-full"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Ie,{className:"h-5 w-1/2"}),e.jsx(Ie,{className:"h-6 w-10 rounded-full"})]})]}),e.jsx(Ie,{className:"h-10 w-full mt-5"})]})}function Qr(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const Bt=v.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Qe=()=>{const t=v.useContext(Bt);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Qr(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Zr(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function en(){return Tt(/^Mac/)}function tn(){return Tt(/^iPhone/)}function Pt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function rn(){return Tt(/^iPad/)||en()&&navigator.maxTouchPoints>1}function Ut(){return tn()||rn()}function Tt(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const nn=24,sn=typeof window<"u"?u.useLayoutEffect:u.useEffect;function Ot(...t){return(...n)=>{for(let r of t)typeof r=="function"&&r(...n)}}const dt=typeof document<"u"&&window.visualViewport;function $t(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function Vt(t){for($t(t)&&(t=t.parentElement);t&&!$t(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const an=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let at=0,mt;function on(t={}){let{isDisabled:n}=t;sn(()=>{if(!n)return at++,at===1&&Ut()&&(mt=ln()),()=>{at--,at===0&&mt?.()}},[n])}function ln(){let t,n=0,r=p=>{t=Vt(p.target),!(t===document.documentElement&&t===document.body)&&(n=p.changedTouches[0].pageY)},a=p=>{if(!t||t===document.documentElement||t===document.body){p.preventDefault();return}let m=p.changedTouches[0].pageY,D=t.scrollTop,S=t.scrollHeight-t.clientHeight;S!==0&&((D<=0&&m>n||D>=S&&m<n)&&p.preventDefault(),n=m)},o=p=>{let m=p.target;wt(m)&&m!==document.activeElement&&(p.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},s=p=>{let m=p.target;wt(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",dt&&(dt.height<window.innerHeight?requestAnimationFrame(()=>{Mt(m)}):dt.addEventListener("resize",()=>Mt(m),{once:!0}))}))},b=()=>{window.scrollTo(0,0)},d=window.pageXOffset,y=window.pageYOffset,w=Ot(cn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=Ot(Ke(document,"touchstart",r,{passive:!1,capture:!0}),Ke(document,"touchmove",a,{passive:!1,capture:!0}),Ke(document,"touchend",o,{passive:!1,capture:!0}),Ke(document,"focus",s,!0),Ke(window,"scroll",b));return()=>{w(),f(),window.scrollTo(d,y)}}function cn(t,n,r){let a=t.style[n];return t.style[n]=r,()=>{t.style[n]=a}}function Ke(t,n,r,a){return t.addEventListener(n,r,a),()=>{t.removeEventListener(n,r,a)}}function Mt(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let r=Vt(t);if(r!==document.documentElement&&r!==document.body&&r!==t){let a=r.getBoundingClientRect().top,o=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const b=r.getBoundingClientRect().bottom+nn;s>b&&(r.scrollTop+=o-a)}t=r.parentElement}}function wt(t){return t instanceof HTMLInputElement&&!an.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function un(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function dn(...t){return n=>t.forEach(r=>un(r,n))}function Wt(...t){return u.useCallback(dn(...t),t)}const Xt=new WeakMap;function G(t,n,r=!1){if(!t||!(t instanceof HTMLElement))return;let a={};Object.entries(n).forEach(([o,s])=>{if(o.startsWith("--")){t.style.setProperty(o,s);return}a[o]=t.style[o],t.style[o]=s}),!r&&Xt.set(t,a)}function mn(t,n){if(!t||!(t instanceof HTMLElement))return;let r=Xt.get(t);r&&(t.style[n]=r[n])}const J=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function ot(t,n){if(!t)return null;const r=window.getComputedStyle(t),a=r.transform||r.webkitTransform||r.mozTransform;let o=a.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[J(n)?13:12]):(o=a.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[J(n)?5:4]):null)}function hn(t){return 8*(Math.log(t+1)-2)}function ht(t,n){if(!t)return()=>{};const r=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=r}}function fn(...t){return(...n)=>{for(const r of t)typeof r=="function"&&r(...n)}}const V={DURATION:.5,EASE:[.32,.72,0,1]},Kt=.4,pn=.25,xn=100,Jt=8,Pe=16,yt=26,ft="vaul-dragging";function Gt(t){const n=v.useRef(t);return v.useEffect(()=>{n.current=t}),v.useMemo(()=>(...r)=>n.current==null?void 0:n.current.call(n,...r),[])}function gn({defaultProp:t,onChange:n}){const r=v.useState(t),[a]=r,o=v.useRef(a),s=Gt(n);return v.useEffect(()=>{o.current!==a&&(s(a),o.current=a)},[a,o,s]),r}function Qt({prop:t,defaultProp:n,onChange:r=()=>{}}){const[a,o]=gn({defaultProp:n,onChange:r}),s=t!==void 0,b=s?t:a,d=Gt(r),y=v.useCallback(w=>{if(s){const p=typeof w=="function"?w(t):w;p!==t&&d(p)}else o(w)},[s,t,o,d]);return[b,y]}function vn({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:r,drawerRef:a,overlayRef:o,fadeFromIndex:s,onSnapPointChange:b,direction:d="bottom",container:y,snapToSequentialPoint:w}){const[f,p]=Qt({prop:t,defaultProp:r?.[0],onChange:n}),[m,D]=v.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);v.useEffect(()=>{function c(){D({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const S=v.useMemo(()=>f===r?.[r.length-1]||null,[r,f]),N=v.useMemo(()=>{var c;return(c=r?.findIndex(l=>l===f))!=null?c:null},[r,f]),j=r&&r.length>0&&(s||s===0)&&!Number.isNaN(s)&&r[s]===f||!r,i=v.useMemo(()=>{const c=y?{width:y.getBoundingClientRect().width,height:y.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var l;return(l=r?.map(h=>{const k=typeof h=="string";let O=0;if(k&&(O=parseInt(h,10)),J(d)){const T=k?O:m?h*c.height:0;return m?d==="bottom"?c.height-T:-c.height+T:T}const $=k?O:m?h*c.width:0;return m?d==="right"?c.width-$:-c.width+$:$}))!=null?l:[]},[r,m,y]),x=v.useMemo(()=>N!==null?i?.[N]:null,[i,N]),C=v.useCallback(c=>{var l;const h=(l=i?.findIndex(k=>k===c))!=null?l:null;b(h),G(a.current,{transition:`transform ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,transform:J(d)?`translate3d(0, ${c}px, 0)`:`translate3d(${c}px, 0, 0)`}),i&&h!==i.length-1&&s!==void 0&&h!==s&&h<s?G(o.current,{transition:`opacity ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,opacity:"0"}):G(o.current,{transition:`opacity ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,opacity:"1"}),p(r?.[Math.max(h,0)])},[a.current,r,i,s,o,p]);v.useEffect(()=>{if(f||t){var c;const l=(c=r?.findIndex(h=>h===t||h===f))!=null?c:-1;i&&l!==-1&&typeof i[l]=="number"&&C(i[l])}},[f,t,r,i,C]);function g({draggedDistance:c,closeDrawer:l,velocity:h,dismissible:k}){if(s===void 0)return;const O=d==="bottom"||d==="right"?(x??0)-c:(x??0)+c,$=N===s-1,T=N===0,F=c>0;if($&&G(o.current,{transition:`opacity ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`}),!w&&h>2&&!F){k?l():C(i[0]);return}if(!w&&h>2&&F&&i&&r){C(i[r.length-1]);return}const Q=i?.reduce((Z,ie)=>typeof Z!="number"||typeof ie!="number"?Z:Math.abs(ie-O)<Math.abs(Z-O)?ie:Z),re=J(d)?window.innerHeight:window.innerWidth;if(h>Kt&&Math.abs(c)<re*.4){const Z=F?1:-1;if(Z>0&&S&&r){C(i[r.length-1]);return}if(T&&Z<0&&k&&l(),N===null)return;C(i[N+Z]);return}C(Q)}function L({draggedDistance:c}){if(x===null)return;const l=d==="bottom"||d==="right"?x-c:x+c;(d==="bottom"||d==="right")&&l<i[i.length-1]||(d==="top"||d==="left")&&l>i[i.length-1]||G(a.current,{transform:J(d)?`translate3d(0, ${l}px, 0)`:`translate3d(${l}px, 0, 0)`})}function U(c,l){if(!r||typeof N!="number"||!i||s===void 0)return null;const h=N===s-1;if(N>=s&&l)return 0;if(h&&!l)return 1;if(!j&&!h)return null;const O=h?N+1:N-1,$=h?i[O]-i[O-1]:i[O+1]-i[O],T=c/Math.abs($);return h?1-T:T}return{isLastSnapPoint:S,activeSnapPoint:f,shouldFade:j,getPercentageDragged:U,setActiveSnapPoint:p,activeSnapPointIndex:N,onRelease:g,onDrag:L,snapPointsOffset:i}}const bn=()=>()=>{};function jn(){const{direction:t,isOpen:n,shouldScaleBackground:r,setBackgroundColorOnScale:a,noBodyStyles:o}=Qe(),s=v.useRef(null),b=u.useMemo(()=>document.body.style.backgroundColor,[]);function d(){return(window.innerWidth-yt)/window.innerWidth}v.useEffect(()=>{if(n&&r){s.current&&clearTimeout(s.current);const y=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!y)return;fn(a&&!o?ht(document.body,{background:"black"}):bn,ht(y,{transformOrigin:J(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${V.DURATION}s`,transitionTimingFunction:`cubic-bezier(${V.EASE.join(",")})`}));const w=ht(y,{borderRadius:`${Jt}px`,overflow:"hidden",...J(t)?{transform:`scale(${d()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${d()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{w(),s.current=window.setTimeout(()=>{b?document.body.style.background=b:document.body.style.removeProperty("background")},V.DURATION*1e3)}}},[n,r,b])}let Je=null;function wn({isOpen:t,modal:n,nested:r,hasBeenOpened:a,preventScrollRestoration:o,noBodyStyles:s}){const[b,d]=v.useState(()=>typeof window<"u"?window.location.href:""),y=v.useRef(0),w=v.useCallback(()=>{if(Pt()&&Je===null&&t&&!s){Je={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-y.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const D=m-window.innerHeight;D&&y.current>=m&&(document.body.style.top=`${-(y.current+D)}px`)}),300)}},[t]),f=v.useCallback(()=>{if(Pt()&&Je!==null&&!s){const p=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Je),window.requestAnimationFrame(()=>{if(o&&b!==window.location.href){d(window.location.href);return}window.scrollTo(m,p)}),Je=null}},[b]);return v.useEffect(()=>{function p(){y.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),v.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[n,f]),v.useEffect(()=>{r||!a||(t?(!window.matchMedia("(display-mode: standalone)").matches&&w(),n||window.setTimeout(()=>{f()},500)):f())},[t,a,b,n,r,w,f]),{restorePositionSetting:f}}function yn({open:t,onOpenChange:n,children:r,onDrag:a,onRelease:o,snapPoints:s,shouldScaleBackground:b=!1,setBackgroundColorOnScale:d=!0,closeThreshold:y=pn,scrollLockTimeout:w=xn,dismissible:f=!0,handleOnly:p=!1,fadeFromIndex:m=s&&s.length-1,activeSnapPoint:D,setActiveSnapPoint:S,fixed:N,modal:j=!0,onClose:i,nested:x,noBodyStyles:C=!1,direction:g="bottom",defaultOpen:L=!1,disablePreventScroll:U=!0,snapToSequentialPoint:c=!1,preventScrollRestoration:l=!1,repositionInputs:h=!0,onAnimationEnd:k,container:O,autoFocus:$=!1}){var T,F;const[Q=!1,re]=Qt({defaultProp:L,prop:t,onChange:A=>{n?.(A),!A&&!x&&ee(),setTimeout(()=>{k?.(A)},V.DURATION*1e3),A&&!j&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),A||(document.body.style.pointerEvents="auto")}}),[Z,ie]=v.useState(!1),[ne,be]=v.useState(!1),[fe,Ze]=v.useState(!1),we=v.useRef(null),Ye=v.useRef(null),Be=v.useRef(null),Ue=v.useRef(null),se=v.useRef(null),de=v.useRef(!1),ke=v.useRef(null),qe=v.useRef(0),ye=v.useRef(!1),et=v.useRef(!L),tt=v.useRef(0),R=v.useRef(null),rt=v.useRef(((T=R.current)==null?void 0:T.getBoundingClientRect().height)||0),nt=v.useRef(((F=R.current)==null?void 0:F.getBoundingClientRect().width)||0),Ve=v.useRef(0),ct=v.useCallback(A=>{s&&A===I.length-1&&(Ye.current=new Date)},[]),{activeSnapPoint:ut,activeSnapPointIndex:Se,setActiveSnapPoint:We,onRelease:E,snapPointsOffset:I,onDrag:z,shouldFade:je,getPercentageDragged:Re}=vn({snapPoints:s,activeSnapPointProp:D,setActiveSnapPointProp:S,drawerRef:R,fadeFromIndex:m,overlayRef:we,onSnapPointChange:ct,direction:g,container:O,snapToSequentialPoint:c});on({isDisabled:!Q||ne||!j||fe||!Z||!h||!U});const{restorePositionSetting:ee}=wn({isOpen:Q,modal:j,nested:x??!1,hasBeenOpened:Z,preventScrollRestoration:l,noBodyStyles:C});function pe(){return(window.innerWidth-yt)/window.innerWidth}function te(A){var H,B;!f&&!s||R.current&&!R.current.contains(A.target)||(rt.current=((H=R.current)==null?void 0:H.getBoundingClientRect().height)||0,nt.current=((B=R.current)==null?void 0:B.getBoundingClientRect().width)||0,be(!0),Be.current=new Date,Ut()&&window.addEventListener("touchend",()=>de.current=!1,{once:!0}),A.target.setPointerCapture(A.pointerId),qe.current=J(g)?A.pageY:A.pageX)}function le(A,H){var B;let M=A;const K=(B=window.getSelection())==null?void 0:B.toString(),oe=R.current?ot(R.current,g):null,ae=new Date;if(M.tagName==="SELECT"||M.hasAttribute("data-vaul-no-drag")||M.closest("[data-vaul-no-drag]"))return!1;if(g==="right"||g==="left")return!0;if(Ye.current&&ae.getTime()-Ye.current.getTime()<500)return!1;if(oe!==null&&(g==="bottom"?oe>0:oe<0))return!0;if(K&&K.length>0)return!1;if(se.current&&ae.getTime()-se.current.getTime()<w&&oe===0||H)return se.current=ae,!1;for(;M;){if(M.scrollHeight>M.clientHeight){if(M.scrollTop!==0)return se.current=new Date,!1;if(M.getAttribute("role")==="dialog")return!0}M=M.parentNode}return!0}function ce(A){if(R.current&&ne){const H=g==="bottom"||g==="right"?1:-1,B=(qe.current-(J(g)?A.pageY:A.pageX))*H,M=B>0,K=s&&!f&&!M;if(K&&Se===0)return;const oe=Math.abs(B),ae=document.querySelector("[data-vaul-drawer-wrapper]"),Ne=g==="bottom"||g==="top"?rt.current:nt.current;let me=oe/Ne;const De=Re(oe,M);if(De!==null&&(me=De),K&&me>=1||!de.current&&!le(A.target,M))return;if(R.current.classList.add(ft),de.current=!0,G(R.current,{transition:"none"}),G(we.current,{transition:"none"}),s&&z({draggedDistance:B}),M&&!s){const xe=hn(B),st=Math.min(xe*-1,0)*H;G(R.current,{transform:J(g)?`translate3d(0, ${st}px, 0)`:`translate3d(${st}px, 0, 0)`});return}const Ce=1-me;if((je||m&&Se===m-1)&&(a?.(A,me),G(we.current,{opacity:`${Ce}`,transition:"none"},!0)),ae&&we.current&&b){const xe=Math.min(pe()+me*(1-pe()),1),st=8-me*8,Lt=Math.max(0,14-me*14);G(ae,{borderRadius:`${st}px`,transform:J(g)?`scale(${xe}) translate3d(0, ${Lt}px, 0)`:`scale(${xe}) translate3d(${Lt}px, 0, 0)`,transition:"none"},!0)}if(!s){const xe=oe*H;G(R.current,{transform:J(g)?`translate3d(0, ${xe}px, 0)`:`translate3d(${xe}px, 0, 0)`})}}}v.useEffect(()=>{window.requestAnimationFrame(()=>{et.current=!0})},[]),v.useEffect(()=>{var A;function H(){if(!R.current||!h)return;const B=document.activeElement;if(wt(B)||ye.current){var M;const K=((M=window.visualViewport)==null?void 0:M.height)||0,oe=window.innerHeight;let ae=oe-K;const Ne=R.current.getBoundingClientRect().height||0,me=Ne>oe*.8;Ve.current||(Ve.current=Ne);const De=R.current.getBoundingClientRect().top;if(Math.abs(tt.current-ae)>60&&(ye.current=!ye.current),s&&s.length>0&&I&&Se){const Ce=I[Se]||0;ae+=Ce}if(tt.current=ae,Ne>K||ye.current){const Ce=R.current.getBoundingClientRect().height;let xe=Ce;Ce>K&&(xe=K-(me?De:yt)),N?R.current.style.height=`${Ce-Math.max(ae,0)}px`:R.current.style.height=`${Math.max(xe,K-De)}px`}else Zr()||(R.current.style.height=`${Ve.current}px`);s&&s.length>0&&!ye.current?R.current.style.bottom="0px":R.current.style.bottom=`${Math.max(ae,0)}px`}}return(A=window.visualViewport)==null||A.addEventListener("resize",H),()=>{var B;return(B=window.visualViewport)==null?void 0:B.removeEventListener("resize",H)}},[Se,s,I]);function Xe(A){pr(),i?.(),A||re(!1),setTimeout(()=>{s&&We(s[0])},V.DURATION*1e3)}function Et(){if(!R.current)return;const A=document.querySelector("[data-vaul-drawer-wrapper]"),H=ot(R.current,g);G(R.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`}),G(we.current,{transition:`opacity ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,opacity:"1"}),b&&H&&H>0&&Q&&G(A,{borderRadius:`${Jt}px`,overflow:"hidden",...J(g)?{transform:`scale(${pe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${pe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${V.DURATION}s`,transitionTimingFunction:`cubic-bezier(${V.EASE.join(",")})`},!0)}function pr(){!ne||!R.current||(R.current.classList.remove(ft),de.current=!1,be(!1),Ue.current=new Date)}function xr(A){if(!ne||!R.current)return;R.current.classList.remove(ft),de.current=!1,be(!1),Ue.current=new Date;const H=ot(R.current,g);if(!A||!le(A.target,!1)||!H||Number.isNaN(H)||Be.current===null)return;const B=Ue.current.getTime()-Be.current.getTime(),M=qe.current-(J(g)?A.pageY:A.pageX),K=Math.abs(M)/B;if(K>.05&&(Ze(!0),setTimeout(()=>{Ze(!1)},200)),s){E({draggedDistance:M*(g==="bottom"||g==="right"?1:-1),closeDrawer:Xe,velocity:K,dismissible:f}),o?.(A,!0);return}if(g==="bottom"||g==="right"?M>0:M<0){Et(),o?.(A,!0);return}if(K>Kt){Xe(),o?.(A,!1);return}var oe;const ae=Math.min((oe=R.current.getBoundingClientRect().height)!=null?oe:0,window.innerHeight);var Ne;const me=Math.min((Ne=R.current.getBoundingClientRect().width)!=null?Ne:0,window.innerWidth),De=g==="left"||g==="right";if(Math.abs(H)>=(De?me:ae)*y){Xe(),o?.(A,!1);return}o?.(A,!0),Et()}v.useEffect(()=>(Q&&(G(document.documentElement,{scrollBehavior:"auto"}),Ye.current=new Date),()=>{mn(document.documentElement,"scrollBehavior")}),[Q]);function gr(A){const H=A?(window.innerWidth-Pe)/window.innerWidth:1,B=A?-Pe:0;ke.current&&window.clearTimeout(ke.current),G(R.current,{transition:`transform ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,transform:J(g)?`scale(${H}) translate3d(0, ${B}px, 0)`:`scale(${H}) translate3d(${B}px, 0, 0)`}),!A&&R.current&&(ke.current=setTimeout(()=>{const M=ot(R.current,g);G(R.current,{transition:"none",transform:J(g)?`translate3d(0, ${M}px, 0)`:`translate3d(${M}px, 0, 0)`})},500))}function vr(A,H){if(H<0)return;const B=(window.innerWidth-Pe)/window.innerWidth,M=B+H*(1-B),K=-Pe+H*Pe;G(R.current,{transform:J(g)?`scale(${M}) translate3d(0, ${K}px, 0)`:`scale(${M}) translate3d(${K}px, 0, 0)`,transition:"none"})}function br(A,H){const B=J(g)?window.innerHeight:window.innerWidth,M=H?(B-Pe)/B:1,K=H?-Pe:0;H&&G(R.current,{transition:`transform ${V.DURATION}s cubic-bezier(${V.EASE.join(",")})`,transform:J(g)?`scale(${M}) translate3d(0, ${K}px, 0)`:`scale(${M}) translate3d(${K}px, 0, 0)`})}return v.useEffect(()=>{j||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[j]),v.createElement(kr,{defaultOpen:L,onOpenChange:A=>{!f&&!A||(A?ie(!0):Xe(!0),re(A))},open:Q},v.createElement(Bt.Provider,{value:{activeSnapPoint:ut,snapPoints:s,setActiveSnapPoint:We,drawerRef:R,overlayRef:we,onOpenChange:n,onPress:te,onRelease:xr,onDrag:ce,dismissible:f,shouldAnimate:et,handleOnly:p,isOpen:Q,isDragging:ne,shouldFade:je,closeDrawer:Xe,onNestedDrag:vr,onNestedOpenChange:gr,onNestedRelease:br,keyboardIsOpen:ye,modal:j,snapPointsOffset:I,activeSnapPointIndex:Se,direction:g,shouldScaleBackground:b,setBackgroundColorOnScale:d,noBodyStyles:C,container:O,autoFocus:$}},r))}const Zt=v.forwardRef(function({...t},n){const{overlayRef:r,snapPoints:a,onRelease:o,shouldFade:s,isOpen:b,modal:d,shouldAnimate:y}=Qe(),w=Wt(n,r),f=a&&a.length>0;if(!d)return null;const p=v.useCallback(m=>o(m),[o]);return v.createElement(Ir,{onMouseUp:p,ref:w,"data-vaul-overlay":"","data-vaul-snap-points":b&&f?"true":"false","data-vaul-snap-points-overlay":b&&s?"true":"false","data-vaul-animate":y?.current?"true":"false",...t})});Zt.displayName="Drawer.Overlay";const er=v.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:r,...a},o){const{drawerRef:s,onPress:b,onRelease:d,onDrag:y,keyboardIsOpen:w,snapPointsOffset:f,activeSnapPointIndex:p,modal:m,isOpen:D,direction:S,snapPoints:N,container:j,handleOnly:i,shouldAnimate:x,autoFocus:C}=Qe(),[g,L]=v.useState(!1),U=Wt(o,s),c=v.useRef(null),l=v.useRef(null),h=v.useRef(!1),k=N&&N.length>0;jn();const O=(T,F,Q=0)=>{if(h.current)return!0;const re=Math.abs(T.y),Z=Math.abs(T.x),ie=Z>re,ne=["bottom","right"].includes(F)?1:-1;if(F==="left"||F==="right"){if(!(T.x*ne<0)&&Z>=0&&Z<=Q)return ie}else if(!(T.y*ne<0)&&re>=0&&re<=Q)return!ie;return h.current=!0,!0};v.useEffect(()=>{k&&window.requestAnimationFrame(()=>{L(!0)})},[]);function $(T){c.current=null,h.current=!1,d(T)}return v.createElement(Dr,{"data-vaul-drawer-direction":S,"data-vaul-drawer":"","data-vaul-delayed-snap-points":g?"true":"false","data-vaul-snap-points":D&&k?"true":"false","data-vaul-custom-container":j?"true":"false","data-vaul-animate":x?.current?"true":"false",...a,ref:U,style:f&&f.length>0?{"--snap-point-height":`${f[p??0]}px`,...n}:n,onPointerDown:T=>{i||(a.onPointerDown==null||a.onPointerDown.call(a,T),c.current={x:T.pageX,y:T.pageY},b(T))},onOpenAutoFocus:T=>{r?.(T),C||T.preventDefault()},onPointerDownOutside:T=>{if(t?.(T),!m||T.defaultPrevented){T.preventDefault();return}w.current&&(w.current=!1)},onFocusOutside:T=>{if(!m){T.preventDefault();return}},onPointerMove:T=>{if(l.current=T,i||(a.onPointerMove==null||a.onPointerMove.call(a,T),!c.current))return;const F=T.pageY-c.current.y,Q=T.pageX-c.current.x,re=T.pointerType==="touch"?10:2;O({x:Q,y:F},S,re)?y(T):(Math.abs(Q)>re||Math.abs(F)>re)&&(c.current=null)},onPointerUp:T=>{a.onPointerUp==null||a.onPointerUp.call(a,T),c.current=null,h.current=!1,d(T)},onPointerOut:T=>{a.onPointerOut==null||a.onPointerOut.call(a,T),$(l.current)},onContextMenu:T=>{a.onContextMenu==null||a.onContextMenu.call(a,T),l.current&&$(l.current)}})});er.displayName="Drawer.Content";const Sn=250,Nn=120,Cn=v.forwardRef(function({preventCycle:t=!1,children:n,...r},a){const{closeDrawer:o,isDragging:s,snapPoints:b,activeSnapPoint:d,setActiveSnapPoint:y,dismissible:w,handleOnly:f,isOpen:p,onPress:m,onDrag:D}=Qe(),S=v.useRef(null),N=v.useRef(!1);function j(){if(N.current){C();return}window.setTimeout(()=>{i()},Nn)}function i(){if(s||t||N.current){C();return}if(C(),!b||b.length===0){w||o();return}if(d===b[b.length-1]&&w){o();return}const L=b.findIndex(c=>c===d);if(L===-1)return;const U=b[L+1];y(U)}function x(){S.current=window.setTimeout(()=>{N.current=!0},Sn)}function C(){S.current&&window.clearTimeout(S.current),N.current=!1}return v.createElement("div",{onClick:j,onPointerCancel:C,onPointerDown:g=>{f&&m(g),x()},onPointerMove:g=>{f&&D(g)},ref:a,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},v.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});Cn.displayName="Drawer.Handle";function Tn(t){const n=Qe(),{container:r=n.container,...a}=t;return v.createElement(Rr,{container:r,...a})}const ve={Root:yn,Content:er,Overlay:Zt,Portal:Tn,Close:Lr,Title:Ar,Description:_r},tr=({shouldScaleBackground:t=!0,...n})=>e.jsx(ve.Root,{shouldScaleBackground:t,...n});tr.displayName="Drawer";const En=ve.Portal,Ln=ve.Close,rr=u.forwardRef(({className:t,...n},r)=>e.jsx(ve.Overlay,{ref:r,className:Te("fixed inset-0 z-50 bg-black/80",t),...n}));rr.displayName=ve.Overlay.displayName;const nr=u.forwardRef(({className:t,children:n,...r},a)=>e.jsxs(En,{children:[e.jsx(rr,{}),e.jsxs(ve.Content,{ref:a,className:Te("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...r,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));nr.displayName="DrawerContent";const sr=({className:t,...n})=>e.jsx("div",{className:Te("grid gap-1.5 p-4 text-center sm:text-left",t),...n});sr.displayName="DrawerHeader";const ar=({className:t,...n})=>e.jsx("div",{className:Te("mt-auto flex flex-col gap-2 p-4",t),...n});ar.displayName="DrawerFooter";const or=u.forwardRef(({className:t,...n},r)=>e.jsx(ve.Title,{ref:r,className:Te("text-lg font-semibold leading-none tracking-tight",t),...n}));or.displayName=ve.Title.displayName;const ir=u.forwardRef(({className:t,...n},r)=>e.jsx(ve.Description,{ref:r,className:Te("text-sm text-muted-foreground",t),...n}));ir.displayName=ve.Description.displayName;const An=[{code:"CSCC 21.1",name:"Software Engineering 1",units:3,instructional:"integrated lec/lab"},{code:"CSCC 36",name:"Advanced Topics in Human Computer Interaction",units:3,instructional:"lecture only"},{code:"CSCC 37",name:"User Interface Design and Development",units:3,instructional:"integrated lec/lab"},{code:"CSCC 40",name:"Introduction to Artificial Intelligence",units:3,instructional:"lecture only"},{code:"CSCC 44",name:"Introduction to Data Mining",units:3,instructional:"integrated lec/lab"},{code:"CSCC 46",name:"Introduction to Robotics",units:3,instructional:"integrated lec/lab"},{code:"ISCC 11",name:"Organization and Management Concepts",units:3,instructional:"lecture only"},{code:"ISCC 12",name:"Financial Management",units:3,instructional:"lecture only"},{code:"ISCC 16",name:"Technopreneurship",units:3,instructional:"lecture only"},{code:"ISCC 17",name:"Electronic Commerce",units:3,instructional:"lecture only"},{code:"ISCC 18",name:"Introduction to Enterprise Resource Planning",units:3,instructional:"lecture only"},{code:"ISCC 21.1",name:"IS Project Management",units:3,instructional:"lecture only"},{code:"ISCC 22.1",name:"Systems Analysis and Design",units:3,instructional:"lecture only"},{code:"ISCC 31",name:"Current Issues and Trends in Computing",units:3,instructional:"lecture only"},{code:"ITCC 12",name:"Platform Technologies",units:3,instructional:"integrated lec/lab"},{code:"ITCC 17",name:"Advanced Systems Integration and Architecture",units:3,instructional:"integrated lec/lab"},{code:"ITCC 18",name:"Advanced Integrative Programming and Technologies",units:3,instructional:"lec and lab"},{code:"ITCC 19",name:"Introduction to Geographic Information Systems",units:3,instructional:"integrated lec/lab"},{code:"ITCC 34",name:"Contemporary Database Technologies",units:3,instructional:"integrated lec/lab"},{code:"ITCC 35",name:"Advanced Web Systems and Technologies",units:3,instructional:"integrated lec/lab"},{code:"ITCC 36",name:"Introduction to Cloud Computing",units:3,instructional:"integrated lec/lab"},{code:"ITCC 37",name:"Data Warehousing",units:3,instructional:"integrated lec/lab"},{code:"ITCC 38",name:"Parallel and Distributed Computing",units:3,instructional:"integrated lec/lab"},{code:"ITCC 39",name:"IT Industry Management",units:3,instructional:"lecture only"},{code:"ITCC 40",name:"Web Design and Development",units:3,instructional:"integrated lec/lab"},{code:"ITCC 41",name:"Mobile Applications Development",units:3,instructional:"integrated lec/lab"}],_n=(t,n)=>{const[r,a]=t.split(", "),[o,s]=n.split(", "),b=parseInt(r),d=parseInt(o);return b!==d?b-d:a?.includes("Summer")?1:s?.includes("Summer")||a?.includes("1st")?-1:s?.includes("1st")?1:0};function kn({isOpen:t,onClose:n,program:r,onAddSemester:a,onEditSemester:o,onAddSubject:s,onEditSubject:b,onDeleteSubject:d,onSetSemesterStatus:y,refreshKey:w,updatedSubjectData:f,newSemesterData:p,updatedSemesterData:m}){const[D,S]=u.useState({}),[N,j]=u.useState(!1),[i,x]=u.useState(!1),[C,g]=u.useState(null),L=c=>{g(c),x(!0)};u.useEffect(()=>{if(!t)return;(async()=>{j(!0);const l=localStorage.getItem("accessToken");if(!l){_.error("Authentication required."),j(!1);return}try{const h=await ue.get("/semester-with-subjects",{params:{program_id:r.id},headers:{Authorization:`Bearer ${l}`}}),k=Array.isArray(h.data.semesters)?h.data.semesters:[],O={};k.forEach($=>{const T=`${$.year_level}, ${$.semester_level}`;O[T]={id:$.id,subjects:($.subjects||[]).map(F=>({id:F.id,code:F.subject_code,name:F.des_title,unitsTotal:F.total_units,unitsLec:F.lec_units,unitsLab:F.lab_units,hoursTotal:F.total_hrs,hoursLec:F.total_lec_hrs,hoursLab:F.total_lab_hrs,prerequisite:F.pre_requisite||"None"})),isActive:$.status===1,startDate:$.start_date,endDate:$.end_date}}),S(O)}catch{_.error("Failed to load semester data.")}finally{j(!1)}})()},[t,r.id,w]),u.useEffect(()=>{if(f){const{semesterName:c,subject:l}=f;S(h=>{const k=JSON.parse(JSON.stringify(h)),O=k[c];if(O){const $=O.subjects.findIndex(T=>T.id===l.id);$!==-1?O.subjects[$]=l:O.subjects.push(l)}return k})}},[f]),u.useEffect(()=>{if(p){const{name:c,semester:l}=p;S(h=>({...h,[c]:l}))}},[p]),u.useEffect(()=>{if(m){const{name:c,semester:l,newName:h}=m;S(k=>{const O={...k},$=O[c];return $?(h&&h!==c?(O[h]={...$,...l},delete O[c]):O[c]={...$,...l},O):k})}},[m]);const U=u.useMemo(()=>Object.entries(D).sort(([c],[l])=>_n(c,l)),[D]);return e.jsxs(Oe,{open:t,onOpenChange:n,children:[e.jsxs($e,{className:"max-w-7xl h-[95vh] flex flex-col p-0",children:[e.jsxs(Me,{className:"p-6 pb-4 bg-muted/50 border-b rounded-t-lg",children:[e.jsxs(Fe,{className:"text-2xl md:text-3xl font-bold text-foreground flex items-center gap-3",children:[r.name,e.jsx("span",{className:"text-sm font-semibold text-primary bg-primary/10 px-3 py-1 rounded-full",children:r.abbreviation})]}),e.jsxs(it,{className:"flex items-center gap-2",children:[e.jsx($r,{className:"h-4 w-4"}),"Academic Year of Effectivity: ",r.effectiveYear]})]}),e.jsx("div",{className:"flex-grow overflow-y-auto px-6 py-4 space-y-8",children:N?e.jsx("div",{className:"space-y-6",children:[1,2].map(c=>e.jsxs("div",{className:"bg-card border rounded-xl p-4 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-muted/60 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-48 bg-muted/30 rounded"})]},c))}):U.length===0?e.jsxs("div",{className:"text-center py-20 text-muted-foreground flex flex-col items-center justify-center h-full",children:[e.jsx(Rt,{size:56,className:"mx-auto mb-4"}),e.jsx("h4",{className:"font-semibold text-xl text-foreground",children:"No Semesters Found"}),e.jsx("p",{className:"max-w-md mx-auto mt-2 text-sm",children:"This curriculum is empty."})]}):U.map(([c,l])=>e.jsxs("div",{className:`group/semester border rounded-xl overflow-hidden shadow-sm transition-opacity ${l.isActive?"bg-card":"opacity-70 bg-muted/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground",children:c}),e.jsx(Or,{variant:l.isActive?"default":"destructive",children:l.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover/semester:opacity-100 transition-opacity",children:[e.jsx(q,{variant:"ghost",size:"icon",title:"Set Status & Dates",className:"h-8 w-8 text-muted-foreground",onClick:()=>y(c,l,r.effectiveYear),children:e.jsx(Xr,{size:16})}),e.jsx(q,{variant:"ghost",size:"icon",title:"Rename Semester",className:"h-8 w-8 text-green-500 hover:text-green-500",onClick:()=>o(l.id,c),children:e.jsx(gt,{size:16})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(vt,{className:"min-w-[1200px]",children:[e.jsxs(bt,{className:"bg-muted/50 sticky top-0 z-10",children:[e.jsxs(he,{children:[e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r",children:"Course Code"}),e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r w-[350px]",children:"Descriptive Title"}),e.jsx(Y,{colSpan:3,className:"text-center border-r",children:"Units"}),e.jsx(Y,{colSpan:3,className:"text-center border-r",children:"Hours per week"}),e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r",children:"Pre-requisite"}),e.jsx(Y,{rowSpan:2,className:"align-middle w-[100px] text-center",children:"Actions"})]}),e.jsxs(he,{children:[e.jsx(Y,{className:"text-center border-r",children:"Total"}),e.jsx(Y,{className:"text-center border-r",children:"Lec"}),e.jsx(Y,{className:"text-center border-r",children:"Lab"}),e.jsx(Y,{className:"text-center border-r",children:"Total"}),e.jsx(Y,{className:"text-center border-r",children:"Lec"}),e.jsx(Y,{className:"text-center border-r",children:"Lab"})]})]}),e.jsx(jt,{children:l.subjects.length>0?l.subjects.map(h=>{const k=h.name.toUpperCase().startsWith("PROFESSIONAL ELECTIVE")&&h.code.toUpperCase().startsWith("ELECTIVE");return e.jsxs(he,{children:[e.jsx(P,{className:"w-[150px] font-semibold uppercase text-center",children:h.code}),e.jsx(P,{children:k?e.jsx(q,{variant:"link",className:"text-left p-0 h-auto font-normal text-base text-blue-600 hover:underline",onClick:()=>L(h),children:h.name}):h.name}),e.jsx(P,{className:"text-center font-bold text-primary",children:h.unitsTotal}),e.jsx(P,{className:"text-center",children:h.unitsLec}),e.jsx(P,{className:"text-center",children:h.unitsLab}),e.jsx(P,{className:"text-center font-bold text-primary",children:h.hoursTotal}),e.jsx(P,{className:"text-center",children:h.hoursLec}),e.jsx(P,{className:"text-center",children:h.hoursLab}),e.jsx(P,{className:"w-[150px] text-center",children:h.prerequisite}),e.jsx(P,{className:"text-center",children:e.jsxs("div",{className:"flex justify-end items-center gap-1",children:[e.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-green-500 hover:text-green-500",onClick:()=>b(c,h),children:e.jsx(gt,{size:16})}),e.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>d(c,h.id),children:e.jsx(Nt,{size:16})})]})})]},h.id||h.code)}):e.jsx(he,{children:e.jsx(P,{colSpan:10,className:"text-center h-24 text-muted-foreground",children:"No subjects added for this semester."})})}),e.jsx(qt,{className:"sticky bottom-0 bg-muted/80 backdrop-blur-sm",children:e.jsxs(he,{children:[e.jsx(P,{colSpan:2,className:"text-right font-bold text-lg",children:"SEMESTER TOTALS"}),e.jsx(P,{className:"text-center font-bold text-lg text-primary",children:l.subjects.reduce((h,k)=>h+(Number(k.unitsTotal)||0),0)}),e.jsx(P,{className:"text-center font-semibold",children:l.subjects.reduce((h,k)=>h+(Number(k.unitsLec)||0),0)}),e.jsx(P,{className:"text-center font-semibold",children:l.subjects.reduce((h,k)=>h+(Number(k.unitsLab)||0),0)}),e.jsx(P,{className:"text-center font-bold text-lg text-primary",children:l.subjects.reduce((h,k)=>h+(Number(k.hoursTotal)||0),0)}),e.jsx(P,{className:"text-center font-semibold",children:l.subjects.reduce((h,k)=>h+(Number(k.hoursLec)||0),0)}),e.jsx(P,{className:"text-center font-semibold",children:l.subjects.reduce((h,k)=>h+(Number(k.hoursLab)||0),0)}),e.jsx(P,{colSpan:2})]})})]})}),e.jsx("div",{className:"p-2 border-t",children:e.jsxs(q,{onClick:()=>s(c,l.id),variant:"link",children:[e.jsx(Ct,{size:16,className:"mr-1"})," Add Subject"]})})]},c))}),e.jsxs(ze,{className:"mt-auto p-6 bg-gray-50 border-t rounded-b-lg flex flex-col md:flex-row md:justify-end gap-2",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",children:"Cancel"})}),e.jsxs(q,{onClick:a,className:"flex items-center gap-2",children:[e.jsx(Rt,{size:16})," Add Year/Semester"]})]})]}),e.jsx(tr,{open:i,onOpenChange:x,children:e.jsxs(nr,{className:"p-4",children:[e.jsxs(sr,{className:"text-left",children:[e.jsx(or,{children:C?.name}),e.jsx(ir,{children:"The following subjects can be taken for this elective."})]}),e.jsx("div",{className:"overflow-y-auto px-4 max-h-[70vh]",children:e.jsxs(vt,{children:[e.jsx(bt,{children:e.jsxs(he,{children:[e.jsx(Y,{children:"Course Code"}),e.jsx(Y,{children:"Descriptive Title"}),e.jsx(Y,{className:"text-center",children:"Units"}),e.jsx(Y,{children:"Instructional"})]})}),e.jsx(jt,{children:An.map(c=>e.jsxs(he,{children:[e.jsx(P,{className:"font-semibold",children:c.code}),e.jsx(P,{children:c.name}),e.jsx(P,{className:"text-center",children:c.units}),e.jsx(P,{children:c.instructional})]},c.code))})]})}),e.jsx(ar,{className:"pt-4",children:e.jsx(Ln,{asChild:!0,children:e.jsx(q,{variant:"outline",children:"Close"})})})]})})]})}const Rn=()=>{const r=new Date().getFullYear()+5,a=[];for(let o=2015;o<=r;o++)a.push(String(o));return a},Ft=Rn();function Dn({isOpen:t,onClose:n,onSave:r,initialData:a}){const[o,s]=u.useState(""),[b,d]=u.useState(""),[y,w]=u.useState(""),[f,p]=u.useState(""),[m,D]=u.useState(!1);u.useEffect(()=>{if(a){s(a.name),d(a.abbreviation);const[j="",i=""]=a.effectiveYear.split("-");w(j),p(i)}else{s(""),d("");const j=new Date().getFullYear();w(String(j)),p(String(j+1))}},[a,t]);const S=async j=>{j.preventDefault(),D(!0);const i={program_name:o,abbreviation:b,year_from:y,year_to:f},x=localStorage.getItem("accessToken");if(!x){_.error("Authentication required."),D(!1);return}const C={Authorization:`Bearer ${x}`};try{const g=!!a,L=g?`/edit-program/${a.id}`:"/add-program",c=await ue["post"](L,i,{headers:C});_.success(c.data.message||"Program saved successfully!");const l=c.data.program,h=l.subjects||a?.subjects||{},k=typeof l.total_subjects=="number"?l.total_subjects:Object.keys(h).length,O=typeof l.total_units=="number"?l.total_units:a?.total_units??0,$={id:l.id,name:l.program_name,abbreviation:l.abbreviation,effectiveYear:`${l.year_from}-${l.year_to}`,semesters:l.semesters||a?.semesters||{},subjects:h,total_subjects:k,total_units:O,isActive:l.isActive??l.is_active??a?.isActive??!0};r($),n()}catch(g){if(ue.isAxiosError(g)&&g.response){if(g.response.status===401){_.error("Your session has expired. Please log in again.");return}const L=g.response.data,U=L.errors;if(U&&typeof U=="object"&&Object.keys(U).length>0){const c=Object.keys(U)[0],l=U[c]?.[0];_.error(l||"A validation error occurred.")}else L&&typeof L.message=="string"?_.error(L.message):_.error("An unknown API error occurred.")}else _.error("Failed to connect to the server. Please check your connection."),console.error("Non-Axios error:",g)}finally{D(!1)}},N=j=>{w(j),p(String(Number(j)+1))};return e.jsx(Oe,{open:t,onOpenChange:n,children:e.jsxs($e,{children:[e.jsx(Me,{children:e.jsx(Fe,{children:a?"Edit Program":"Add New Program"})}),e.jsxs("form",{onSubmit:S,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"progName",children:"Program Name"}),e.jsx(W,{id:"progName",value:o,onChange:j=>s(j.target.value),placeholder:"e.g., Bachelor of Science...",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"progAbbr",children:"Abbreviation"}),e.jsx(W,{id:"progAbbr",value:b,onChange:j=>d(j.target.value),placeholder:"e.g., BSIT",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{children:"Effectivity A.Y."}),e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[e.jsxs(Ee,{value:y,onValueChange:N,required:!0,children:[e.jsx(Le,{children:e.jsx(Ae,{placeholder:"Start Year"})}),e.jsx(_e,{children:Ft.map(j=>e.jsx(ge,{value:j,children:j},j))})]}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsxs(Ee,{value:f,onValueChange:p,required:!0,children:[e.jsx(Le,{children:e.jsx(Ae,{placeholder:"End Year"})}),e.jsx(_e,{children:Ft.map(j=>e.jsx(ge,{value:j,children:j},j))})]})]})]}),e.jsxs(ze,{className:"pt-4",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",disabled:m,children:"Cancel"})}),e.jsx(q,{type:"submit",disabled:m,children:m?"Saving...":a?"Save Changes":"Save Program"})]})]})]})})}const pt={id:0,code:"",name:"",unitsTotal:0,unitsLec:"",unitsLab:"",hoursTotal:0,hoursLec:"",hoursLab:"",prerequisite:""},In=["1st Year","2nd Year","3rd Year","4th Year"],Pn=["1st Semester","2nd Semester","Summer"];function On({isOpen:t,onClose:n,onSave:r,programId:a}){const[o,s]=u.useState(""),[b,d]=u.useState(""),[y,w]=u.useState([pt]),[f,p]=u.useState(!1);u.useEffect(()=>{const i=y.map(x=>({...x,unitsTotal:(Number(x.unitsLec)||0)+(Number(x.unitsLab)||0),hoursTotal:(Number(x.hoursLec)||0)+(Number(x.hoursLab)||0)}));JSON.stringify(i)!==JSON.stringify(y)&&w(i)},[y]);const m=u.useMemo(()=>y.reduce((i,x)=>(i.totalUnits+=Number(x.unitsTotal)||0,i.totalLecUnits+=Number(x.unitsLec)||0,i.totalLabUnits+=Number(x.unitsLab)||0,i.totalHours+=Number(x.hoursTotal)||0,i.totalLecHours+=Number(x.hoursLec)||0,i.totalLabHours+=Number(x.hoursLab)||0,i),{totalUnits:0,totalLecUnits:0,totalLabUnits:0,totalHours:0,totalLecHours:0,totalLabHours:0}),[y]),D=()=>w(i=>[...i,{...pt}]),S=i=>w(x=>x.length>1?x.filter((C,g)=>g!==i):x),N=(i,x,C)=>w(g=>g.map((L,U)=>U===i?{...L,[x]:C}:L)),j=async i=>{if(i.preventDefault(),!o||!b){_.error("Please select a year level and semester.");return}if(y.some(x=>!x.code.trim()||!x.name.trim())){_.error("Please fill out all subject codes and titles.");return}p(!0);try{const x=localStorage.getItem("accessToken");if(!x){_.error("Authentication required."),p(!1);return}const C={program_id:a,year_level:o,semester_level:b,subjects:y.map(L=>({subject_code:L.code,des_title:L.name,total_units:L.unitsTotal,lec_units:Number(L.unitsLec)||0,lab_units:Number(L.unitsLab)||0,total_hrs:L.hoursTotal,total_lec_hrs:Number(L.hoursLec)||0,total_lab_hrs:Number(L.hoursLab)||0,pre_requisite:L.prerequisite||null}))},g=await ue.post("/semester-with-subjects",C,{headers:{Authorization:`Bearer ${x}`}});if(g.status===201&&g.data.semester){_.success("Semester and subjects added successfully!");const L=g.data.semester,U=`${L.year_level}, ${L.semester_level}`,c={id:L.id,isActive:L.status===1,startDate:L.start_date,endDate:L.end_date,subjects:(L.subjects||[]).map(l=>({id:l.id,code:l.subject_code,name:l.des_title,unitsTotal:l.total_units,unitsLec:l.lec_units,unitsLab:l.lab_units,hoursTotal:l.total_hrs,hoursLec:l.total_lec_hrs,hoursLab:l.total_lab_hrs,prerequisite:l.pre_requisite||"None"}))};r&&r({name:U,semester:c}),n()}}catch(x){_.error(x.response?.data?.error||"Failed to save. Please try again.")}finally{p(!1)}};return u.useEffect(()=>{t&&(s(""),d(""),w([pt]))},[t]),e.jsx(Oe,{open:t,onOpenChange:n,children:e.jsx(wr,{children:e.jsxs($e,{className:"max-w-7xl h-[95vh] flex flex-col",children:[e.jsxs(Me,{children:[e.jsx(Fe,{children:"Add New Semester and Subjects"}),e.jsx(it,{children:"Add subjects in bulk for a new semester. Totals are calculated automatically."})]}),e.jsxs("form",{onSubmit:j,className:"flex-grow flex flex-col min-h-0 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"yearLevel",className:"text-base",children:"Year Level"}),e.jsxs(Ee,{value:o,onValueChange:s,required:!0,children:[e.jsx(Le,{id:"yearLevel",children:e.jsx(Ae,{placeholder:"Select a year level"})}),e.jsx(_e,{children:In.map(i=>e.jsx(ge,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"semester",className:"text-base",children:"Semester"}),e.jsxs(Ee,{value:b,onValueChange:d,required:!0,children:[e.jsx(Le,{id:"semester",children:e.jsx(Ae,{placeholder:"Select a semester"})}),e.jsx(_e,{children:Pn.map(i=>e.jsx(ge,{value:i,children:i},i))})]})]})]}),e.jsx("div",{className:"flex-grow overflow-auto border rounded-lg",children:e.jsxs(vt,{className:"min-w-[1200px]",children:[e.jsxs(bt,{className:"bg-muted/50 sticky top-0 z-10",children:[e.jsxs(he,{children:[e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r",children:"Course Code"}),e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r w-[350px]",children:"Descriptive Title"}),e.jsx(Y,{colSpan:3,className:"text-center border-r",children:"Units"}),e.jsx(Y,{colSpan:3,className:"text-center border-r",children:"Hours per week"}),e.jsx(Y,{rowSpan:2,className:"align-middle text-center border-r",children:"Pre-requisite"}),e.jsx(Y,{rowSpan:2,className:"align-middle w-[50px]"})]}),e.jsxs(he,{children:[e.jsx(Y,{className:"text-center border-r",children:"Total"}),e.jsx(Y,{className:"text-center border-r",children:"Lec"}),e.jsx(Y,{className:"text-center border-r",children:"Lab"}),e.jsx(Y,{className:"text-center border-r",children:"Total"}),e.jsx(Y,{className:"text-center border-r",children:"Lec"}),e.jsx(Y,{className:"text-center border-r",children:"Lab"})]})]}),e.jsx(jt,{children:y.map((i,x)=>e.jsxs(he,{children:[e.jsx(P,{className:"w-[150px]",children:e.jsx(W,{required:!0,className:"uppercase",placeholder:"e.g. CS101",value:i.code,onChange:C=>N(x,"code",C.target.value)})}),e.jsx(P,{children:e.jsx(W,{required:!0,placeholder:"e.g. Intro to Programming",value:i.name,onChange:C=>N(x,"name",C.target.value)})}),e.jsx(P,{children:e.jsxs(At,{children:[e.jsx(_t,{asChild:!0,children:e.jsx(W,{value:i.unitsTotal||"",readOnly:!0,className:"text-center font-bold bg-muted/50 cursor-not-allowed"})}),e.jsx(kt,{children:"Auto-calculated"})]})}),e.jsx(P,{children:e.jsx(W,{min:"0",type:"number",value:i.unitsLec,onChange:C=>N(x,"unitsLec",C.target.value),className:"text-center"})}),e.jsx(P,{children:e.jsx(W,{min:"0",type:"number",value:i.unitsLab,onChange:C=>N(x,"unitsLab",C.target.value),className:"text-center"})}),e.jsx(P,{children:e.jsxs(At,{children:[e.jsx(_t,{asChild:!0,children:e.jsx(W,{value:i.hoursTotal||"",readOnly:!0,className:"text-center font-bold bg-muted/50 cursor-not-allowed"})}),e.jsx(kt,{children:"Auto-calculated"})]})}),e.jsx(P,{children:e.jsx(W,{min:"0",type:"number",value:i.hoursLec,onChange:C=>N(x,"hoursLec",C.target.value),className:"text-center"})}),e.jsx(P,{children:e.jsx(W,{min:"0",type:"number",value:i.hoursLab,onChange:C=>N(x,"hoursLab",C.target.value),className:"text-center"})}),e.jsx(P,{className:"w-[150px]",children:e.jsx(W,{placeholder:"None",value:i.prerequisite,onChange:C=>N(x,"prerequisite",C.target.value)})}),e.jsx(P,{className:"text-center",children:e.jsx(q,{type:"button",variant:"ghost",size:"icon",onClick:()=>S(x),disabled:y.length<=1,className:"text-destructive h-8 w-8 shrink-0 disabled:opacity-50",children:e.jsx(Nt,{size:16})})})]},x))}),e.jsx(qt,{className:"sticky bottom-0 bg-muted/80 backdrop-blur-sm",children:e.jsxs(he,{children:[e.jsx(P,{colSpan:2,className:"text-right font-bold text-lg",children:"SEMESTER TOTALS"}),e.jsx(P,{className:"text-center font-bold text-lg text-primary",children:m.totalUnits}),e.jsx(P,{className:"text-center font-semibold",children:m.totalLecUnits}),e.jsx(P,{className:"text-center font-semibold",children:m.totalLabUnits}),e.jsx(P,{className:"text-center font-bold text-lg text-primary",children:m.totalHours}),e.jsx(P,{className:"text-center font-semibold",children:m.totalLecHours}),e.jsx(P,{className:"text-center font-semibold",children:m.totalLabHours}),e.jsx(P,{colSpan:2})]})})]})}),e.jsxs(q,{type:"button",variant:"outline",onClick:D,className:"mt-4 w-full sm:w-auto",children:[e.jsx(Ct,{size:16,className:"mr-2"})," Add Subject Row"]}),e.jsxs(ze,{className:"mt-5 pt-4 border-t",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",disabled:f,children:"Cancel"})}),e.jsx(q,{type:"submit",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):"Save Curriculum"})]})]})]})})})}const $n=["1st Year","2nd Year","3rd Year","4th Year"],Mn=["1st Semester","2nd Semester","Summer"];function Fn({isOpen:t,onClose:n,onSaveSuccess:r,semesterId:a,initialData:o}){const[s,b]=u.useState(!1),[d,y]=u.useState(""),[w,f]=u.useState("");u.useEffect(()=>{if(t&&o){const m=o.split(", ");m.length===2&&(y(m[0]),f(m[1]))}},[t,o]);const p=async m=>{m.preventDefault();const D=`${d}, ${w}`;if(!d||!w){_.error("Please select both a year level and a semester.");return}if(D===o){_.info("No changes were made."),n();return}if(!a){_.error("Semester ID is missing.");return}b(!0);try{const S=localStorage.getItem("accessToken");if(!S){_.error("Authentication required."),b(!1);return}const N={year_level:d,semester_level:w};await ue.put(`/semesters/${a}/rename`,N,{headers:{Authorization:`Bearer ${S}`}}),_.success("Semester renamed successfully!"),r(o,D),n()}catch(S){_.error(S.response?.data?.message||"Failed to rename semester.")}finally{b(!1)}};return e.jsx(Oe,{open:t,onOpenChange:n,children:e.jsxs($e,{children:[e.jsx(Me,{children:e.jsx(Fe,{children:"Rename Semester"})}),e.jsxs("form",{onSubmit:p,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"yearPart",children:"Year Level"}),e.jsxs(Ee,{value:d,onValueChange:y,children:[e.jsx(Le,{id:"yearPart",children:e.jsx(Ae,{placeholder:"Select a year level"})}),e.jsx(_e,{children:$n.map(m=>e.jsx(ge,{value:m,children:m},m))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"semesterPart",children:"Semester"}),e.jsxs(Ee,{value:w,onValueChange:f,children:[e.jsx(Le,{id:"semesterPart",children:e.jsx(Ae,{placeholder:"Select a semester"})}),e.jsx(_e,{children:Mn.map(m=>e.jsx(ge,{value:m,children:m},m))})]})]}),e.jsxs(ze,{className:"pt-4",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",disabled:s,children:"Cancel"})}),e.jsx(q,{type:"submit",disabled:s||!d||!w,children:s?e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"mr-2 h-4 w-4 animate-spin"})," Renaming..."]}):"Rename"})]})]})]})})}function zn(t){const{isOpen:n,onClose:r,onSave:a,initialData:o}=t,[s,b]=u.useState({id:0,code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""}),[d,y]=u.useState(null);u.useEffect(()=>{const S=(Number(s.unitsLec)||0)+(Number(s.unitsLab)||0),N=(Number(s.hoursLec)||0)+(Number(s.hoursLab)||0);b(j=>({...j,unitsTotal:S,hoursTotal:N}))},[s.unitsLec,s.unitsLab,s.hoursLec,s.hoursLab]),u.useEffect(()=>{const S=Number(s.unitsLec)||0,N=Number(s.unitsLab)||0,j=Number(s.unitsTotal)||0,i=S+N>j?"Lec + Lab units cannot exceed Total.":null,x=Number(s.hoursLec)||0,C=Number(s.hoursLab)||0,g=Number(s.hoursTotal)||0,L=x+C>g?"Lec + Lab hours cannot exceed Total.":null;y(i||L?{unitError:i,hourError:L}:null)},[s]),u.useEffect(()=>{n&&b(o||{id:0,code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""})},[n,o]);const w=(S,N)=>{b(j=>({...j,[S]:N}))},f=(S,N)=>{const j=Number(N);w(S,j>=0?j:0)},[p,m]=u.useState(!1),D=async S=>{if(S.preventDefault(),d){_.error("Please fix the validation errors before saving.");return}const N=!!o;m(!0);try{await a(s,N),r()}catch(j){console.error("Subject save failed:",j),_.error("Failed to save subject.")}finally{m(!1)}};return e.jsx(Oe,{open:n,onOpenChange:r,children:e.jsxs($e,{children:[e.jsx(Me,{children:e.jsx(Fe,{children:o?`Edit Subject: ${o.code}`:"Add New Subject"})}),e.jsxs("form",{onSubmit:D,className:"py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"code",children:"Course Code"}),e.jsx(W,{id:"code",value:s.code,onChange:S=>w("code",S.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"prerequisite",children:"Pre-requisite"}),e.jsx(W,{id:"prerequisite",value:s.prerequisite,onChange:S=>w("prerequisite",S.target.value),placeholder:"None"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"name",children:"Descriptive Title"}),e.jsx(W,{id:"name",value:s.name,onChange:S=>w("name",S.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(X,{className:"font-semibold",children:"Unit Allocation"}),e.jsxs("div",{className:`grid grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/30 ${d?.unitError?"border-destructive":""}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"unitsTotal",children:"Total"}),e.jsx(W,{id:"unitsTotal",type:"number",value:s.unitsTotal||"",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"unitsLec",children:"Lec"}),e.jsx(W,{id:"unitsLec",type:"number",value:s.unitsLec||"",onChange:S=>f("unitsLec",S.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"unitsLab",children:"Lab"}),e.jsx(W,{id:"unitsLab",type:"number",value:s.unitsLab||"",onChange:S=>f("unitsLab",S.target.value)})]})]}),d?.unitError&&e.jsxs("p",{className:"text-destructive text-sm flex items-center gap-2 mt-2",children:[e.jsx(Dt,{size:16}),d.unitError]})]}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(X,{className:"font-semibold",children:"Hour Allocation"}),e.jsxs("div",{className:`grid grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/30 ${d?.hourError?"border-destructive":""}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"hoursTotal",children:"Total"}),e.jsx(W,{id:"hoursTotal",type:"number",value:s.hoursTotal||"",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"hoursLec",children:"Lec"}),e.jsx(W,{id:"hoursLec",type:"number",value:s.hoursLec||"",onChange:S=>f("hoursLec",S.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{htmlFor:"hoursLab",children:"Lab"}),e.jsx(W,{id:"hoursLab",type:"number",value:s.hoursLab||"",onChange:S=>f("hoursLab",S.target.value)})]})]}),d?.hourError&&e.jsxs("p",{className:"text-destructive text-sm flex items-center gap-2 mt-2",children:[e.jsx(Dt,{size:16}),d.hourError]})]})]}),e.jsxs(ze,{className:"mt-8 pt-4 border-t",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",disabled:p,children:"Cancel"})}),e.jsx(q,{type:"submit",disabled:!!d||p,children:p?"Saving...":o?"Save Changes":"Save Subject"})]})]})]})})}function Hn(t,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return n?.(o)}}var lt="Switch",[Yn,ms]=Sr(lt),[qn,Bn]=Yn(lt),lr=u.forwardRef((t,n)=>{const{__scopeSwitch:r,name:a,checked:o,defaultChecked:s,required:b,disabled:d,value:y="on",onCheckedChange:w,form:f,...p}=t,[m,D]=u.useState(null),S=Ht(n,C=>D(C)),N=u.useRef(!1),j=m?f||!!m.closest("form"):!0,[i,x]=yr({prop:o,defaultProp:s??!1,onChange:w,caller:lt});return e.jsxs(qn,{scope:r,checked:i,disabled:d,children:[e.jsx(Yt.button,{type:"button",role:"switch","aria-checked":i,"aria-required":b,"data-state":mr(i),"data-disabled":d?"":void 0,disabled:d,value:y,...p,ref:S,onClick:Hn(t.onClick,C=>{x(g=>!g),j&&(N.current=C.isPropagationStopped(),N.current||C.stopPropagation())})}),j&&e.jsx(dr,{control:m,bubbles:!N.current,name:a,value:y,checked:i,required:b,disabled:d,form:f,style:{transform:"translateX(-100%)"}})]})});lr.displayName=lt;var cr="SwitchThumb",ur=u.forwardRef((t,n)=>{const{__scopeSwitch:r,...a}=t,o=Bn(cr,r);return e.jsx(Yt.span,{"data-state":mr(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:n})});ur.displayName=cr;var Un="SwitchBubbleInput",dr=u.forwardRef(({__scopeSwitch:t,control:n,checked:r,bubbles:a=!0,...o},s)=>{const b=u.useRef(null),d=Ht(b,s),y=Er(r),w=Nr(n);return u.useEffect(()=>{const f=b.current;if(!f)return;const p=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(p,"checked").set;if(y!==r&&D){const S=new Event("click",{bubbles:a});D.call(f,r),f.dispatchEvent(S)}},[y,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:d,style:{...o.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dr.displayName=Un;function mr(t){return t?"checked":"unchecked"}var hr=lr,Vn=ur;const fr=u.forwardRef(({className:t,...n},r)=>e.jsx(hr,{className:Te("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:r,children:e.jsx(Vn,{className:Te("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));fr.displayName=hr.displayName;function Wn({isOpen:t,onClose:n,onSaveSuccess:r,semesterId:a,semesterName:o,initialData:s,effectiveYear:b}){const[d,y]=u.useState(!1),[w,f]=u.useState(""),[p,m]=u.useState(""),[D,S]=u.useState(!1);u.useEffect(()=>{if(t&&s){y(s.isActive);const j=i=>{if(!i)return"";try{return new Date(i).toISOString().split("T")[0]}catch{return""}};f(j(s.startDate)),m(j(s.endDate))}},[t,s]);const N=async j=>{if(j.preventDefault(),!a){_.error("Semester ID is missing.");return}if(d&&(!w||!p)){_.error("Start and end dates are required when semester is Active.");return}if(w&&p&&new Date(w)>new Date(p)){_.error("Start date cannot be after the end date.");return}const i=localStorage.getItem("accessToken");if(!i){_.error("Authentication required.");return}S(!0);try{const x=`/semesters/${a}/status`,C={status:d?1:0,start_date:w||null,end_date:p||null},g=await ue.put(x,C,{headers:{Authorization:`Bearer ${i}`}});_.success(g.data.message||"Semester status updated!"),r(o,{isActive:C.status===1,startDate:C.start_date||void 0,endDate:C.end_date||void 0})}catch(x){_.error(x.response?.data?.message||"Failed to update semester.")}finally{S(!1)}};return e.jsx(Oe,{open:t,onOpenChange:n,children:e.jsxs($e,{children:[e.jsxs(Me,{children:[e.jsx(Fe,{children:"Set Semester Status & Dates"}),e.jsxs(it,{className:"flex items-center gap-2 pt-1",children:[e.jsx(Vr,{className:"h-4 w-4"}),"School Year: ",b]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{children:"Semester"}),e.jsx("p",{className:"font-semibold text-lg",children:o})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(fr,{id:"semester-status",checked:d,onCheckedChange:y}),e.jsx(X,{htmlFor:"semester-status",className:"cursor-pointer",children:d?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"startDate",children:"Start Date"}),e.jsx(W,{id:"startDate",type:"date",value:w,onChange:j=>f(j.target.value),required:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"endDate",children:"End Date"}),e.jsx(W,{id:"endDate",type:"date",value:p,onChange:j=>m(j.target.value),required:d})]})]}),e.jsxs(ze,{className:"pt-4",children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{type:"button",variant:"outline",disabled:D,children:"Cancel"})}),e.jsx(q,{type:"submit",disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):"Save Settings"})]})]})]})})}function Xn(){const[t,n]=u.useState([]),[r,a]=u.useState(!0),[o,s]=u.useState(""),[b,d]=u.useState("All Years"),[y,w]=u.useState("Active"),[f,p]=u.useState(null),[m,D]=u.useState(!1),[S,N]=u.useState(null),[j,i]=u.useState(!1),[x,C]=u.useState(!1),[g,L]=u.useState(!1),[U,c]=u.useState(0),[l,h]=u.useState(null),[k,O]=u.useState(null),[$,T]=u.useState(null),[F,Q]=u.useState(null),[re,Z]=u.useState({id:null,name:null}),ie=Cr(),[ne,be]=u.useState(null),fe=u.useCallback(async(E=!0)=>{E&&a(!0);const I=localStorage.getItem("accessToken");if(!I){_.error("Authentication required."),a(!1),ie("/facultyscheduler/user-login");return}try{const z=await ue.get("/program",{headers:{Authorization:`Bearer ${I}`}}),Re=(Array.isArray(z.data.programs)?z.data.programs:Object.values(z.data.programs||{})).map(ee=>({id:ee.id,name:ee.program_name||"",abbreviation:ee.abbreviation||"",effectiveYear:`${ee.year_from}-${ee.year_to}`,total_subjects:ee.total_subjects||0,total_units:ee.total_units||0,isActive:ee.status===0,semesters:ee.semesters?Object.entries(ee.semesters).reduce((pe,[te,le])=>(pe[te]={id:le.id,subjects:(le.subjects||[]).map(ce=>({id:ce.id,code:ce.subject_code,name:ce.des_title,unitsTotal:ce.total_units,unitsLec:ce.lec_units,unitsLab:ce.lab_units,hoursTotal:ce.total_hrs,hoursLec:ce.total_lec_hrs,hoursLab:ce.total_lab_hrs,prerequisite:ce.pre_requisite||""})),isActive:le.status===1,startDate:le.start_date,endDate:le.end_date},pe),{}):{},subjects:ee.subjects||{}}));n(Re)}catch{_.error("Failed to fetch programs.")}finally{E&&a(!1)}},[ie]);u.useEffect(()=>{fe(!0)},[fe]),u.useEffect(()=>{l&&h(null)},[l]),u.useEffect(()=>{k&&O(null)},[k]),u.useEffect(()=>{$&&T(null)},[$]);const Ze=(E,I,z)=>{be({name:E,semester:I,effectiveYear:z})},we=(E,I)=>{Z({id:E,name:I}),C(!0)},Ye=()=>{fe(!1),D(!1)},Be=()=>{N(null),D(!0)},Ue=E=>{N(E),D(!0)},[se,de]=u.useState(null),[ke,qe]=u.useState(!1),ye=E=>{de({open:!0,title:"Archive Program",description:"This will move the program to the archives and make it inactive.",confirmText:"Yes, archive it!",confirmVariant:"destructive",onConfirm:async()=>{const I=localStorage.getItem("accessToken");if(!I){_.error("Authentication required.");return}try{const z=await ue.post(`/archive-program/${E}`,{},{headers:{Authorization:`Bearer ${I}`}});_.success(z.data?.message||"Program archived successfully."),await fe(!1)}catch{_.error("Failed to archive program.")}}})},et=E=>{de({open:!0,title:"Restore Program",description:"This will make the program active again.",confirmText:"Yes, restore it!",confirmVariant:"default",onConfirm:async()=>{const I=localStorage.getItem("accessToken");if(!I){_.error("Authentication required.");return}try{await ue.post(`/restore-program/${E}`,{},{headers:{Authorization:`Bearer ${I}`}}),_.success("Program restored successfully."),await fe(!1)}catch{_.error("Failed to restore program.")}}})},tt=(E,I)=>{Q({semester:E,semesterId:I,subject:null}),L(!0)},R=(E,I)=>{const z=f?.semesters?.[E]?.id;Q({semester:E,semesterId:z,subject:I}),L(!0)},rt=(E,I)=>{if(!I){_.error("Could not find subject ID to delete.");return}de({open:!0,title:"Delete Subject",description:"This will permanently delete this subject. This action cannot be reverted.",confirmText:"Yes, delete it!",confirmVariant:"destructive",onConfirm:async()=>{const z=localStorage.getItem("accessToken");if(!z){_.error("Authentication required.");return}try{await ue.delete(`/subjects/${I}`,{headers:{Authorization:`Bearer ${z}`}}),_.success("Subject deleted successfully!"),c(je=>je+1),await fe(!1)}catch{_.error("Failed to delete subject.")}}})},nt=async(E,I,z,je)=>{if(!f){_.error("No program selected.");return}const Re=localStorage.getItem("accessToken");if(!Re){_.error("Authentication required.");return}try{const ee=I??f?.semesters?.[E]?.id;if(!je&&!ee){_.error("Semester ID not found.");return}const pe={subject_code:z.code,des_title:z.name,total_units:z.unitsTotal,lec_units:z.unitsLec,lab_units:z.unitsLab,total_hrs:z.hoursTotal,total_lec_hrs:z.hoursLec,total_lab_hrs:z.hoursLab,pre_requisite:z.prerequisite||null};let te;if(je){if(!z.id){_.error("Subject ID missing for update.");return}te=await ue.put(`/subjects/${z.id}`,pe,{headers:{Authorization:`Bearer ${Re}`}}),_.success("Subject updated successfully.")}else te=await ue.post(`/semesters/${ee}/subjects`,pe,{headers:{Authorization:`Bearer ${Re}`}}),_.success("Subject added successfully.");if(te.data?.subject){const le={id:te.data.subject.id,code:te.data.subject.subject_code,name:te.data.subject.des_title,unitsTotal:te.data.subject.total_units,unitsLec:te.data.subject.lec_units,unitsLab:te.data.subject.lab_units,hoursTotal:te.data.subject.total_hrs,hoursLec:te.data.subject.total_lec_hrs,hoursLab:te.data.subject.total_lab_hrs,prerequisite:te.data.subject.pre_requisite||"None"};h({semesterName:E,subject:le})}else c(le=>le+1);await fe(!1)}catch{_.error("Failed to save subject.")}},Ve=E=>{O(E),fe(!1)},ct=(E,I)=>{T({name:E,semester:I}),be(null)},ut=(E,I)=>{T({name:E,semester:{},newName:I})},Se=u.useMemo(()=>{const E=new Set(t.map(I=>I.effectiveYear));return["All Years",...Array.from(E).sort((I,z)=>z.localeCompare(I))]},[t]),We=u.useMemo(()=>t.filter(E=>E.name.toLowerCase().includes(o.toLowerCase())||E.abbreviation.toLowerCase().includes(o.toLowerCase())).filter(E=>b==="All Years"||E.effectiveYear===b).filter(E=>y==="All"?!0:y==="Active"?E.isActive:!E.isActive),[t,o,b,y]);return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Curriculum Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage academic programs, semesters, and their subjects."})]}),e.jsx("div",{className:"bg-card p-4 md:p-6 rounded-lg shadow-sm border border-border mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full md:flex-grow",children:[e.jsx(Mr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),e.jsx(W,{type:"text",placeholder:"Search program...",className:"pl-10 w-full",value:o,onChange:E=>s(E.target.value)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs(Ee,{value:b,onValueChange:d,children:[e.jsxs(Le,{className:"w-full sm:w-auto md:w-[180px]",children:[e.jsx(zt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(Ae,{placeholder:"Filter by A.Y."})]}),e.jsx(_e,{children:Se.map(E=>e.jsx(ge,{value:E,children:E},E))})]}),e.jsxs(Ee,{value:y,onValueChange:w,children:[e.jsxs(Le,{className:"w-full sm:w-auto md:w-[180px]",children:[e.jsx(zr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(Ae,{placeholder:"Filter by Status"})]}),e.jsxs(_e,{children:[e.jsx(ge,{value:"All",children:"All"}),e.jsx(ge,{value:"Active",children:"Active"}),e.jsx(ge,{value:"Inactive",children:"Inactive"})]})]}),e.jsxs(q,{onClick:Be,className:"w-full sm:w-auto",children:[e.jsx(Ct,{size:16,className:"mr-2"})," Add Program"]})]})]})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((E,I)=>e.jsx(Gr,{},I))}):e.jsx(Tr,{children:We.length>0?e.jsx(xt.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:We.map((E,I)=>e.jsx(Jr,{program:E,index:I,onEdit:Ue,onArchive:ye,onRestore:et,onManage:()=>p(E)},E.id))}):e.jsxs(xt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-20 text-muted-foreground",children:[e.jsx(Br,{size:56,className:"mx-auto mb-4"}),e.jsx("h4",{className:"font-semibold text-xl text-foreground",children:"No Programs Found"}),e.jsx("p",{children:"Try adjusting your filters or add a new program."})]})}),e.jsx(Dn,{isOpen:m,onClose:()=>D(!1),onSave:Ye,initialData:S}),se&&e.jsx(Oe,{open:se.open,onOpenChange:E=>!E&&de(null),children:e.jsxs($e,{children:[e.jsxs(Me,{children:[e.jsx(Fe,{children:se.title}),se.description&&e.jsx(it,{children:se.description})]}),e.jsxs(ze,{children:[e.jsx(He,{asChild:!0,children:e.jsx(q,{variant:"outline",disabled:ke,children:"Cancel"})}),e.jsx(q,{onClick:async()=>{if(se?.onConfirm){qe(!0);try{await se.onConfirm()}finally{qe(!1),de(null)}}},disabled:ke,variant:se.confirmVariant,children:ke?"Processing...":se.confirmText||"Confirm"})]})]})}),f&&e.jsx(kn,{isOpen:!!f,onClose:()=>p(null),program:f,onAddSemester:()=>i(!0),onEditSemester:we,onDeleteSemester:()=>{},onAddSubject:tt,onEditSubject:R,onDeleteSubject:rt,onSetSemesterStatus:Ze,refreshKey:U,updatedSubjectData:l,newSemesterData:k,updatedSemesterData:$}),e.jsx(On,{isOpen:j,onClose:()=>i(!1),onSave:Ve,programId:f?f.id:0}),e.jsx(Fn,{isOpen:x,onClose:()=>C(!1),onSaveSuccess:ut,semesterId:re.id,initialData:re.name||""}),F&&e.jsx(zn,{isOpen:g,onClose:()=>L(!1),onSave:(E,I)=>nt(F.semester,F.semesterId,E,I),initialData:F.subject,programId:f?.id??0,semesterName:F.semester||"",semesterId:F.semesterId}),ne&&e.jsx(Wn,{isOpen:!!ne,onClose:()=>be(null),onSaveSuccess:ct,semesterId:ne.semester?.id||null,semesterName:ne.name||"",initialData:ne.semester||null,effectiveYear:ne.effectiveYear})]})}function hs(){return e.jsx("main",{children:e.jsx(Xn,{})})}export{hs as default};
