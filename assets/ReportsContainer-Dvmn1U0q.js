const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-pHAPLznm.js","assets/index-CHiMkSj5.js","assets/index-B_J0DLaH.css"])))=>i.map(i=>d[i]);
import{c as ce,r as p,j as e,R as Ae,a as V,B as G,d as we,A as J,m as K,e as ie,f as Me,b as le,U as ne,F as be,g as $e,_ as ge}from"./index-CHiMkSj5.js";import{T as Z,a as ee,b as R,c as E,d as te,e as _}from"./table-D5eD8Vzn.js";import{S as C,a as F,b as I,c as D,d as A}from"./select-CmUPg-af.js";import{L as U}from"./loader-circle-BJe8JBGr.js";import{F as Ce}from"./funnel-BVypQiVt.js";import{I as Fe}from"./input-VsbSfVzs.js";import{S as Ie}from"./search-_cahZtMO.js";import{C as De}from"./clipboard-list-BghWRiOq.js";import"./Combination-3MxaPacd.js";import"./check-Cl-6-w-J.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],Re=ce("chart-bar",Pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],de=ce("graduation-cap",He);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ve=ce("grid-3x3",ze),je=s=>{try{const[d,m]=s.split(":").map(Number),h=d>=12?"PM":"AM";return`${d%12||12}:${String(m).padStart(2,"0")}${h}`}catch{return s}},Ve=(s,d)=>{try{const[m,h,l]=s.split(":").map(Number),[y,j,S]=d.split(":").map(Number),i=m*60+h+l/60;let c=y*60+j+S/60-i;return c<0&&(c+=1440),parseFloat((c/60).toFixed(2))}catch(m){return console.error("Error calculating duration:",m),0}},Oe=s=>{const d=new Map;s.forEach(l=>{const y=`${l.faculty_id}-${l.subject_id}-${l.type}`;d.set(y,(d.get(y)||0)+1)});const m=new Map;s.forEach(l=>{m.has(l.faculty_id)||m.set(l.faculty_id,[]),m.get(l.faculty_id).push(l)});const h=[];return m.forEach(l=>{const y=l[0].faculty,j=y.id,S=y.user.name,i=l.map(a=>{const o=Ve(a.start_time,a.end_time),n=je(a.start_time),x=je(a.end_time),t=a.subject.des_title;return{subjectCode:a.subject.subject_code,type:a.type,payingHours:o,section:a.section,day:a.day,time:`${n}-${x}`,room:a.room.roomNumber,remarks:t,remarkRowSpan:0,totalUnits:a.subject.total_units,totalHours:a.subject.total_hrs}});i.sort((a,o)=>a.remarks.localeCompare(o.remarks));const v=[];for(let a=0;a<i.length;a++){const o=i[a];if(a===0||i[a].remarks!==i[a-1].remarks){const n=o.remarks;let x=1;for(let t=a+1;t<i.length&&i[t].remarks===n;t++)x++;o.remarkRowSpan=x}v.push(o)}const c=y.t_load_units,w=v.reduce((a,o)=>a+(o.remarkRowSpan>0?1:0),0),r=i.reduce((a,o)=>a+o.payingHours,0),g=i.reduce((a,o)=>a+o.totalUnits,0),b=Math.max(0,r-c),u=r.toFixed(1).toString();h.push({facultyId:j,name:S,loadString:u,calculatedLoad:c,preps:w,overload:b,totalUnitsSum:g,subjects:v})}),h.sort((l,y)=>l.name.localeCompare(y.name)),h};function Ke(){const[s,d]=p.useState("all"),[m,h]=p.useState([]),[l,y]=p.useState(!0),[j,S]=p.useState(!1),[i,v]=p.useState(""),c="get-facultyLoading-reports",w="accessToken";p.useEffect(()=>{(async()=>{y(!0),S(!1),v("");const a=localStorage.getItem(w);if(!a){y(!1),S(!0),v("Authentication token not found in Local Storage. Please log in.");return}try{const n=(await V.get(c,{headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}})).data;if(n.success&&Array.isArray(n.facultyLoading))h(n.facultyLoading);else throw new Error("Invalid data structure or success: false received")}catch(o){console.error("Error fetching data with axios:",o),S(!0),V.isAxiosError(o)&&o.response?v(`API Error: ${o.response.statusText} (${o.response.status}). Is the token valid?`):v("Network error or failed to connect to the API.")}finally{y(!1)}})()},[]);const r=p.useMemo(()=>Oe(m),[m]),g=p.useMemo(()=>s==="all"?r:r.filter(u=>u.facultyId.toString()===s),[s,r]),b=p.useMemo(()=>{const u=new Map;return r.forEach(o=>u.set(o.facultyId,o.name)),Array.from(u.entries()).map(([o,n])=>({id:o,name:n})).sort((o,n)=>o.name.localeCompare(n.name))},[r]);return l?e.jsxs("div",{className:"p-10 text-center flex flex-col items-center justify-center text-primary",children:[e.jsx(U,{className:"h-8 w-8 animate-spin mb-3"}),e.jsx("p",{children:"Loading faculty load reports..."})]}):j?e.jsxs("div",{className:"p-10 text-center text-destructive border border-destructive/50 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Failed to Load Data"}),e.jsx("p",{children:i||"An unknown error occurred while fetching the data."})]}):e.jsxs("div",{className:"bg-card p-4 md:p-6 rounded-lg shadow-sm border border-border",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(C,{value:s,onValueChange:d,children:[e.jsxs(F,{className:"w-full md:w-64",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(I,{placeholder:"Filter by Faculty"})]}),e.jsxs(D,{children:[e.jsx(A,{value:"all",children:"All Faculty"}),b.map(u=>e.jsx(A,{value:u.id.toString(),children:u.name},u.id))]})]})}),e.jsx("div",{className:"rounded-lg border overflow-x-auto",children:e.jsx("div",{children:e.jsxs(Z,{className:"w-full",children:[e.jsx(ee,{className:"bg-card sticky top-0 z-10",children:e.jsxs(R,{children:[e.jsx(E,{className:"w-[100px] border-r",children:"Name of Faculty"}),e.jsx(E,{className:"w-[80px] border-r",children:"Subject Code"}),e.jsx(E,{className:"w-[50px] border-r",children:"Type"}),e.jsx(E,{className:"w-[80px] border-r",children:"Section"}),e.jsx(E,{className:"text-center w-[100px] border-r",children:"Paying Hours"}),e.jsx(E,{className:"w-[80px]",children:"Day"}),e.jsx(E,{className:"w-[150px]",children:"Time"}),e.jsx(E,{className:"w-[80px] border-r",children:"Room"}),e.jsx(E,{className:"min-w-[250px] border-r",children:"Remarks"}),e.jsx(E,{className:"w-[100px] text-right border-r",children:"Total Load Units"}),e.jsx(E,{className:"w-[100px] text-center",children:"Preps"})]})}),e.jsxs(te,{children:[g.map((u,a)=>{const o=u.subjects.length,n=u.overload>0,x=a%2===1?"bg-accent/10":"";return o===0?null:e.jsx(Ae.Fragment,{children:u.subjects.map((t,f)=>{const N=f===o-1,k=f===0,L=t.remarkRowSpan>0,M=t.section&&t.section.trim()!=="";return e.jsxs(R,{className:`${x} ${N?"border-b-4 border-gray-300":"border-b border-border/50"}`,children:[k&&e.jsx(_,{rowSpan:o,className:"font-bold text-base align-top border-r whitespace-nowrap",children:u.name}),e.jsx(_,{className:"text-sm border-r whitespace-nowrap uppercase",children:t.subjectCode}),e.jsx(_,{className:"text-center font-semibold text-xs border-r whitespace-nowrap",children:t.type}),e.jsx(_,{className:"text-sm border-r whitespace-nowrap",children:M?t.section:e.jsxs("span",{className:"inline-flex items-center rounded-md bg-destructive/10 px-2 py-1 text-xs font-medium text-destructive ring-1 ring-inset ring-destructive/20",children:["Unassigned ",e.jsx("br",{}),"Section"]})}),e.jsx(_,{className:"text-center font-medium border-r",children:t.payingHours.toFixed(1)||""}),e.jsx(_,{className:"text-sm",children:t.day}),e.jsx(_,{className:"text-sm",children:t.time}),e.jsx(_,{className:"text-sm border-r",children:t.room}),L&&e.jsx(_,{rowSpan:t.remarkRowSpan,className:"text-sm text-muted-foreground border-r whitespace-normal align-top",children:t.remarks}),k&&e.jsx(_,{rowSpan:o,className:"text-center font-bold text-lg align-top border-r",children:e.jsxs("div",{className:"py-1",children:[e.jsx("span",{className:"text-xl font-bold",children:u.loadString}),n&&e.jsxs("div",{className:"text-destructive font-semibold text-xs mt-1",children:["overload ",u.overload]})]})}),k&&e.jsx(_,{rowSpan:o,className:"text-center align-top",children:u.preps===1?"prep":`${u.preps} preps`})]},`${u.facultyId}-${f}`)})},u.facultyId)}),g.length===0&&e.jsx(R,{children:e.jsx(_,{colSpan:12,className:"h-24 text-center text-muted-foreground",children:"No faculty load data found for the selected filter."})})]})]})})})]})}const Ne=64,re=60,Ue=s=>{const d=Math.floor(s/60),m=s%60,h=d>=12?"PM":"AM",l=d%12||12;return`${String(l)}:${String(m).padStart(2,"0")}${h}`},Ye=(s=7,d=21,m=re)=>{const h=[],l=s*60,y=d*60;for(let j=l;j<y;j+=m)h.push(Ue(j));return h},P=Ye(7,21,re),X=[{value:"all",label:"All Days (Unfiltered)",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},{value:"Monday",label:"Monday Schedule",days:["Monday"]},{value:"Tuesday",label:"Tuesday Schedule",days:["Tuesday"]},{value:"Wednesday",label:"Wednesday Schedule",days:["Wednesday"]},{value:"Thursday",label:"Thursday Schedule",days:["Thursday"]},{value:"Friday",label:"Friday Schedule",days:["Friday"]},{value:"Saturday",label:"Saturday Schedule",days:["Saturday"]}],We=[{value:"all",label:"All Classes"},{value:"LEC",label:"Lecture (LEC)"},{value:"LAB",label:"Laboratory (LAB)"}],Q=s=>{try{const[d,m]=s.split(":").map(Number),h=d>=12?"PM":"AM";return`${d%12||12}:${String(m).padStart(2,"0")}${h}`}catch{return s}},O=s=>{const[d,m]=s.split(":").map(Number);return d*60+m},Se=s=>{const d=s.match(/(\d{1,2}):(\d{2})(am|pm)/i);if(!d)return"";let m=parseInt(d[1],10);const h=d[2],l=d[3].toLowerCase();return l==="pm"&&m!==12&&(m+=12),l==="am"&&m===12&&(m=0),`${String(m).padStart(2,"0")}:${h}`},qe=s=>{const d={},m=new Set;return s.forEach(h=>{const l=h.faculty_loading,y=l.room.roomNumber,j=l.subject.subject_code,S=l.faculty.user.name,i=h.section,v=l.type,c=`${Q(l.start_time)}-${Q(l.end_time)}`,w=l.start_time.substring(0,5),r=l.end_time.substring(0,5),g=O(w),u=O(r)-g,a=Math.ceil(u/re);if(a<=0)return;const o=a*Ne;for(let n=0;n<P.length;n++){const x=P[n],t=Se(x);if(!t)continue;const f=O(t);if(g===f){const N=`${y}_${x}`,k=e.jsxs("div",{style:{height:`${o}px`,marginTop:"0px"},className:"absolute w-full top-0 left-0 text-center flex flex-col justify-center p-1.5 bg-green-100/80 border-2 border-green-300 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer z-10",children:[e.jsxs("span",{className:"font-extrabold uppercase text-sm text-green-800 leading-tight block",children:[j," ",i]}),e.jsx("span",{className:"text-xs font-medium text-gray-700 mt-1 block",children:S}),e.jsxs("span",{className:"text-xs text-green-700/80 mt-0.5 block",children:[l.day," | ",c," | ",l.room.roomNumber," | ",v]})]});d[N]={content:k,rowSpan:a};for(let L=1;L<a;L++)n+L<P.length&&m.add(`${y}_${P[n+L]}`);break}}}),{gridData:d,coveredKeys:m}},Be=s=>{const d={},m=new Set;return s.forEach(h=>{const l=h.faculty_loading,y=`${h.year_level}-${h.section}`,j=l.subject.subject_code,S=l.faculty.user.name,i=l.room.roomNumber,v=l.type,c=`${Q(l.start_time)}-${Q(l.end_time)}`,w=l.start_time.substring(0,5),r=l.end_time.substring(0,5),g=O(w),u=O(r)-g,a=Math.ceil(u/re);if(a<=0)return;const o=a*Ne;for(let n=0;n<P.length;n++){const x=P[n],t=Se(x);if(!t)continue;const f=O(t);if(g===f){const N=`${y}_${x}`,k=e.jsxs("div",{style:{height:`${o}px`,marginTop:"0px"},className:"absolute w-full top-0 left-0 text-center flex flex-col justify-center p-1.5 bg-blue-100/80 border-2 border-blue-300 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer z-10",children:[e.jsxs("span",{className:"font-extrabold uppercase text-sm text-blue-800 leading-tight block",children:[j," (",v,")"]}),e.jsx("span",{className:"text-xs font-medium text-gray-700 mt-1 block",children:S}),e.jsxs("span",{className:"text-xs text-blue-700/80 mt-0.5 block",children:[l.day," | ",c," | ",i]})]});d[N]={content:k,rowSpan:a};for(let L=1;L<a;L++)n+L<P.length&&m.add(`${y}_${P[n+L]}`);break}}}),{gridData:d,coveredKeys:m}};function Ge({rooms:s,filteredScheduleData:d,selectedDayFilter:m,setSelectedDayFilter:h,selectedClassType:l,setSelectedClassType:y,roomSearchQuery:j,setRoomSearchQuery:S}){return e.jsx(J,{mode:"wait",children:e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-card p-4 md:p-6 rounded-xl shadow-2xl border-2 border-border overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 border-b pb-4 gap-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-700 flex items-center",children:[e.jsx(we,{className:"h-5 w-5 mr-2 text-primary"})," Room Schedule Filters"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[e.jsxs(C,{value:m,onValueChange:h,children:[e.jsxs(F,{className:"w-full sm:w-[180px] border-primary/50 shadow-sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Select Day"})]}),e.jsx(D,{children:X.map(i=>e.jsx(A,{value:i.value,children:i.label},i.value))})]}),e.jsxs(C,{value:l,onValueChange:i=>y(i),children:[e.jsxs(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Class Type"})]}),e.jsx(D,{children:We.map(i=>e.jsx(A,{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{className:"relative w-full sm:w-[200px]",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Fe,{placeholder:"Search Room...",value:j,onChange:i=>S(i.target.value),className:"pl-10 border-primary/50 shadow-sm"})]})]})]}),e.jsx("div",{children:e.jsxs(Z,{className:"w-full table-fixed border-collapse border-primary/20",children:[e.jsx(ee,{className:"bg-primary sticky top-0 z-50 shadow-lg",children:e.jsxs(R,{children:[e.jsx(E,{className:"w-[150px] border-r border-b border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Time Slot"}),s.map(i=>e.jsx(E,{className:"w-[150px] border-r border-b border-primary-foreground/30 text-center font-extrabold whitespace-nowrap text-primary-foreground text-sm uppercase",children:i},i))]})}),e.jsx(te,{children:P.map(i=>e.jsxs(R,{className:"h-16 border-b border-gray-200 hover:bg-muted/50 transition-colors duration-200",children:[e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-middle p-2 font-bold text-xs whitespace-pre-line bg-muted/40 text-gray-700 sticky left-0 z-5",children:i}),s.map(v=>{const c=`${v}_${i}`,w=d.gridData[c];return d.coveredKeys.has(c)&&!w?e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm border-dashed border-gray-300 bg-background/50 relative"},c):w?e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm relative",children:w.content},c):e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm border-dashed border-gray-300 bg-background/50 relative"},c)})]},i))})]})})]},"room-schedule-content")})}function Xe({backendData:s}){const[d,m]=p.useState("all"),[h,l]=p.useState("all"),[y,j]=p.useState("all"),S=p.useMemo(()=>{const r=new Set;return s.forEach(g=>g.year_level&&r.add(g.year_level)),["all",...Array.from(r).sort()]},[s]),i=p.useMemo(()=>{const r=new Set;return s.forEach(g=>g.program?.abbreviation&&r.add(g.program.abbreviation)),["all",...Array.from(r).sort()]},[s]),v=p.useMemo(()=>{const r=X.find(b=>b.value===d),g=r?r.days:[];return s.filter(b=>{const u=g.includes(b.faculty_loading.day),a=h==="all"||String(b.year_level)===h,o=y==="all"||b.program?.abbreviation===y;return u&&a&&o})},[d,s,h,y]),c=p.useMemo(()=>{const r=new Set;return v.forEach(g=>{g.year_level&&g.section&&r.add(`${g.year_level}-${g.section}`)}),Array.from(r).sort((g,b)=>g.localeCompare(b))},[v]),w=p.useMemo(()=>Be(v),[v]);return e.jsx(J,{mode:"wait",children:e.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-card p-4 md:p-6 rounded-xl shadow-2xl border-2 border-border overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 border-b pb-4 gap-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-700 flex items-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2 text-primary"})," Year Level Schedule Filters"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[e.jsxs(C,{value:d,onValueChange:m,children:[e.jsxs(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Select Day"})]}),e.jsx(D,{children:X.map(r=>e.jsx(A,{value:r.value,children:r.label},r.value))})]}),e.jsxs(C,{value:h,onValueChange:l,children:[e.jsx(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:e.jsx(I,{placeholder:"Year Level"})}),e.jsxs(D,{children:[e.jsx(A,{value:"all",children:"All Year Levels"}),S.filter(r=>r!=="all").map(r=>e.jsxs(A,{value:String(r),children:["Year ",r]},r))]})]}),e.jsxs(C,{value:y,onValueChange:j,children:[e.jsx(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:e.jsx(I,{placeholder:"Program"})}),e.jsx(D,{children:i.map(r=>e.jsx(A,{value:r,children:r==="all"?"All Programs":r},r))})]})]})]}),e.jsxs("div",{children:[e.jsxs(Z,{className:"w-full table-fixed border-collapse border-primary/20",children:[e.jsx(ee,{className:"bg-primary sticky top-0 z-50 shadow-lg",children:e.jsxs(R,{children:[e.jsx(E,{className:"w-[150px] border-r border-b border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Time Slot"}),c.map(r=>e.jsx(E,{className:"w-[150px] border-r border-b border-primary-foreground/30 text-center font-extrabold whitespace-nowrap text-primary-foreground text-sm uppercase",children:r.replace("-"," - Section ")},r))]})}),e.jsx(te,{children:P.map(r=>e.jsxs(R,{className:"h-16 border-b border-gray-200 hover:bg-muted/50 transition-colors duration-200",children:[e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-middle p-2 font-bold text-xs whitespace-pre-line bg-muted/40 text-gray-700 sticky left-0 z-5",children:r}),c.map(g=>{const b=`${g}_${r}`,u=w.gridData[b];return w.coveredKeys.has(b)&&!u?e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm border-dashed border-gray-300 bg-background/50 relative"},b):u?e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm relative",children:u.content},b):e.jsx(_,{className:"w-[150px] border-r border-r-gray-300 align-top p-0 text-center text-sm border-dashed border-gray-300 bg-background/50 relative"},b)})]},r))})]}),c.length===0&&e.jsx("div",{className:"p-8 text-center text-muted-foreground bg-muted/50 rounded-lg mt-4",children:"No schedule data found for the selected filters."})]})]},"yearlevel-schedule-content")})}const Qe="get-classSchedule-reports",Je="accessToken";function Ze(){const[s,d]=p.useState("room"),[m,h]=p.useState([]),[l,y]=p.useState(!0),[j,S]=p.useState(!1),[i,v]=p.useState("all"),[c,w]=p.useState("all"),[r,g]=p.useState("");p.useEffect(()=>{(async()=>{y(!0),S(!1);const n=localStorage.getItem(Je);if(!n){y(!1);return}try{const x=await V.get(Qe,{headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});if(x.data.success&&Array.isArray(x.data.classSchedule))h(x.data.classSchedule);else throw new Error("Invalid data structure")}catch(x){console.error("Error fetching class schedule:",x),S(!0)}finally{y(!1)}})()},[]);const b=p.useMemo(()=>{const o=X.find(x=>x.value===i),n=o?o.days:[];return m.filter(x=>{const t=n.includes(x.faculty_loading.day),f=c==="all"||x.faculty_loading.type===c;return t&&f})},[i,m,c]),u=p.useMemo(()=>{const o=new Set;return b.forEach(n=>{const x=n?.faculty_loading?.room?.roomNumber;x&&x.toString().trim()!==""&&o.add(x.toString())}),Array.from(o).filter(n=>n.toLowerCase().includes(r.toLowerCase())).sort((n,x)=>n.localeCompare(x))},[b,r]),a=p.useMemo(()=>{const o=b.filter(n=>u.includes(n.faculty_loading.room.roomNumber));return qe(o)},[b,u]);return l?e.jsxs("div",{className:"p-10 text-center flex flex-col items-center justify-center text-primary",children:[e.jsx(U,{className:"h-8 w-8 animate-spin mb-3"}),e.jsx("p",{children:"Loading class schedules..."})]}):j?e.jsx("div",{className:"p-10 text-center text-destructive border border-destructive/50 rounded-lg",children:"Error loading class schedule data."}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"border-b border-border mb-6",children:e.jsxs("div",{className:"inline-flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsxs(G,{variant:s==="room"?"default":"ghost",onClick:()=>d("room"),className:"flex items-center gap-2 px-4 py-2 h-9 text-sm font-semibold transition-all",children:[e.jsx(we,{size:16})," Room Schedule View"]}),e.jsxs(G,{variant:s==="yearLevel"?"default":"ghost",onClick:()=>d("yearLevel"),className:"flex items-center gap-2 px-4 py-2 h-9 text-sm font-semibold transition-all",children:[e.jsx(de,{size:16})," Year Level View"]})]})}),s==="room"&&e.jsx(Ge,{rooms:u,filteredScheduleData:a,selectedDayFilter:i,setSelectedDayFilter:v,selectedClassType:c,setSelectedClassType:w,roomSearchQuery:r,setRoomSearchQuery:g}),s==="yearLevel"&&e.jsx(Xe,{backendData:m})]})}function et(){const[s,d]=p.useState([]),[m,h]=p.useState(!0),[l,y]=p.useState(null),j=21,S=3,i=j+S;return p.useEffect(()=>{(async()=>{try{h(!0),y(null);const c=localStorage.getItem("accessToken");if(!c){y("Authentication token not found. Please log in."),h(!1);return}const w={headers:{Authorization:`Bearer ${c}`}},r=await V.get("get-faculty-loading",w);if(!r.data||!r.data.success||!Array.isArray(r.data.data)){y("Invalid response from server when fetching faculty loading."),h(!1);return}const g=r.data.data,b=new Map;g.forEach(a=>{const o=a.faculty?.id??a.faculty_id,n=a.faculty?.user?.name??`Faculty ${o}`,x=a.subject_id,t=a.subject.total_units??0,f=a.faculty&&typeof a.faculty.t_load_units=="number"?a.faculty.t_load_units:j,N=a.faculty&&typeof a.faculty.overload_units=="number"?a.faculty.overload_units:S;b.has(o)||b.set(o,{name:n,distinctSubjects:new Map,limit:f,overloadUnits:N});const k=b.get(o);x!==void 0&&t>0&&k.distinctSubjects.set(x,t)});const u=Array.from(b.entries()).map(([a,o])=>{const n=Array.from(o.distinctSubjects.values()).reduce((x,t)=>x+t,0);return{facultyId:a,name:o.name,t_load_units:n,limit:o.limit,overloadUnits:o.overloadUnits}});u.sort((a,o)=>a.name.localeCompare(o.name)),d(u)}catch(c){const w=V.isAxiosError(c)&&c.response?.data?.message?c.response.data.message:"Could not connect to the server or fetch data.";console.error("Error fetching faculty workload data:",c),y(w)}finally{h(!1)}})()},[]),m?e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Faculty Workload Management"}),e.jsxs("div",{className:"bg-card p-6 rounded-lg shadow-sm border text-center text-muted-foreground flex flex-col items-center justify-center",children:[e.jsx(U,{className:"h-8 w-8 animate-spin mb-3 text-primary"}),e.jsx("p",{children:"Loading Faculty Workloads..."})]})]}):l?e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-destructive",children:"Data Error"}),e.jsx("div",{className:"bg-card p-6 rounded-lg shadow-sm border border-destructive text-center text-destructive",children:e.jsxs("p",{children:["Error: ",l]})})]}):s.length===0?e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Faculty Workload Management"}),e.jsx("div",{className:"bg-card p-6 rounded-lg shadow-sm border text-center text-muted-foreground",children:e.jsx("p",{children:"No active faculty found to display workload data."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"pb-2",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx(Re,{className:"h-6 w-6 text-primary"}),"Faculty Workload Management"]}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-1 ml-9",children:["Overview of current unit loads vs. a standard teaching load of ",e.jsxs("span",{className:"font-semibold",children:[j," units"]})," with an allowed overload of ",e.jsxs("span",{className:"font-semibold",children:[S," units"]})," (Total: ",i," units)."]})]}),e.jsx("div",{className:"bg-card p-4 md:p-6 rounded-lg shadow-sm border border-border",children:e.jsx("div",{className:"space-y-6",children:s.map(v=>{const c=v.t_load_units,w=v.limit||j,r=v.overloadUnits??S,g=w+r;let b="text-primary",u="";c>g?(b="text-red-600",u=`(EXCESSIVE OVERLOAD +${(c-g).toFixed(1)})`):c>w?(b="text-yellow-500",u=`(OVERLOAD +${(c-w).toFixed(1)} of ${r})`):c===w?(b="text-primary",u="(FULL LOAD)"):(b="text-muted-foreground",u=`${w-c}`);const a=Number.isInteger(c)?c:c.toFixed(1);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold text-foreground",children:v.name})]}),e.jsxs("span",{className:`font-mono font-bold ${b}`,children:[u,"/",w,a&&e.jsx("span",{className:`ml-1 text-sm ${b}`,children:`(${a} units left)`})]})]}),e.jsx("div",{className:"w-full h-3 rounded overflow-hidden bg-border",children:(()=>{const o=w,n=g,x=Math.max(c,n,1),t=Math.max(0,Math.min(c,o)),f=Math.max(0,Math.min(c,n)-o),N=Math.max(0,c-n),k=t/x*100,L=f/x*100,M=N/x*100;return e.jsxs("div",{className:"flex h-3 w-full",children:[e.jsx("div",{style:{width:`${k}%`},className:"bg-primary"}),e.jsx("div",{style:{width:`${L}%`},className:"bg-yellow-500"}),e.jsx("div",{style:{width:`${M}%`},className:"bg-red-600"})]})})()})]},v.name)})})})]})}const tt=(s,d)=>{try{const m=h=>{const[l,y]=h.split(":").map(Number),j=l>=12?"pm":"am";return`${l%12||12}:${String(y).padStart(2,"0")}${j}`};return`${m(s.substring(0,5))}-${m(d.substring(0,5))}`}catch{return`${s}-${d}`}},rt="get-classSchedule-reports",st="accessToken",at=()=>{const[s,d]=p.useState([]),[m,h]=p.useState(!0),[l,y]=p.useState(!1),[j,S]=p.useState("all"),[i,v]=p.useState("all"),[c,w]=p.useState("all"),[r,g]=p.useState("all");p.useEffect(()=>{(async()=>{h(!0),y(!1);const f=localStorage.getItem(st);if(!f){h(!1),y(!0);return}try{const N=await V.get(rt,{headers:{Authorization:`Bearer ${f}`,Accept:"application/json"}});if(N.data.success&&Array.isArray(N.data.classSchedule))d(N.data.classSchedule);else throw new Error("Invalid data structure or API response")}catch(N){console.error("Error fetching study load:",N),y(!0)}finally{h(!1)}})()},[]);const b=p.useMemo(()=>{const t=new Set;return s.forEach(f=>f.program?.abbreviation&&t.add(f.program.abbreviation)),["all",...Array.from(t).sort()]},[s]),u=p.useMemo(()=>{const t=new Set;return s.forEach(f=>f.year_level&&t.add(f.year_level)),["all",...Array.from(t).sort((f,N)=>f-N)]},[s]),a=p.useMemo(()=>{const t=new Set;return s.filter(f=>(j==="all"||f.program?.abbreviation===j)&&(i==="all"||String(f.year_level)===i)).forEach(f=>f.section&&t.add(f.section)),["all",...Array.from(t).sort()]},[s,j,i]),o=p.useMemo(()=>{const t=new Set;return s.forEach(f=>{const N=f.faculty_loading?.faculty?.user?.name;N&&t.add(N)}),["all",...Array.from(t).sort()]},[s]),n=p.useMemo(()=>s.filter(t=>{const f=j==="all"||t.program?.abbreviation===j,N=i==="all"||String(t.year_level)===i,k=c==="all"||t.section===c,L=t.faculty_loading?.faculty?.user?.name||"";return f&&N&&k&&(r==="all"||L===r)}).map(t=>({course:`${t.faculty_loading.subject.subject_code} ${t.year_level}`.trim(),section:t.section,type:t.faculty_loading.type,day:t.faculty_loading.day,time:tt(t.faculty_loading.start_time,t.faculty_loading.end_time),room:t.faculty_loading.room?.roomNumber||"N/A",teacher:t.faculty_loading.faculty.user.name})),[s,j,i,c,r]),x=p.useMemo(()=>{const t=j!=="all"?j:"",f=i!=="all"?`${i} Year`:"",N=c!=="all"?c:"",k=r!=="all"?r:"",L=[f,N,t].filter(se=>se);let M=L.join(" ");return L.length===0&&(M="Entire Study Load"),r!=="all"&&M!=="Entire Study Load"?M+=` (Assigned to: ${k})`:r!=="all"&&(M=`Assigned to: ${k}`),M},[j,i,c,r]);return m?e.jsxs("div",{className:"p-10 text-center flex flex-col items-center justify-center text-primary bg-card rounded-xl shadow-lg border border-border min-h-[300px]",children:[e.jsx(U,{className:"h-8 w-8 animate-spin mb-3"}),e.jsx("p",{children:"Loading student study load data..."})]}):l?e.jsx("div",{className:"p-10 text-center text-destructive border border-destructive/50 rounded-lg bg-card shadow-lg min-h-[300px]",children:"Error loading student study load data. Please check the API and your connection."}):e.jsx(J,{mode:"wait",children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"bg-card p-4 md:p-6 rounded-xl shadow-2xl border-2 border-border overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 border-b pb-4 gap-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-700 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 mr-2 text-primary"})," Student Study Load Filters"]}),e.jsxs("div",{className:"flex flex-wrap gap-4 w-full md:w-auto",children:[e.jsxs(C,{value:j,onValueChange:S,children:[e.jsxs(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:[e.jsx(de,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Program"})]}),e.jsx(D,{children:b.map(t=>e.jsx(A,{value:t,children:t==="all"?"All Programs":t},t))})]}),e.jsxs(C,{value:i,onValueChange:v,children:[e.jsxs(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Year Level"})]}),e.jsxs(D,{children:[e.jsx(A,{value:"all",children:"All Year Levels"}),u.filter(t=>t!=="all").map(t=>e.jsxs(A,{value:String(t),children:["Year ",t]},t))]})]}),e.jsxs(C,{value:c,onValueChange:w,children:[e.jsxs(F,{className:"w-full sm:w-[150px] border-primary/50 shadow-sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Section"})]}),e.jsx(D,{children:a.map(t=>e.jsx(A,{value:t,children:t==="all"?"All Sections":t},t))})]}),e.jsxs(C,{value:r,onValueChange:g,children:[e.jsxs(F,{className:"w-full sm:w-[180px] border-primary/50 shadow-sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx(I,{placeholder:"Faculty"})]}),e.jsxs(D,{children:[e.jsx(A,{value:"all",children:"All Faculty"}),o.filter(t=>t!=="all").map(t=>e.jsx(A,{value:t,children:t},t))]})]})]})]}),e.jsxs("div",{className:"border border-border rounded-lg shadow-inner overflow-hidden",children:[e.jsx("div",{className:"p-3",children:e.jsx("h4",{className:"text-sm font-bold uppercase tracking-wider",children:x})}),e.jsxs(Z,{className:"w-full border-collapse",children:[e.jsx(ee,{className:"bg-primary sticky top-0 z-10",children:e.jsxs(R,{className:"border-b-0",children:[e.jsxs(E,{className:"w-[18%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:[" ","Subject / Course"]}),e.jsx(E,{className:"w-[8%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Section"}),e.jsxs(E,{className:"w-[8%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:[" ","Type"]}),e.jsx(E,{className:"w-[10%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Day"}),e.jsx(E,{className:"w-[15%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Time"}),e.jsx(E,{className:"w-[10%] border-r border-primary-foreground/30 text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Room"}),e.jsx(E,{className:"w-[20%] text-center font-extrabold text-primary-foreground text-sm uppercase",children:"Teacher"})]})}),e.jsx(te,{children:n.length>0?n.map((t,f)=>e.jsxs(R,{className:"border-b border-gray-200 hover:bg-muted/50 transition-colors",children:[e.jsx(_,{className:"border-r border-gray-300 align-middle p-2 text-sm font-medium text-gray-800",children:t.course}),e.jsx(_,{className:"border-r border-gray-300 align-middle p-2 text-center text-sm font-semibold text-gray-700",children:t.section}),e.jsxs(_,{className:"border-r border-gray-300 align-middle p-2 text-center text-sm font-semibold text-gray-700 uppercase",children:[" ",t.type==="LEC"?"Lecture":t.type==="LAB"?"Laboratory":t.type]}),e.jsx(_,{className:"border-r border-gray-300 align-middle p-2 text-center text-sm font-semibold text-gray-700",children:t.day}),e.jsx(_,{className:"border-r border-gray-300 align-middle p-2 text-center text-sm text-gray-700 whitespace-nowrap",children:t.time}),e.jsx(_,{className:"border-r border-gray-300 align-middle p-2 text-center text-sm text-gray-700",children:t.room}),e.jsx(_,{className:"align-middle p-2 text-sm text-gray-700",children:t.teacher})]},f)):e.jsx(R,{children:e.jsxs(_,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:[" ","No study load data found for the selected filters."]})})})]})]})]},"studyload-content")})};function ot(){const[s,d]=p.useState("loading"),[m,h]=p.useState({totalFaculty:0,assignedSubjects:0,totalUnitsLoaded:0}),[l,y]=p.useState(!0),[j,S]=p.useState(null);p.useEffect(()=>{(async()=>{try{y(!0),S(null);const r=localStorage.getItem("accessToken");if(!r){S("Authentication token not found. Please log in."),y(!1);return}const g={headers:{Authorization:`Bearer ${r}`}},b=await V.get("reports/kpis",g);b.data.success?h(b.data.data):S("Failed to load KPI data from the server.")}catch(r){console.error("Error fetching KPI data:",r),S("Could not connect to the API or fetch KPI data.")}finally{y(!1)}})()},[]);const i=[{label:"Total Faculty",value:m.totalFaculty,icon:ne},{label:"Assigned Subjects",value:m.assignedSubjects,icon:le},{label:"Total Units Loaded",value:m.totalUnitsLoaded,icon:De}],v=()=>l?e.jsxs("div",{className:"flex justify-center items-center h-20 border rounded-xl bg-card",children:[e.jsx(U,{className:"h-6 w-6 animate-spin text-primary mr-2"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading Metrics..."})]}):j?e.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 p-4 rounded-xl",children:[e.jsx("p",{className:"font-semibold",children:"KPI Load Error"}),e.jsx("p",{className:"text-sm",children:j})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((w,r)=>e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"bg-card p-5 rounded-xl border shadow-sm flex items-center gap-5 border-border",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10 text-primary",children:e.jsx(w.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:w.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:w.label})]})]},w.label))}),c=()=>{(async()=>{const w=`
        <div style="width:100%; padding:12px 16px; margin-bottom:8px; box-sizing:border-box; background:#f3f4f6; border:1px solid #e5e7eb; border-radius:6px;">
          <h2 style="margin:0; font-size:18px; color:#111827; font-weight:700;">${s.charAt(0).toUpperCase()+s.slice(1)} Report</h2>
          <div style="font-size:12px; color:#374151; margin-top:4px;">Generated: ${new Date().toLocaleString()}</div>
        </div>
      `;try{const r=await ge(()=>import("./html2canvas.esm-BfxBtG_O.js"),[]),g=r.default||r,{jsPDF:b}=await ge(async()=>{const{jsPDF:H}=await import("./jspdf.es.min-pHAPLznm.js").then(W=>W.j);return{jsPDF:H}},__vite__mapDeps([0,1,2])),u=document.getElementById("report-content");let a=null;if(u){const H=Array.from(u.querySelectorAll("table"));a=H.find(W=>{const z=W.getClientRects();return z&&z.length>0&&Array.from(z).some(ae=>ae.width>0&&ae.height>0)})||(H.length?H[0]:null)}const o=a||u||document.body,n=s==="schedules"&&!!a,x=document.createElement("div");x.style.background="#ffffff",x.style.boxSizing="border-box",x.style.padding="6px",n&&(x.style.fontSize="12px");const t=document.createElement("div");t.innerHTML=w,x.appendChild(t);const f=o.cloneNode(!0);if(n)try{f.querySelectorAll("th, td").forEach(T=>{T.style.fontSize="12px",T.style.padding="8px 6px"}),f.querySelectorAll("table").forEach(T=>{T.style.fontSize="12px",T.style.borderSpacing="0"});const z=96;f.querySelectorAll("tr").forEach(T=>{T.style.height="auto",T.style.minHeight="auto"}),f.querySelectorAll("td").forEach(T=>{T.style.height="auto",T.style.position="static",T.style.verticalAlign="top";const $=T.querySelector("div");if($&&($.style.position==="absolute"||$.className.includes("absolute"))){$.style.position="static",$.style.top="auto",$.style.left="auto",$.style.width="100%",$.style.boxSizing="border-box",T.style.padding="0";const fe=$.style.height.match(/(\d+)px/);if(fe){const Te=parseInt(fe[1],10),ye=Math.round(Te/64);ye>0&&($.style.height=`${ye*z}px`)}const oe=$.querySelector("span:first-child");oe&&(oe.style.fontSize="16px",oe.style.fontWeight="700");const q=$.querySelectorAll("span");q.length>1&&(q[1].style.fontSize="14px"),q.length>2&&(q[2].style.fontSize="13px")}else T.classList.contains("bg-muted/40")||(T.style.minHeight=`${z}px`,T.style.height=`${z}px`,T.style.padding="4px")})}catch{}x.appendChild(f),x.style.position="fixed",x.style.left="-9999px",document.body.appendChild(x);const N=await g(x,{scale:n?3:2.5,useCORS:!0}),k=N.toDataURL("image/png");document.body.removeChild(x);const L=new b({orientation:n?"landscape":"portrait",unit:"pt",format:"a4"}),M=L.internal.pageSize.getWidth(),se=L.internal.pageSize.getHeight(),Y=(H=>H*2.83464567)(n?6:10),me=M-Y*2,_e=se-Y*2,ue=N.width,xe=N.height,pe=Math.min(me/ue,_e/xe),he=ue*pe,Le=xe*pe,Ee=Y+(me-he)/2,ke=Y;L.addImage(k,"PNG",Ee,ke,he,Le),L.save(`${s}-report.pdf`);return}catch(r){console.warn("html2canvas/jsPDF not available, falling back to print window. Error:",r);const g=document.getElementById("report-content");if(!g){window.print();return}const b=Array.from(g.querySelectorAll("table")),u=b.find(f=>{const N=f.getClientRects();return N&&N.length>0&&Array.from(N).some(k=>k.width>0&&k.height>0)})||(b.length?b[0]:null),a=s==="schedules"&&!!u,o=w+(u?u.outerHTML:g.innerHTML),n=window.open("","_blank");if(!n){alert("Unable to open print window (popup blocked).");return}const x=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(f=>f.outerHTML).join(`
`),t=a?"<style>@page { size: A4 landscape; margin: 6mm; } @media print { body { -webkit-print-color-adjust: exact; padding: 6mm; box-sizing: border-box; font-size:12px; } table { width: 100%; border-collapse: collapse; } table th, table td { padding: 8px 6px; font-size:12px; } thead { display: table-header-group; } tbody { display: table-row-group; } tr { page-break-inside: avoid; } }</style>":"<style>@page { size: A4 portrait; margin: 10mm; } @media print { body { -webkit-print-color-adjust: exact; padding: 10mm; box-sizing: border-box; } table { width: 100%; border-collapse: collapse; } thead { display: table-header-group; } tbody { display: table-row-group; } tr { page-break-inside: avoid; } }</style>";n.document.write(`<html><head><title>Report</title>${t}${x}</head><body>${o}</body></html>`),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close()},600)}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8 flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Generate Reports"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"View and export faculty loading, schedules, and workloads."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(G,{variant:"outline",onClick:()=>c(),children:[e.jsx(be,{className:"h-4 w-4 mr-2"})," Export PDF"]})})]}),e.jsx("div",{className:"mb-8",children:v()}),e.jsx("div",{className:"border-b border-border mb-6",children:e.jsxs("div",{className:"inline-flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsx(B,{id:"loading",activeTab:s,setActiveTab:d,icon:e.jsx(be,{size:16}),children:"Loading"}),e.jsx(B,{id:"schedules",activeTab:s,setActiveTab:d,icon:e.jsx(ie,{size:16}),children:"Schedules"}),e.jsx(B,{id:"workloads",activeTab:s,setActiveTab:d,icon:e.jsx($e,{size:16}),children:"Workloads"}),e.jsx(B,{id:"studyload",activeTab:s,setActiveTab:d,icon:e.jsx(le,{size:16}),children:"Study Load"})]})}),e.jsx(J,{mode:"wait",children:e.jsx(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e.jsxs("div",{id:"report-content",children:[s==="loading"&&e.jsx(Ke,{}),s==="schedules"&&e.jsx(Ze,{}),s==="workloads"&&e.jsx(et,{}),s==="studyload"&&e.jsx(at,{})]})},s)})]})}const B=({id:s,activeTab:d,setActiveTab:m,icon:h,children:l})=>e.jsxs(G,{variant:d===s?"default":"ghost",onClick:()=>m(s),className:"flex items-center gap-2 px-4 py-2 h-9 text-sm font-semibold transition-all",children:[h," ",l]});function jt(){return e.jsx(ot,{})}export{jt as default};
