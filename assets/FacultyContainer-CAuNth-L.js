import{c as se,j as e,B as A,r as n,X as pe,t as u,a as z}from"./index-DBxbh4tE.js";import{b as ae,e as v,T as fe,a as je,c as R,d as ve}from"./table-BUjDjEfr.js";import{I as E}from"./input-A54FnCP7.js";import{S as K,a as Q,b as Z,c as ee,d as G}from"./select-CsQbnOo9.js";import{B as ne}from"./badge-CMSqSca1.js";import{P as be,T as me}from"./trash-2-P2J43KiY.js";import{D as le,a as ie,b as ue,c as he,e as xe,f as ye,d as Ne}from"./dialog-C9OOqpi1.js";import{L as B}from"./label-BmGDCaT8.js";import{C as we}from"./circle-alert-C2aDYo03.js";import{S as D,L as Se}from"./skeleton-C4B7ELaM.js";import{S as oe}from"./sweetalert2.esm.all-ePrzfkxH.js";import{C as _e}from"./circle-plus-CapE4FWB.js";import{S as Ce}from"./search-1uZW6S2V.js";import{F as Ae}from"./funnel-CPBwXRWc.js";import{C as Fe}from"./calendar-days-DxZGcrm7.js";import{S as ke}from"./square-pen-DqRnEgbf.js";import"./Combination-tCUfHlMr.js";import"./check-CmwgM6n-.js";import"./chevron-up-BdqojM7w.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$e=se("briefcase",Te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ie=se("chevron-left",De);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Pe=se("chevron-right",Le);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Be=se("rotate-ccw",Me);function Ee({onAdd:x}){return e.jsxs(A,{onClick:x,className:"w-full sm:w-auto",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Add Faculty"]})}const ce=[{bg:"bg-blue-100",text:"text-blue-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-amber-100",text:"text-amber-800"},{bg:"bg-rose-100",text:"text-rose-800"},{bg:"bg-indigo-100",text:"text-indigo-800"},{bg:"bg-cyan-100",text:"text-cyan-800"},{bg:"bg-pink-100",text:"text-pink-800"}],ze=x=>{let d=0;for(let f=0;f<x.length;f++)d=(d<<5)-d+x.charCodeAt(f),d|=0;return Math.abs(d)};function qe({isOpen:x,onClose:d,onSave:f,initialData:g,expertiseOptions:N}){const[h,j]=n.useState({name:"",email:"",designation:"",department:"",expertise:[],status:"Active",avatar:"",deload_units:0,teaching_load_units:0,overload_units:0}),[F,y]=n.useState(null),[q,S]=n.useState(!1),[W,k]=n.useState(N),[J,l]=n.useState([]),[i,c]=n.useState(!1),[I,$]=n.useState(!1);n.useEffect(()=>{x&&(async()=>{c(!0);const r=localStorage.getItem("accessToken");if(!r){u.error("Authentication required."),c(!1);return}try{const s=await z.get("/department-program",{headers:{Authorization:`Bearer ${r}`}}),P=Array.isArray(s.data.programs)?s.data.programs:Object.values(s.data.programs||{}),_=[...new Set(P.map(M=>M.program_name))];l(_.sort())}catch{u.error("Failed to fetch departments.")}finally{c(!1)}})()},[x]),n.useEffect(()=>{if(g)j(g),y(g.avatar||null),k(N.filter(a=>!g.expertise.includes(a)));else{const a=`https://avatar.iran.liara.run/public/${Math.floor(Math.random()*100)}`;j({name:"",designation:"",expertise:[],department:"",email:"",status:"Active",avatar:a,deload_units:0,teaching_load_units:0,overload_units:0}),y(a),k(N)}},[g,x,N]);const L=a=>{const{name:r,value:s}=a.target;let P=s;if(["deload_units","teaching_load_units","overload_units"].includes(r)){let _=Number(s);r==="teaching_load_units"&&_>24&&(u.warning("Teaching load cannot exceed 24 units."),_=24),P=_<0?0:s===""?"":_}j(_=>({..._,[r]:P}))},O=(a,r)=>{j(s=>({...s,[a]:r}))},Y=a=>{const r=a.target.files?.[0];r&&y(URL.createObjectURL(r))},U=a=>{a&&!h.expertise.includes(a)&&(j(r=>({...r,expertise:[...r.expertise,a].sort()})),k(r=>r.filter(s=>s!==a)))},te=a=>{j(r=>({...r,expertise:r.expertise.filter(s=>s!==a)})),W.includes(a)||k(r=>[...r,a].sort())},re=async a=>{a.preventDefault(),$(!0);let r;switch(h.designation){case"Dean":r=0;break;case"Program Head":r=1;break;case"Faculty":r=2;break;default:u.error("Invalid designation."),$(!1);return}const s=new FormData;s.append("name",h.name),s.append("email",h.email),s.append("role",String(r)),s.append("designation",h.designation),s.append("department",h.department),s.append("deload_units",String(h.deload_units||0)),s.append("t_load_units",String(h.teaching_load_units||0)),s.append("overload_units",String(h.overload_units||0)),h.expertise.forEach(C=>s.append("expertise[]",C));const P=document.getElementById("avatar-file");P?.files?.[0]&&s.append("avatar",P.files[0]);const _=localStorage.getItem("accessToken");if(!_){u.error("Authentication required."),$(!1);return}const M={Authorization:`Bearer ${_}`,"Content-Type":"multipart/form-data"};try{const C=!!g,V=C?`/faculties/${g.id}`:"/faculties";C&&s.append("_method","PUT");const X=await z.post(V,s,{headers:M});u.success(X.data.message||"Faculty saved successfully!");const b=X.data.faculty,t={id:b.id,name:b.user?.name||"N/A",email:b.user?.email||"N/A",role:b.user?.role,designation:b.designation||"",department:b.department||"",status:b.status===0?"Active":"Inactive",avatar:b.profile_picture?`https://green-deer-882383.hostingersite.com/${b.profile_picture}`:`https://avatar.iran.liara.run/public/boy?username=${(b.user?.name||"").replace(/\s/g,"")}`,expertise:b.expertises?.map(o=>o.list_of_expertise)||[],deload_units:b.deload_units||0,teaching_load_units:b.t_load_units||0,overload_units:b.overload_units||0};f(t),d()}catch(C){if(z.isAxiosError(C)&&C.response){const V=C.response.data.errors;if(V){const X=Object.values(V)[0][0];u.error(X)}else u.error(C.response.data.message||"An error occurred.")}else u.error("Failed to connect to the server.")}finally{$(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{open:x,onOpenChange:d,children:e.jsxs(ie,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ue,{children:e.jsx(he,{className:"text-2xl font-bold text-foreground",children:g?"Edit Faculty":"Add New Faculty"})}),e.jsxs("form",{onSubmit:re,className:"py-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",onClick:()=>F&&S(!0),className:"focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary rounded-full disabled:cursor-not-allowed",disabled:!F,title:"Click to preview image",children:e.jsx("img",{src:F||"https://via.placeholder.com/80",alt:"Profile Preview",className:"w-20 h-20 rounded-full object-cover border-2 border-border cursor-pointer hover:opacity-80 transition-opacity"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(E,{id:"avatar-file",type:"file",accept:"image/png, image/jpeg",onChange:Y,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20 cursor-pointer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG or JPG. Max 2MB."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"name",children:"Full Name"}),e.jsx(E,{id:"name",name:"name",value:h.name,onChange:L,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email Address"}),e.jsx(E,{id:"email",name:"email",type:"email",value:h.email,onChange:L,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"designation",children:"Designation"}),e.jsxs(K,{value:h.designation,onValueChange:a=>O("designation",a),required:!0,children:[e.jsx(Q,{children:e.jsx(Z,{placeholder:"Select a designation"})}),e.jsxs(ee,{children:[e.jsx(G,{value:"Dean",children:"Dean"}),e.jsx(G,{value:"Program Head",children:"Program Head"}),e.jsx(G,{value:"Faculty",children:"Faculty"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"department",children:"Department"}),e.jsxs(K,{value:h.department,onValueChange:a=>O("department",a),required:!0,children:[e.jsx(Q,{disabled:i,children:e.jsx(Z,{placeholder:i?"Loading...":"Select a department"})}),e.jsx(ee,{children:J.length>0?J.map(a=>e.jsx(G,{value:a,children:a},a)):e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:i?"Loading...":"No departments."})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 border-t pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"deload_units",children:"Deload Units"}),e.jsx(E,{id:"deload_units",name:"deload_units",type:"number",value:h.deload_units||"",onChange:L,placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"teaching_load_units",children:"Teaching Load"}),e.jsx(E,{id:"teaching_load_units",name:"teaching_load_units",type:"number",value:h.teaching_load_units||"",onChange:L,placeholder:"e.g. 18"}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(we,{size:12})," Max load is 24 units."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"overload_units",children:"Overload Units"}),e.jsx(E,{id:"overload_units",name:"overload_units",type:"number",value:h.overload_units||"",onChange:L,placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"expertise",children:"Expertise"}),e.jsxs("div",{className:"flex flex-col p-2 w-full rounded-md border border-input bg-background text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",children:[e.jsxs(K,{onValueChange:U,value:"",children:[e.jsx(Q,{className:"border-t h-auto p-2 focus:ring-0 focus:ring-offset-0 justify-start text-primary hover:text-primary/90 font-medium",children:e.jsx(Z,{placeholder:"Click to add from the list..."})}),e.jsx(ee,{children:W.length>0?W.sort().map(a=>e.jsx(G,{value:a,children:a},a)):e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"All expertise selected."})})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 p-2 min-h-[2.5rem] items-center",children:h.expertise.map(a=>{const r=ze(a)%ce.length,s=ce[r];return e.jsxs(ne,{className:`font-normal hover:${s.bg} ${s.bg} hover:${s.text} ${s.text}`,children:[a,e.jsx("button",{type:"button",onClick:()=>te(a),className:"ml-1.5 rounded-full hover:bg-black/10 p-0.5","aria-label":`Remove ${a}`,children:e.jsx(pe,{size:14})})]},a)})})]})]}),e.jsxs(xe,{className:"mt-8 pt-4 border-t border-border",children:[e.jsx(ye,{asChild:!0,children:e.jsx(A,{type:"button",variant:"outline",disabled:I,children:"Cancel"})}),e.jsx(A,{type:"submit",disabled:I,children:I?"Saving...":g?"Save Changes":"Save Faculty"})]})]})]})}),e.jsx(le,{open:q,onOpenChange:S,children:e.jsx(ie,{className:"sm:max-w-lg p-2 bg-transparent border-none shadow-none",children:e.jsx("img",{src:F||"",alt:"Profile Preview Large",className:"w-full h-auto rounded-lg object-contain max-h-[80vh]"})})})]})}const Oe=()=>e.jsxs(ae,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{className:"h-11 w-11 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"h-4 w-40"}),e.jsx(D,{className:"h-3 w-24"})]})]})}),e.jsx(v,{children:e.jsx(D,{className:"h-4 w-48"})}),e.jsx(v,{children:e.jsx(D,{className:"h-4 w-32"})}),e.jsx(v,{children:e.jsx(D,{className:"h-4 w-16"})}),e.jsx(v,{children:e.jsx(D,{className:"h-4 w-16"})}),e.jsx(v,{children:e.jsx(D,{className:"h-4 w-16"})}),e.jsx(v,{children:e.jsx(D,{className:"h-6 w-20 rounded-full"})}),e.jsx(v,{children:e.jsx(D,{className:"h-8 w-8 rounded-md"})})]}),Ve=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function He({isOpen:x,onClose:d,faculty:f}){const[g,N]=n.useState({}),[h,j]=n.useState(!0),[F,y]=n.useState(!1);if(n.useEffect(()=>{x&&f&&(async()=>{j(!0);const i=localStorage.getItem("accessToken");if(!i){u.error("Authentication required."),j(!1);return}try{const c=await z.get(`/faculties/${f.id}/availability`,{headers:{Authorization:`Bearer ${i}`}});N(c.data)}catch{u.error("Could not fetch the existing schedule for this faculty."),N({})}finally{j(!1)}})()},[x,f]),!f)return null;const q=l=>{const i={id:Date.now(),start:"",end:""};N(c=>({...c,[l]:[...c[l]||[],i]}))},S=(l,i,c,I)=>{N($=>{const L=($[l]||[]).map(O=>O.id===i?{...O,[c]:I}:O);return{...$,[l]:L}})},W=(l,i)=>{N(c=>({...c,[l]:(c[l]||[]).filter(I=>I.id!==i)}))},k=async()=>{for(const i in g)for(const c of g[i]){if(!c.start||!c.end){u.error(`Please complete all time fields for ${i}.`);return}if(c.start>=c.end){u.error(`On ${i}, the end time must be after the start time.`);return}}y(!0);const l=localStorage.getItem("accessToken");if(!l){u.error("Authentication required. Please log in again."),y(!1);return}try{const i=await z.post(`/faculties/${f.id}/availability`,g,{headers:{Authorization:`Bearer ${l}`}});u.success(i.data.message||"Schedule updated successfully."),d()}catch(i){const c=i.response?.data?.message||"An unknown error occurred while saving.";u.error(c)}finally{y(!1)}},J=l=>{l||d()};return e.jsx(le,{open:x,onOpenChange:J,children:e.jsxs(ie,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs(ue,{children:[e.jsxs(he,{children:["Set Availability for ",f.name]}),e.jsx(Ne,{children:"Add or update time slots for each day the faculty is available to teach."})]}),e.jsx("div",{className:"flex-grow overflow-y-auto pr-4 -mr-4 space-y-6 py-4",children:h?e.jsxs("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:[e.jsx(Se,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"ml-4",children:"Loading existing schedule..."})]}):Ve.map(l=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:l}),e.jsxs(A,{variant:"outline",size:"sm",onClick:()=>q(l),children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add time slot"]})]}),g[l]&&g[l].length>0?e.jsx("div",{className:"space-y-2 pl-4 border-l-2",children:g[l].map(i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{type:"time",value:i.start,onChange:c=>S(l,i.id,"start",c.target.value)}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(E,{type:"time",value:i.end,onChange:c=>S(l,i.id,"end",c.target.value)}),e.jsx(A,{variant:"ghost",size:"icon",onClick:()=>W(l,i.id),title:"Remove slot",children:e.jsx(me,{className:"h-4 w-4 text-destructive"})})]},i.id))}):e.jsx("p",{className:"text-sm text-muted-foreground pl-4",children:"Not available on this day."})]},l))}),e.jsxs(xe,{className:"mt-4 pt-4 border-t",children:[e.jsx(A,{variant:"outline",onClick:d,disabled:F,children:"Cancel"}),e.jsx(A,{onClick:k,disabled:F||h,children:F?"Saving...":"Save Schedule"})]})]})})}const de=[{bg:"bg-blue-100",text:"text-blue-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-amber-100",text:"text-amber-800"},{bg:"bg-rose-100",text:"text-rose-800"},{bg:"bg-indigo-100",text:"text-indigo-800"},{bg:"bg-cyan-100",text:"text-cyan-800"},{bg:"bg-pink-100",text:"text-pink-800"}],Re=x=>{let d=0;for(let f=0;f<x.length;f++)d=(d<<5)-d+x.charCodeAt(f),d|=0;return Math.abs(d)};function Ge(){const[x,d]=n.useState([]),[f,g]=n.useState(!0),[N,h]=n.useState(""),[j,F]=n.useState({department:"All",status:"Active"}),[y,q]=n.useState(1),[S]=n.useState(10),[W,k]=n.useState(!1),[J,l]=n.useState(null),[i,c]=n.useState([]),[I,$]=n.useState(!1),[L,O]=n.useState(null),[Y,U]=n.useState(null),te=n.useCallback(async()=>{g(!0);const t=localStorage.getItem("accessToken");if(!t){u.error("Authentication required."),g(!1);return}try{const o=await z.get("/faculties",{headers:{Authorization:`Bearer ${t}`}}),m=o.data.faculties||[],p=o.data.inactive_faculties||[],H=w=>({id:w.id,name:w.user?.name||"N/A",email:w.user?.email||"N/A",role:w.user?.role,designation:w.designation||"",department:w.department||"",status:w.status===0?"Active":"Inactive",avatar:w.profile_picture?`https://green-deer-882383.hostingersite.com/${w.profile_picture}`:`https://avatar.iran.liara.run/public/boy?username=${(w.user?.name||"").replace(/\s/g,"")}`,expertise:w.expertises?.map(ge=>ge.list_of_expertise)||[],deload_units:w.deload_units||0,teaching_load_units:w.t_load_units||0,overload_units:w.overload_units||0}),T=[...m.map(H),...p.map(H)];d(T)}catch{u.error("Failed to fetch faculty data.")}finally{g(!1)}},[]);n.useEffect(()=>{(async()=>{const o=localStorage.getItem("accessToken");if(o)try{const m=await z.get("/department-program",{headers:{Authorization:`Bearer ${o}`}}),p=Array.isArray(m.data.programs)?m.data.programs:Object.values(m.data.programs||{}),H=[...new Set(p.map(T=>T.program_name))];c(H.sort())}catch(m){console.error("Failed to fetch departments for filter:",m)}})()},[]),n.useEffect(()=>{te()},[te]);const re=t=>{if(k(!1),x.some(m=>m.id===t.id))d(m=>m.map(p=>p.id===t.id?t:p)),U(t.id),globalThis.setTimeout(()=>U(null),5e3);else{const m={...t,status:"Active"};d(p=>[m,...p]),q(1),U(m.id),globalThis.setTimeout(()=>U(null),5e3)}},a=t=>{oe.fire({title:"Are you sure?",text:"This faculty will be marked as inactive.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, deactivate it!"}).then(async o=>{if(o.isConfirmed){const m=localStorage.getItem("accessToken");if(!m){u.error("Authentication required.");return}try{const p=await z.delete(`/faculties/${t}`,{headers:{Authorization:`Bearer ${m}`}});u.success(p.data.message||"Faculty deactivated."),d(H=>H.map(T=>T.id===t?{...T,status:"Inactive"}:T))}catch{u.error("Failed to deactivate faculty.")}}})},r=t=>{oe.fire({title:"Activate this faculty?",text:"This will make the faculty available again.",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Yes, activate it!"}).then(async o=>{if(o.isConfirmed){const m=localStorage.getItem("accessToken");if(!m){u.error("Authentication required.");return}try{const p=await z.post(`/faculties/${t}/activate`,{},{headers:{Authorization:`Bearer ${m}`}});u.success(p.data.message||"Faculty activated."),d(H=>H.map(T=>T.id===t?{...T,status:"Active"}:T))}catch{u.error("Failed to activate faculty.")}}})},s=()=>{l(null),k(!0)},P=t=>{l(t),k(!0)},_=t=>{O(t),$(!0)},M=n.useMemo(()=>x.filter(t=>t.id===Y||j.status==="All"||t.status===j.status).filter(t=>t.id===Y||j.department==="All"||t.department===j.department).filter(t=>{const o=N.toLowerCase();return t.id===Y||(t.name||"").toLowerCase().includes(o)||(t.department||"").toLowerCase().includes(o)||(t.designation||"").toLowerCase().includes(o)||(t.expertise||[]).some(m=>(m||"").toLowerCase().includes(o))}),[x,N,j,Y]),C=n.useMemo(()=>{const t=(y-1)*S;return M.slice(t,t+S)},[M,y,S]),V=Math.ceil(M.length/S),X=["All","Active","Inactive"],b=["Computer Networks","HCI","Computer Graphics & Vision","Software Engineering","Software Development","Cyber Security","Programming","Game Development"];return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Faculty Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"A centralized hub to add, edit, and manage all faculty members."})]}),e.jsxs("div",{className:"bg-card p-4 md:p-6 rounded-lg shadow-sm border border-border",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative w-full md:max-w-xs",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),e.jsx(E,{placeholder:"Search faculty...",className:"pl-10 w-full",value:N,onChange:t=>{h(t.target.value),q(1)}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs(K,{value:j.department,onValueChange:t=>F(o=>({...o,department:t})),children:[e.jsxs(Q,{className:"w-full sm:w-auto md:w-[200px]",children:[e.jsx($e,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(Z,{placeholder:"All Departments"})]}),e.jsxs(ee,{children:[e.jsx(G,{value:"All",children:"All Departments"}),i.map(t=>e.jsx(G,{value:t,children:t},t))]})]}),e.jsxs(K,{value:j.status,onValueChange:t=>F(o=>({...o,status:t})),children:[e.jsxs(Q,{className:"w-full sm:w-auto md:w-[180px]",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(Z,{placeholder:"All Statuses"})]}),e.jsx(ee,{children:X.map(t=>e.jsx(G,{value:t,children:t},t))})]}),e.jsx(Ee,{onAdd:s})]})]}),e.jsx("div",{className:"rounded-lg border border-border overflow-x-auto",children:e.jsxs(fe,{className:"min-w-[1000px]",children:[e.jsx(je,{className:"bg-muted/50",children:e.jsxs(ae,{children:[e.jsx(R,{className:"w-[300px]",children:"Faculty Member"}),e.jsx(R,{children:"Department"}),e.jsx(R,{children:"Expertise"}),e.jsx(R,{className:"text-center",children:"Teaching Load"}),e.jsx(R,{className:"text-center",children:"Deload"}),e.jsx(R,{className:"text-center",children:"Overload"}),e.jsx(R,{children:"Status"}),e.jsx(R,{className:"text-right",children:"Actions"})]})}),e.jsx(ve,{children:f?Array.from({length:S}).map((t,o)=>e.jsx(Oe,{},o)):C.length===0?e.jsx(ae,{children:e.jsx(v,{colSpan:8,className:"text-center h-48 text-muted-foreground",children:"No Faculty Found"})}):C.map(t=>e.jsxs(ae,{className:`${Y===t.id?"ring-2 ring-yellow-400 bg-yellow-50":""}`,children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"w-11 h-11 rounded-full object-cover ring-2 ring-offset-2 ring-border"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground whitespace-nowrap",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:t.designation})]})]})}),e.jsx(v,{className:"text-muted-foreground max-w-[200px] truncate",children:t.department}),e.jsx(v,{children:e.jsx("div",{className:"flex flex-wrap items-center gap-1.5 max-w-xs",children:t.expertise.map(o=>{const m=Re(o)%de.length,p=de[m];return e.jsx(ne,{className:`font-normal hover:${p.bg} ${p.bg} hover:${p.text} ${p.text}`,children:o},o)})})}),e.jsx(v,{className:"text-center font-medium",children:t.teaching_load_units}),e.jsx(v,{className:"text-center text-muted-foreground",children:t.deload_units}),e.jsx(v,{className:"text-center text-destructive",children:t.overload_units}),e.jsx(v,{children:e.jsx(ne,{variant:t.status==="Active"?"default":"destructive",children:t.status})}),e.jsx(v,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end items-center gap-1",children:[e.jsx(A,{variant:"ghost",size:"icon",title:"Set Faculty Schedule",onClick:()=>_(t),className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(Fe,{className:"h-4 w-4 text-purple-500"})}),e.jsx(A,{variant:"ghost",size:"icon",title:"Edit Faculty",onClick:()=>P(t),className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(ke,{className:"h-4 w-4 text-blue-500"})}),t.status==="Active"?e.jsx(A,{variant:"ghost",size:"icon",title:"Deactivate Faculty",onClick:()=>a(t.id),className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:e.jsx(me,{className:"h-4 w-4 text-red-500"})}):e.jsx(A,{variant:"ghost",size:"icon",title:"Activate Faculty",onClick:()=>r(t.id),className:"h-8 w-8 text-muted-foreground hover:text-green-600",children:e.jsx(Be,{className:"h-4 w-4 text-green-500"})})]})})]},t.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-6 text-sm gap-4",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",e.jsx("strong",{children:C.length>0?(y-1)*S+1:0})," to ",e.jsx("strong",{children:Math.min(y*S,M.length)})," of ",e.jsx("strong",{children:M.length})," entries"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{variant:"outline",size:"sm",onClick:()=>q(t=>Math.max(1,t-1)),disabled:y===1,children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"font-medium text-foreground px-2",children:["Page ",y," of ",V||1]}),e.jsxs(A,{variant:"outline",size:"sm",onClick:()=>q(t=>Math.min(V,t+1)),disabled:y>=V,children:["Next",e.jsx(Pe,{className:"h-4 w-4 ml-1"})]})]})]})]}),e.jsx(qe,{isOpen:W,onClose:()=>k(!1),onSave:re,initialData:J,expertiseOptions:b}),e.jsx(He,{isOpen:I,onClose:()=>$(!1),faculty:L})]})}function mt(){return e.jsx(Ge,{})}export{mt as default};
