import{c as ve,j as e,B as F,r,t as f,a as O,X as be,u as ye}from"./index-CHiMkSj5.js";import{b as ee,e as b,T as Ne,a as we,c as B,d as Se}from"./table-D5eD8Vzn.js";import{I as E}from"./input-VsbSfVzs.js";import{S as ne,a as le,b as ie,c as oe,d as K}from"./select-CmUPg-af.js";import{B as ce}from"./badge-CvVz2CIb.js";import{P as _e}from"./plus-Ct4pmc5A.js";import{S as C}from"./skeleton-CYdf9GJ5.js";import{L as Ce,V as Ae,S as Fe}from"./ViewAssignedSubjectsDialog-Bl_AirIw.js";import{D as de,a as ue,b as xe,c as pe,d as ke,e as ge,f as Le}from"./dialog-BF8-xjYM.js";import{L as Te}from"./loader-circle-BJe8JBGr.js";import{C as De}from"./tabs-BEJ_3u31.js";import{T as fe}from"./trash-2-BslOkklQ.js";import{L as $}from"./label-CjytYvrx.js";import{S as Me}from"./search-_cahZtMO.js";import{C as Ee}from"./calendar-days-Dpn_Gwrw.js";import{S as Ie}from"./square-pen-CwDmqWqW.js";import{C as Pe}from"./chevron-left-B4FYi9Cl.js";import{C as $e}from"./chevron-right-Bm6HNR61.js";import"./Combination-3MxaPacd.js";import"./check-Cl-6-w-J.js";import"./card-AKtesd5t.js";import"./circle-alert-DZ-zf8s9.js";import"./calendar-check-_U13tuq7.js";import"./presentation-Bd5UEQtH.js";import"./map-pin-xPwHkuEv.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Be=ve("briefcase",ze);function Oe({onAdd:p}){return e.jsxs(F,{onClick:p,className:"w-full sm:w-auto",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add Faculty"]})}const Ve=()=>e.jsxs(ee,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{className:"h-11 w-11 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"h-4 w-40"}),e.jsx(C,{className:"h-3 w-24"})]})]})}),e.jsx(b,{children:e.jsx(C,{className:"h-4 w-48"})}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{className:"h-5 w-20 rounded-full"}),e.jsx(C,{className:"h-5 w-20 rounded-full"})]})}),e.jsx(b,{className:"text-center",children:e.jsx(C,{className:"h-4 w-10 mx-auto"})}),e.jsx(b,{className:"text-center",children:e.jsx(C,{className:"h-4 w-10 mx-auto"})}),e.jsx(b,{className:"text-center",children:e.jsx(C,{className:"h-4 w-10 mx-auto"})}),e.jsx(b,{children:e.jsx(C,{className:"h-6 w-20 rounded-full"})}),e.jsx(b,{children:e.jsxs("div",{className:"flex justify-end items-center gap-1",children:[e.jsx(C,{className:"h-8 w-8 rounded-md"}),e.jsx(C,{className:"h-8 w-8 rounded-md"}),e.jsx(C,{className:"h-8 w-8 rounded-md"}),e.jsx(C,{className:"h-8 w-8 rounded-md"})]})})]}),qe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function He({isOpen:p,onClose:x,faculty:j}){const[h,y]=r.useState({}),[u,N]=r.useState(!0),[L,w]=r.useState(!1);if(r.useEffect(()=>{p&&j&&(async()=>{N(!0);const i=localStorage.getItem("accessToken");if(!i){f.error("Authentication required."),N(!1);return}try{const c=await O.get(`/faculties/${j.id}/availability`,{headers:{Authorization:`Bearer ${i}`}});y(c.data)}catch{f.error("Could not fetch the existing schedule for this faculty."),y({})}finally{N(!1)}})()},[p,j]),!j)return null;const z=l=>{const i={id:Date.now(),start:"",end:""};y(c=>({...c,[l]:[...c[l]||[],i]}))},A=(l,i,c,P)=>{y(T=>{const S=(T[l]||[]).map(D=>D.id===i?{...D,[c]:P}:D);return{...T,[l]:S}})},I=(l,i)=>{y(c=>({...c,[l]:(c[l]||[]).filter(P=>P.id!==i)}))},k=async()=>{for(const i in h)for(const c of h[i]){if(!c.start||!c.end){f.error(`Please complete all time fields for ${i}.`);return}if(c.start>=c.end){f.error(`On ${i}, the end time must be after the start time.`);return}}w(!0);const l=localStorage.getItem("accessToken");if(!l){f.error("Authentication required. Please log in again."),w(!1);return}try{const i=await O.post(`/faculties/${j.id}/availability`,h,{headers:{Authorization:`Bearer ${l}`}});f.success(i.data.message||"Schedule updated successfully."),x()}catch(i){const c=i.response?.data?.message||"An unknown error occurred while saving.";f.error(c)}finally{w(!1)}},H=l=>{l||x()};return e.jsx(de,{open:p,onOpenChange:H,children:e.jsxs(ue,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs(xe,{children:[e.jsxs(pe,{children:["Set Availability for ",j.name]}),e.jsx(ke,{children:"Add or update time slots for each day the faculty is available to teach."})]}),e.jsx("div",{className:"flex-grow overflow-y-auto pr-4 -mr-4 space-y-6 py-4",children:u?e.jsxs("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:[e.jsx(Te,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"ml-4",children:"Loading existing schedule..."})]}):qe.map(l=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:l}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>z(l),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Add time slot"]})]}),h[l]&&h[l].length>0?e.jsx("div",{className:"space-y-2 pl-4 border-l-2",children:h[l].map(i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{type:"time",value:i.start,onChange:c=>A(l,i.id,"start",c.target.value)}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(E,{type:"time",value:i.end,onChange:c=>A(l,i.id,"end",c.target.value)}),e.jsx(F,{variant:"ghost",size:"icon",onClick:()=>I(l,i.id),title:"Remove slot",children:e.jsx(fe,{className:"h-4 w-4 text-destructive"})})]},i.id))}):e.jsx("p",{className:"text-sm text-muted-foreground pl-4",children:"Not available on this day."})]},l))}),e.jsxs(ge,{className:"mt-4 pt-4 border-t",children:[e.jsx(F,{variant:"outline",onClick:x,disabled:L,children:"Cancel"}),e.jsx(F,{onClick:k,disabled:L||u,children:L?"Saving...":"Save Schedule"})]})]})})}const me=[{bg:"bg-blue-100",text:"text-blue-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-amber-100",text:"text-amber-800"},{bg:"bg-rose-100",text:"text-rose-800"},{bg:"bg-indigo-100",text:"text-indigo-800"},{bg:"bg-cyan-100",text:"text-cyan-800"}];function Re(p){let x=0;for(let j=0;j<p.length;j++)x=(x<<5)-x+p.charCodeAt(j),x|=0;return Math.abs(x)}function Ge({isOpen:p,onClose:x,onSave:j,initialData:h,expertiseOptions:y}){const[u,N]=r.useState({name:"",email:"",designation:"",department:"",expertise:[],avatar:"",profile_picture:"",deload_units:0,teaching_load_units:0,overload_units:0,t_load_units:0}),[L,w]=r.useState(null),[z,A]=r.useState(!1),[I,k]=r.useState(y),[H,l]=r.useState([]),[i,c]=r.useState(!1),[P,T]=r.useState(!1),[S,D]=r.useState(""),[te,R]=r.useState(!1);r.useEffect(()=>{p&&(async()=>{c(!0);const a=localStorage.getItem("accessToken");if(!a){f.error("Authentication required."),c(!1);return}try{const o=await O.get("/department-program",{headers:{Authorization:`Bearer ${a}`}}),_=Array.isArray(o.data.programs)?o.data.programs:Object.values(o.data.programs||{}),M=[...new Set(_.map(g=>g.program_name))];l(M.sort())}catch{f.error("Failed to fetch departments.")}finally{c(!1)}})()},[p]),r.useEffect(()=>{if(h){const s={deload_units:h.deload_units||0,teaching_load_units:h.t_load_units||0,overload_units:h.overload_units||0,t_load_units:h.t_load_units||0},{status:a,...o}=h;N({...o,...s}),w(h.profile_picture||null),k(y.filter(_=>!h.expertise.includes(_)))}else{const s=`https://avatar.iran.liara.run/public/${Math.floor(Math.random()*100)}`;N({name:"",designation:"",expertise:[],department:"",email:"",avatar:s,profile_picture:"",deload_units:0,teaching_load_units:0,overload_units:0,t_load_units:0}),w(s),k(y)}D(""),R(!1)},[h,p,y]);const V=s=>{const{name:a,value:o}=s.target;let _=o;if(["deload_units","teaching_load_units","overload_units"].includes(a)){let M=Number(o);o===""?_="":_=M<0?0:M}N(M=>({...M,[a]:_,...a==="teaching_load_units"?{t_load_units:_===""?0:Number(_)}:{}}))},U=(s,a)=>{N(o=>({...o,[s]:a}))},G=s=>{const a=s.target.files?.[0];a&&w(URL.createObjectURL(a))},Z=s=>{D(s.target.value)},W=s=>{const a=s.trim();a&&!u.expertise.includes(a)&&(N(o=>({...o,expertise:[...o.expertise,a].sort()})),I.includes(a)&&k(o=>o.filter(_=>_!==a))),D("")},X=s=>{N(a=>({...a,expertise:a.expertise.filter(o=>o!==s)})),y.includes(s)&&!I.includes(s)&&k(a=>[...a,s].sort())},Q=I.filter(s=>s.toLowerCase().includes(S.toLowerCase())).sort(),se=te&&(S.length>0||I.length>0),ae=async s=>{s.preventDefault(),T(!0);let a;switch(u.designation){case"Dean":a=0;break;case"Program Head":a=1;break;case"Faculty":a=2;break;default:f.error("Invalid designation."),T(!1);return}const o=Number(u.deload_units)||0,_=Number(u.teaching_load_units)||0,M=Number(u.overload_units)||0,g=new FormData;g.append("name",u.name),g.append("email",u.email),g.append("role",String(a)),g.append("designation",u.designation),g.append("department",u.department),g.append("deload_units",String(o)),g.append("t_load_units",String(_)),g.append("overload_units",String(M)),u.expertise.forEach(t=>g.append("expertise[]",t));const Y=document.getElementById("avatar-file");Y?.files?.[0]&&g.append("avatar",Y.files[0]);const J=localStorage.getItem("accessToken");if(!J){f.error("Authentication required."),T(!1);return}const re={Authorization:`Bearer ${J}`,"Content-Type":"multipart/form-data"};try{const t=!!h,m=t?`/faculties/${h.id}`:"/faculties";t&&g.append("_method","PUT");const d=await O.post(m,g,{headers:re});f.success(d.data.message||"Faculty saved successfully!");const n=d.data.faculty,q={id:n.id,name:n.user?.name||"N/A",email:n.user?.email||"N/A",role:n.user?.role,designation:n.designation||"",department:n.department||"",status:"Active",profile_picture:n.profile_picture?`http://192.168.1.97:8000/${n.profile_picture}`:`https://avatar.iran.liara.run/public/boy?username=${(n.user?.name||"").replace(/\s/g,"")}`,expertise:n.expertises?.map(v=>v.list_of_expertise)||[],deload_units:n.deload_units||0,t_load_units:n.t_load_units||0,overload_units:n.overload_units||0};j(q),x()}catch(t){if(O.isAxiosError(t)&&t.response){const m=t.response.data.errors;if(m){const d=Object.values(m)[0][0];f.error(d)}else f.error(t.response.data.message||"An error occurred.")}else f.error("Failed to connect to the server.")}finally{T(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(de,{open:p,onOpenChange:x,children:e.jsxs(ue,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-2xl font-bold text-foreground",children:h?"Edit Faculty":"Add New Faculty"})}),e.jsxs("form",{onSubmit:ae,className:"py-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",onClick:()=>L&&A(!0),className:"focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary rounded-full disabled:cursor-not-allowed",disabled:!L,title:"Click to preview image",children:e.jsx("img",{src:L||"https://via.placeholder.com/80",alt:"Profile Preview",className:"w-20 h-20 rounded-full object-cover border-2 border-border cursor-pointer hover:opacity-80 transition-opacity"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(E,{id:"avatar-file",type:"file",accept:"image/png, image/jpeg",onChange:G,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20 cursor-pointer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG or JPG. Max 2MB."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"name",children:"Full Name"}),e.jsx(E,{id:"name",name:"name",value:u.name,onChange:V,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"email",children:"Email Address"}),e.jsx(E,{id:"email",name:"email",type:"text",value:u.email,onChange:V,required:!0,pattern:"[a-zA-Z0-9._%+-ñÑ]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address. The 'ñ' character is allowed."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"designation",children:"Designation"}),e.jsxs(ne,{value:u.designation,onValueChange:s=>U("designation",s),required:!0,children:[e.jsx(le,{children:e.jsx(ie,{placeholder:"Select a designation"})}),e.jsxs(oe,{children:[e.jsx(K,{value:"Dean",children:"Dean"}),e.jsx(K,{value:"Program Head",children:"Program Head"}),e.jsx(K,{value:"Faculty",children:"Faculty"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"department",children:"Department"}),e.jsxs(ne,{value:u.department,onValueChange:s=>U("department",s),required:!0,children:[e.jsx(le,{disabled:i,children:e.jsx(ie,{placeholder:i?"Loading...":"Select a department"})}),e.jsx(oe,{children:H.length>0?H.map(s=>e.jsx(K,{value:s,children:s},s)):e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:i?"Loading...":"No departments."})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 border-t pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"deload_units",children:"Deload Units"}),e.jsx(E,{id:"deload_units",name:"deload_units",type:"number",value:String(u.deload_units),onChange:V,placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"teaching_load_units",children:"Teaching Load"}),e.jsx(E,{id:"teaching_load_units",name:"teaching_load_units",type:"number",value:String(u.teaching_load_units),onChange:V,placeholder:"e.g. 18"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"overload_units",children:"Overload Units"}),e.jsx(E,{id:"overload_units",name:"overload_units",type:"number",value:String(u.overload_units),onChange:V,placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"expertise-input",children:"Expertise"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-wrap items-center w-full rounded-md border border-input bg-background text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 min-h-10 p-1.5",children:[u.expertise.map(s=>{const a=Re(s)%me.length,o=me[a];return e.jsxs(ce,{className:`font-normal hover:${o.bg} ${o.bg} hover:${o.text} ${o.text} mr-1.5 mb-1.5`,children:[s,e.jsx("button",{type:"button",onClick:()=>X(s),className:"ml-1.5 rounded-full hover:bg-black/10 p-0.5","aria-label":`Remove ${s}`,children:e.jsx(be,{size:14})})]},s)}),e.jsx(E,{id:"expertise-input",value:S,onChange:Z,onKeyDown:s=>{s.key==="Enter"&&S.trim()!==""&&(s.preventDefault(),W(S))},onFocus:()=>R(!0),onBlur:()=>{setTimeout(()=>R(!1),100)},placeholder:u.expertise.length===0?"Type to add or select expertise...":"",className:"border-none focus-visible:ring-0 focus-visible:ring-offset-0 h-8 p-0 flex-1 min-w-[50px] bg-transparent shadow-none",autoComplete:"off"})]}),se&&e.jsxs("div",{className:"absolute z-10 w-full bg-popover border border-input rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto",children:[!u.expertise.map(s=>s.toLowerCase()).includes(S.trim().toLowerCase())&&!I.map(s=>s.toLowerCase()).includes(S.trim().toLowerCase())&&S.trim()!==""&&e.jsxs("div",{className:"px-4 py-2 cursor-pointer bg-primary text-primary-foreground hover:bg-primary/90 text-center border-b font-medium",onClick:()=>W(S),onMouseDown:s=>s.preventDefault(),children:["Add New Expertise: **",S.trim(),"**"]}),Q.length>0?Q.map(s=>e.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground",onClick:()=>W(s),onMouseDown:a=>a.preventDefault(),children:s},s)):S.trim()===""&&e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"All expertise selected."})]})]})]}),e.jsxs(ge,{className:"mt-8 pt-4 border-t border-border",children:[e.jsx(Le,{asChild:!0,children:e.jsx(F,{type:"button",variant:"outline",disabled:P,children:"Cancel"})}),e.jsx(F,{type:"submit",disabled:P,children:P?"Saving...":h?"Save Changes":"Save Faculty"})]})]})]})}),e.jsx(de,{open:z,onOpenChange:A,children:e.jsx(ue,{className:"sm:max-w-lg p-2 bg-transparent border-none shadow-none",children:e.jsx("img",{src:L||"",alt:"Profile Preview Large",className:"w-full h-auto rounded-lg object-contain max-h-[80vh]"})})})]})}const he=[{bg:"bg-blue-100",text:"text-blue-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-amber-100",text:"text-amber-800"},{bg:"bg-rose-100",text:"text-rose-800"},{bg:"bg-indigo-100",text:"text-indigo-800"},{bg:"bg-cyan-100",text:"text-cyan-800"},{bg:"bg-pink-100",text:"text-pink-800"}],Ze=p=>{let x=0;for(let j=0;j<p.length;j++)x=(x<<5)-x+p.charCodeAt(j),x|=0;return Math.abs(x)};function We(){const[p,x]=r.useState([]),[j,h]=r.useState(!0),[y,u]=r.useState(""),[N,L]=r.useState({department:"All"}),[w,z]=r.useState(1),[A]=r.useState(10),[I,k]=r.useState(!1),[H,l]=r.useState(null),[i,c]=r.useState([]),[P,T]=r.useState(!1),[S,D]=r.useState(null),[te,R]=r.useState(!1),[V,U]=r.useState(null),[G,Z]=r.useState(null),W=ye(),X=r.useCallback(async()=>{h(!0);const t=localStorage.getItem("accessToken");if(!t){f.error("Authentication required."),h(!1),W("/facultyscheduler/user-login");return}try{const d=(await O.get("/faculties",{headers:{Authorization:`Bearer ${t}`}})).data.faculties||[],n=v=>({id:v.id,name:v.user?.name||"N/A",email:v.user?.email||"N/A",role:v.user?.role,designation:v.designation||"",department:v.department||"",status:"Active",profile_picture:v.profile_picture?`http://192.168.1.97:8000/${v.profile_picture}`:null,expertise:v.expertises?.map(je=>je.list_of_expertise)||[],deload_units:v.deload_units||0,t_load_units:v.t_load_units||0,overload_units:v.overload_units||0}),q=d.map(n);x(q)}catch{f.error("Failed to fetch faculty data.")}finally{h(!1)}},[W]);r.useEffect(()=>{(async()=>{const m=localStorage.getItem("accessToken");if(m)try{const d=await O.get("/department-program",{headers:{Authorization:`Bearer ${m}`}}),n=Array.isArray(d.data.programs)?d.data.programs:Object.values(d.data.programs||{}),q=[...new Set(n.map(v=>v.program_name))];c(q.sort())}catch(d){console.error("Failed to fetch departments for filter:",d)}})()},[]),r.useEffect(()=>{X()},[X]);const Q=t=>{if(k(!1),p.some(d=>d.id===t.id))x(d=>d.map(n=>n.id===t.id?t:n)),Z(t.id),globalThis.setTimeout(()=>Z(null),5e3);else{const d={...t,status:"Active"};x(n=>[d,...n]),z(1),Z(d.id),globalThis.setTimeout(()=>Z(null),5e3)}},se=t=>{Fe.fire({title:"Are you absolutely sure?",text:"This faculty member and ALL their related data (expertises, loadings, etc.) will be PERMANENTLY DELETED and cannot be recovered.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, permanently delete it!"}).then(async m=>{if(m.isConfirmed){const d=localStorage.getItem("accessToken");if(!d){f.error("Authentication required.");return}try{const n=await O.delete(`/faculties/${t}`,{headers:{Authorization:`Bearer ${d}`}});f.success(n.data.message||"Faculty deleted successfully!"),x(q=>q.filter(v=>v.id!==t))}catch{f.error("Failed to delete faculty. This faculty might have related records that prevent deletion.")}}})},ae=()=>{l(null),k(!0)},s=t=>{l(t),k(!0)},a=t=>{D(t),T(!0)},o=()=>{T(!1),D(null)},_=t=>{U(t),R(!0)},M=()=>{R(!1),U(null)},g=r.useMemo(()=>p.filter(t=>t.id===G||N.department==="All"||t.department===N.department).filter(t=>{const m=y.toLowerCase();return t.id===G||(t.name||"").toLowerCase().includes(m)||(t.department||"").toLowerCase().includes(m)||(t.designation||"").toLowerCase().includes(m)||(t.expertise||[]).some(d=>(d||"").toLowerCase().includes(m))}),[p,y,N,G]),Y=r.useMemo(()=>{const t=(w-1)*A;return g.slice(t,t+A)},[g,w,A]),J=Math.ceil(g.length/A),re=["Computer Networks","HCI","Computer Graphics & Vision","Software Engineering","Software Development","Cyber Security","Programming","Mobile App Development","Data Science","Artificial Intelligence","Information Systems","Machine Learning","Robotics"];return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Faculty Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"A centralized hub to add, edit, and manage all faculty members."})]}),e.jsxs("div",{className:"bg-card p-4 md:p-6 rounded-lg shadow-sm border border-border",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative w-full md:max-w-xs",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),e.jsx(E,{placeholder:"Search faculty...",className:"pl-10 w-full",value:y,onChange:t=>{u(t.target.value),z(1)}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[e.jsxs(ne,{value:N.department,onValueChange:t=>L(m=>({...m,department:t})),children:[e.jsxs(le,{className:"w-full sm:w-auto md:w-[200px]",children:[e.jsx(Be,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(ie,{placeholder:"All Departments"})]}),e.jsxs(oe,{children:[e.jsx(K,{value:"All",children:"All Departments"}),i.map(t=>e.jsx(K,{value:t,children:t},t))]})]}),e.jsx(Oe,{onAdd:ae})]})]}),e.jsx("div",{className:"rounded-lg border border-border overflow-x-auto",children:e.jsxs(Ne,{className:"min-w-[1000px]",children:[e.jsx(we,{className:"bg-muted/50",children:e.jsxs(ee,{children:[e.jsx(B,{className:"w-[300px]",children:"Faculty Member"}),e.jsx(B,{children:"Department"}),e.jsx(B,{children:"Expertise"}),e.jsx(B,{className:"text-center",children:"Teaching Load"}),e.jsx(B,{className:"text-center",children:"Deload"}),e.jsx(B,{className:"text-center",children:"Overload"}),e.jsx(B,{children:"Status"}),e.jsx(B,{className:"text-right w-[140px]",children:"Actions"})]})}),e.jsx(Se,{children:j?Array.from({length:A}).map((t,m)=>e.jsx(Ve,{},m)):Y.length===0?e.jsx(ee,{children:e.jsx(b,{colSpan:8,className:"text-center h-48 text-muted-foreground",children:"No Faculty Found"})}):Y.map(t=>e.jsxs(ee,{className:`${G===t.id?"ring-2 ring-yellow-400 bg-yellow-50":""}`,children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:t.profile_picture||`https://avatar.iran.liara.run/public/boy?username=${(t.name||"").replace(/\s/g,"")}`,alt:t.name,className:"w-11 h-11 rounded-full object-cover ring-2 ring-offset-2 ring-border"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground whitespace-nowrap",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:t.designation})]})]})}),e.jsx(b,{className:"text-muted-foreground max-w-[200px] truncate",children:t.department}),e.jsx(b,{children:e.jsx("div",{className:"flex flex-wrap items-center gap-1.5 max-w-xs",children:t.expertise.map(m=>{const d=Ze(m)%he.length,n=he[d];return e.jsx(ce,{className:`font-normal hover:${n.bg} ${n.bg} hover:${n.text} ${n.text}`,children:m},m)})})}),e.jsx(b,{className:"text-center font-medium",children:t.t_load_units}),e.jsx(b,{className:"text-center text-muted-foreground",children:t.deload_units}),e.jsx(b,{className:"text-center text-destructive",children:t.overload_units}),e.jsx(b,{children:e.jsx(ce,{variant:"default",children:"Active"})}),e.jsx(b,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end items-center gap-1",children:[e.jsx(F,{variant:"ghost",size:"icon",title:"View faculty load",onClick:()=>a(t),className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(Ce,{className:"h-4 w-4 text-purple-500"})}),e.jsx(F,{variant:"ghost",size:"icon",title:"Set Availability",onClick:()=>_(t),className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(Ee,{className:"h-4 w-4 text-green-500"})}),e.jsx(F,{variant:"ghost",size:"icon",title:"Edit Faculty",onClick:()=>s(t),className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(Ie,{className:"h-4 w-4 text-blue-500"})}),e.jsx(F,{variant:"ghost",size:"icon",title:"Permanently Delete Faculty",onClick:()=>se(t.id),className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:e.jsx(fe,{className:"h-4 w-4 text-red-500"})})]})})]},t.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-6 text-sm gap-4",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",e.jsx("strong",{children:Y.length>0?(w-1)*A+1:0})," to ",e.jsx("strong",{children:Math.min(w*A,g.length)})," of ",e.jsx("strong",{children:g.length})," entries"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>z(t=>Math.max(1,t-1)),disabled:w===1,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"font-medium text-foreground px-2",children:["Page ",w," of ",J||1]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>z(t=>Math.min(J,t+1)),disabled:w>=J,children:["Next",e.jsx($e,{className:"h-4 w-4 ml-1"})]})]})]})]}),e.jsx(Ge,{isOpen:I,onClose:()=>k(!1),onSave:Q,initialData:H,expertiseOptions:re}),e.jsx(Ae,{isOpen:P,onClose:o,faculty:S}),e.jsx(He,{isOpen:te,onClose:M,faculty:V})]})}function vt(){return e.jsx(We,{})}export{vt as default};
