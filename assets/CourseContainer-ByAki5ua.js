import{c as je,r as c,j as e,B as b,C as Q,m as R,t as be}from"./index-hYjaP9Dp.js";import{H as fe}from"./Header-DQr-Gr69.js";import{I as x}from"./input-CWsi7UcC.js";import{L as y}from"./label-Cn0wqWF-.js";import{T as ge,a as pe,b as D,c as C,d as ve,e as v,f as Ne}from"./table-CLTygtjh.js";import{S as ye,a as Se,b as Le,c as we,d as Ce}from"./select-DtZHneaF.js";import{D as q,a as z,b as F,c as M,d as Z,e as B,f as O}from"./dialog-CwVwVjPy.js";import{P as U}from"./plus-DVbFfxba.js";import{S as Te}from"./search-CTGO1uLL.js";import{A as W,C as Ee}from"./index-C_t9zXap.js";import{S as $}from"./square-pen-CMqerDLv.js";import{T as I}from"./trash-2-BL7ISKRe.js";import{B as Ae}from"./book-copy-lXGWRtEu.js";import{A as Pe}from"./archive-SKi9bu-k.js";import{L as H}from"./layers-Bk9_JSEF.js";import"./index-CFdJ_3cI.js";import"./index-Cv-42o4Q.js";import"./Combination-DLdob3fC.js";import"./chevron-down-BFehub7U.js";import"./check-BXqkWGox.js";import"./chevron-up-MQc75mCd.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],V=je("circle-alert",ke),Ye=[{id:1,name:"Bachelor of Science in Information Technology",abbreviation:"BSIT",effectiveYear:"2024-2025",subjects:{"First Year, First Semester":[{code:"IT101",name:"Introduction to Computing",unitsTotal:3,unitsLec:2,unitsLab:1,hoursTotal:5,hoursLec:2,hoursLab:3,prerequisite:"None"}],"First Year, Second Semester":[{code:"IT102",name:"Fundamentals of Database Systems",unitsTotal:3,unitsLec:2,unitsLab:1,hoursTotal:5,hoursLec:2,hoursLab:3,prerequisite:"IT101"}]}},{id:2,name:"Bachelor of Science in Computer Science",abbreviation:"BSCS",effectiveYear:"2023-2024",subjects:{"First Year, First Semester":[{code:"CS110",name:"Discrete Mathematics",unitsTotal:3,unitsLec:3,unitsLab:0,hoursTotal:3,hoursLec:3,hoursLab:0,prerequisite:"None"}]}},{id:3,name:"Bachelor of Science in Business Administration",abbreviation:"BSBA",effectiveYear:"2022-2023",subjects:{"First Year, First Semester":[{code:"BA101",name:"Principles of Management",unitsTotal:3,unitsLec:3,unitsLab:0,hoursTotal:3,hoursLec:3,hoursLab:0,prerequisite:"None"}]}}],X=["from-purple-600 to-indigo-600","from-blue-500 to-teal-400","from-pink-500 to-rose-500","from-orange-500 to-amber-500","from-green-500 to-lime-500","from-cyan-500 to-sky-500"],qe={hidden:{opacity:0,y:30},visible:i=>({opacity:1,y:0,transition:{delay:i*.05,type:"spring",stiffness:120,damping:14}})};function ze(){const[i,N]=c.useState(Ye),[S,j]=c.useState(""),[o,f]=c.useState("All Years"),[t,d]=c.useState(null),[L,g]=c.useState(!1),[E,a]=c.useState(!1),[p,A]=c.useState(!1),[h,l]=c.useState(!1),[m,k]=c.useState(null),[P,ee]=c.useState(null),[Y,_]=c.useState(null),se=()=>{k(null),g(!0)},re=s=>{k(s),g(!0)},te=s=>{window.confirm("Delete this program and all its contents?")&&N(i.filter(n=>n.id!==s))},ae=s=>{if(i.some(r=>r.effectiveYear===s.effectiveYear&&r.id!==m?.id)){be.error(`A program with the effective year"${s.effectiveYear} already exists. Please use a unique academic year.`);return}if(m)N(i.map(r=>r.id===m.id?{...r,...s}:r));else{const r={id:Date.now(),...s,subjects:{}};N([r,...i])}g(!1)},K=()=>a(!0),le=(s,n)=>{!t||!s.trim()||(N(i.map(r=>{if(r.id===t.id){if(r.subjects[s])return alert("A semester with this name already exists."),r;const u={...r,subjects:{...r.subjects}},T=n.filter(w=>w.code&&w.name).map(w=>({...w,prerequisite:w.prerequisite.trim()===""?"None":w.prerequisite}));return u.subjects[s]=T,u}return r})),a(!1))},ne=s=>{ee(s),A(!0)},ie=s=>{!t||!window.confirm(`Delete semester "${s}" and all its subjects?`)||N(i.map(n=>{if(n.id===t.id){const r={...n.subjects};return delete r[s],{...n,subjects:r}}return n}))},oe=s=>{!t||!P||!s.trim()||(N(i.map(n=>{if(n.id===t.id){const r={...n.subjects};if(r[s]&&s!==P)return alert("A semester with this name already exists."),n;const u=r[P];return delete r[P],r[s]=u,{...n,subjects:r}}return n})),A(!1))},ce=s=>{_({semester:s,subject:null}),l(!0)},de=(s,n)=>{_({semester:s,subject:n}),l(!0)},ue=(s,n)=>{!t||!window.confirm(`Delete subject ${n}?`)||N(i.map(r=>{if(r.id===t.id){const u={...r};return u.subjects[s]=u.subjects[s].filter(T=>T.code!==n),u}return r}))},me=(s,n)=>{if(!t)return;const r=!!Y?.subject,u={...n,prerequisite:n.prerequisite.trim()===""?"None":n.prerequisite};N(i.map(T=>{if(T.id===t.id){const w={...T,subjects:{...T.subjects}};if(r){const xe=Y.subject.code;w.subjects[s]=w.subjects[s].map(J=>J.code===xe?u:J)}else w.subjects[s].push(u);return w}return T})),l(!1)},he=c.useMemo(()=>{const s=new Set(i.map(n=>n.effectiveYear));return["All Years",...Array.from(s).sort().reverse()]},[i]),G=c.useMemo(()=>i.filter(s=>s.name.toLowerCase().includes(S.toLowerCase())||s.abbreviation.toLowerCase().includes(S.toLowerCase())).filter(s=>o==="All Years"||s.effectiveYear===o),[i,S,o]);return c.useEffect(()=>{t&&d(i.find(s=>s.id===t.id)||null)},[i,t]),e.jsxs("div",{className:"mx-auto max-w-7xl p-4 md:p-8",children:[e.jsxs("header",{className:"mb-8 flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Curriculum Management"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage academic programs and their subjects."})]}),e.jsxs(b,{onClick:se,className:"flex items-center gap-2 bg-gradient-to-br from-purple-600 to-indigo-600 text-white font-semibold px-5 py-3 rounded-lg shadow-lg hover:shadow-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 transform hover:-translate-y-0.5",children:[e.jsx(U,{size:20})," Add New Program"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md mb-8 flex flex-col md:grid-cols-1 gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full",children:[e.jsx(Te,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx(x,{type:"text",placeholder:"Search for a program by name or abbreviation...",className:"pl-12 pr-4 py-3 bg-gray-50 border-gray-200 rounded-full w-full focus:ring-2 focus:ring-purple-400 transition-all duration-300",value:S,onChange:s=>j(s.target.value)})]}),e.jsx("div",{className:"flex-shrink-0 w-full",children:e.jsxs(ye,{value:o,onValueChange:f,children:[e.jsxs(Se,{className:"w-full h-12 rounded-full bg-gray-50 border-gray-200",children:[e.jsx(Q,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx(Le,{placeholder:"Filter by A.Y."})]}),e.jsx(we,{children:he.map(s=>e.jsx(Ce,{value:s,children:s},s))})]})})]}),e.jsx(W,{children:G.length>0?e.jsx(R.div,{className:"grid grid-cols-2 md:grid-cols-1 gap-6",initial:"hidden",animate:"visible",children:G.map((s,n)=>e.jsxs(R.div,{variants:qe,custom:n,className:"bg-white rounded-2xl shadow-md overflow-hidden group transition-all duration-300 hover:shadow-xl hover:-translate-y-1 flex flex-col",children:[e.jsxs("div",{className:`p-5 bg-gradient-to-br text-white relative ${X[n%X.length]}`,children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.abbreviation}),e.jsx("p",{className:"opacity-80 truncate h-6",children:s.name}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(b,{size:"icon",variant:"ghost",onClick:r=>{r.stopPropagation(),re(s)},className:"h-9 w-9 bg-black/20 rounded-full hover:bg-black/40",children:e.jsx($,{size:16})}),e.jsx(b,{size:"icon",variant:"ghost",onClick:r=>{r.stopPropagation(),te(s.id)},className:"h-9 w-9 bg-black/20 rounded-full hover:bg-red-500/80",children:e.jsx(I,{size:16})})]})]}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-md text-gray-500 mb-4",children:[e.jsx(Q,{size:16}),e.jsxs("span",{children:["Effective A.Y. ",s.effectiveYear]})]}),e.jsxs("div",{className:"space-y-3 text-md",children:[e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Ae,{size:16,className:"text-purple-500"}),e.jsx("span",{children:"Total Subjects"})]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-bold text-sm",children:Object.values(s.subjects).flat().length})]}),e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Ee,{size:16,className:"text-indigo-500"}),e.jsx("span",{children:"Total Units"})]}),e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full font-bold text-sm",children:Object.values(s.subjects).flat().reduce((r,u)=>r+u.unitsTotal,0)})]})]})]}),e.jsx(b,{onClick:()=>d(s),className:"w-full mt-5 bg-gray-100 hover:bg-gray-200 text-black shadow-md",children:"Manage Curriculum"})]})]},s.id))}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center col-span-full py-20 text-gray-500",children:[e.jsx(Pe,{size:64,className:"mx-auto mb-6 text-gray-300"}),e.jsx("h4",{className:"font-bold text-2xl text-gray-700",children:"No Programs Found"}),e.jsx("p",{className:"max-w-md mx-auto mt-2",children:"No programs match your search criteria. Try a different search term or add a new program."})]})}),e.jsx(W,{children:t&&e.jsx(q,{open:!!t,onOpenChange:s=>!s&&d(null),children:e.jsxs(z,{className:"max-w-7xl max-h-[90vh] flex flex-col p-0 md:w-[90%]",children:[e.jsxs(F,{className:"p-6 pb-4 bg-gray-50 border-b rounded-t-lg",children:[e.jsxs(M,{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[t?.name,e.jsx("span",{className:"text-sm font-semibold text-purple-700 bg-purple-100 px-3 py-1 rounded-full",children:t?.abbreviation})]}),e.jsxs(Z,{children:["Academic Year of Effectivity: ",t?.effectiveYear]})]}),e.jsx("div",{className:"flex-grow overflow-y-auto px-6 py-4 space-y-8",children:Object.keys(t.subjects).length===0?e.jsxs("div",{className:"text-center py-20 text-gray-500 flex flex-col items-center justify-center",children:[e.jsx(H,{size:64,className:"mx-auto mb-6 text-gray-300"}),e.jsx("h4",{className:"font-bold text-2xl text-gray-700",children:"No Semesters Found"}),e.jsx("p",{className:"max-w-md mx-auto mt-2",children:"This curriculum is currently empty. Start by adding a semester and its corresponding subjects in bulk."}),e.jsxs(b,{onClick:K,className:"mt-6 flex items-center gap-2",children:[e.jsx(H,{size:16})," Add Year/Semester"]})]}):Object.entries(t.subjects).map(([s,n])=>e.jsxs("div",{className:"group/semester bg-white border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 border-b",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-700",children:s}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover/semester:opacity-100 transition-opacity",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-blue-600",onClick:()=>ne(s),children:e.jsx($,{size:16})}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-600",onClick:()=>ie(s),children:e.jsx(I,{size:16})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ge,{children:[e.jsx(pe,{children:e.jsxs(D,{className:"bg-gray-100 hover:bg-gray-100",children:[e.jsx(C,{children:"Code"}),e.jsx(C,{className:"w-2/5",children:"Descriptive Title"}),e.jsx(C,{className:"text-center",children:"Total Units"}),e.jsx(C,{className:"text-center",children:"Lec"}),e.jsx(C,{className:"text-center",children:"Lab"}),e.jsx(C,{className:"text-center",children:"Total Hours"}),e.jsx(C,{className:"text-center",children:"Lec"}),e.jsx(C,{className:"text-center",children:"Lab"}),e.jsx(C,{children:"Pre-requisite"}),e.jsx(C,{className:"text-right w-[100px]",children:"Actions"})]})}),e.jsx(ve,{children:n.map((r,u)=>e.jsxs(D,{className:u%2===0?"bg-white":"bg-gray-50/50",children:[e.jsx(v,{className:"font-semibold",children:r.code}),e.jsx(v,{children:r.name}),e.jsx(v,{className:"text-center font-bold text-purple-700",children:r.unitsTotal}),e.jsx(v,{className:"text-center",children:r.unitsLec}),e.jsx(v,{className:"text-center",children:r.unitsLab}),e.jsx(v,{className:"text-center font-bold text-indigo-700",children:r.hoursTotal}),e.jsx(v,{className:"text-center",children:r.hoursLec}),e.jsx(v,{className:"text-center",children:r.hoursLab}),e.jsx(v,{children:r.prerequisite}),e.jsx(v,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-0",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-blue-600",onClick:()=>de(s,r),children:e.jsx($,{size:16})}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-600",onClick:()=>ue(s,r.code),children:e.jsx(I,{size:16})})]})})]},r.code))}),e.jsx(Ne,{children:e.jsxs(D,{className:"bg-gray-100 hover:bg-gray-200 font-bold",children:[e.jsx(v,{colSpan:2,className:"text-right text-gray-700",children:"SEMESTER TOTALS"}),e.jsx(v,{className:"text-center text-xl text-purple-700",children:n.reduce((r,u)=>r+u.unitsTotal,0)}),e.jsx(v,{className:"text-center text-gray-600",children:n.reduce((r,u)=>r+u.unitsLec,0)}),e.jsx(v,{className:"text-center text-gray-600",children:n.reduce((r,u)=>r+u.unitsLab,0)}),e.jsx(v,{className:"text-center text-xl text-indigo-700",children:n.reduce((r,u)=>r+u.hoursTotal,0)}),e.jsx(v,{className:"text-center text-gray-600",children:n.reduce((r,u)=>r+u.hoursLec,0)}),e.jsx(v,{className:"text-center text-gray-600",children:n.reduce((r,u)=>r+u.hoursLab,0)}),e.jsx(v,{colSpan:2})]})})]})}),e.jsx("div",{className:"p-2",children:e.jsxs(b,{onClick:()=>ce(s),variant:"link",className:"text-purple-600 hover:text-purple-800",children:[e.jsx(U,{size:16,className:"mr-1"})," Add Subject to this Semester"]})})]},s))}),e.jsx(B,{className:"mt-auto p-6 bg-gray-50 border-t rounded-b-lg",children:e.jsxs(b,{onClick:K,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(H,{size:16})," Add Year/Semester (Bulk)"]})})]})})}),e.jsx(Fe,{isOpen:L,onClose:()=>g(!1),onSave:ae,initialData:m}),e.jsx(Me,{isOpen:E,onClose:()=>a(!1),onSave:le}),e.jsx(Be,{isOpen:p,onClose:()=>A(!1),onSave:oe,initialData:P}),Y&&e.jsx(Ie,{isOpen:h,onClose:()=>l(!1),onSave:s=>me(Y.semester,s),initialData:Y.subject})]})}function Fe({isOpen:i,onClose:N,onSave:S,initialData:j}){const[o,f]=c.useState(""),[t,d]=c.useState(""),[L,g]=c.useState("");c.useEffect(()=>{j?(f(j.name),d(j.abbreviation),g(j.effectiveYear)):(f(""),d(""),g(""))},[j,i]);const E=a=>{a.preventDefault(),o&&t&&L&&S({name:o,abbreviation:t,effectiveYear:L})};return e.jsx(q,{open:i,onOpenChange:N,children:e.jsxs(z,{className:"md:w-[90%]",children:[e.jsx(F,{children:e.jsx(M,{children:j?"Edit Program":"Add New Program"})}),e.jsxs("form",{onSubmit:E,className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"progName",children:"Program Name"}),e.jsx(x,{id:"progName",value:o,onChange:a=>f(a.target.value),placeholder:"e.g., Bachelor of Science...",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"progAbbr",children:"Abbreviation"}),e.jsx(x,{id:"progAbbr",value:t,onChange:a=>d(a.target.value),placeholder:"e.g., BSIT",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"effectiveYear",children:"Effectivity A.Y."}),e.jsx(x,{id:"effectiveYear",value:L,onChange:a=>g(a.target.value),placeholder:"e.g., 2024-2025",required:!0})]}),e.jsxs(B,{className:"pt-4 flex flex-col gap-2",children:[e.jsx(O,{asChild:!0,children:e.jsx(b,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(b,{type:"submit",children:"Save Program"})]})]})]})})}function Me({isOpen:i,onClose:N,onSave:S}){const[j,o]=c.useState(""),[f,t]=c.useState([{code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""}]),[d,L]=c.useState([]);c.useEffect(()=>{const h=f.map(l=>({unitError:l.unitsLec+l.unitsLab>l.unitsTotal?"Lec+Lab units > Total.":null,hourError:l.hoursLec+l.hoursLab>l.hoursTotal?"Lec+Lab hours > Total.":null}));L(h)},[f]);const g=c.useMemo(()=>d.some(h=>h.unitError||h.hourError),[d]),E=()=>t([...f,{code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""}]),a=h=>t(f.filter((l,m)=>m!==h)),p=(h,l,m)=>t(f.map((k,P)=>P===h?{...k,[l]:m}:k)),A=h=>{if(h.preventDefault(),g){alert("Fix errors before saving.");return}S(j,f)};return c.useEffect(()=>{i&&(o(""),t([{code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""}]))},[i]),e.jsx(q,{open:i,onOpenChange:N,children:e.jsxs(z,{className:"max-w-7xl max-h-[90vh] flex flex-col md:w-[90%]",children:[e.jsxs(F,{children:[e.jsx(M,{children:"Add New Semester and Subjects"}),e.jsx(Z,{children:"Add subjects in bulk for a specific semester. Errors in totals will be highlighted."})]}),e.jsxs("form",{onSubmit:A,className:"flex-grow flex flex-col min-h-0 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(y,{htmlFor:"semesterName",className:"text-base",children:"Year Level and Semester"}),e.jsx(x,{id:"semesterName",value:j,onChange:h=>o(h.target.value),placeholder:"e.g., First Year, Second Semester",required:!0,className:"mt-1"})]}),e.jsxs("div",{className:"flex-grow overflow-x-auto overflow-y-auto border rounded-lg p-2 bg-gray-50 -mx-2 px-2",children:[e.jsxs("div",{className:"grid min-w-[920px] grid-cols-[1fr,3fr,0.5fr,0.5fr,0.5fr,0.5fr,0.5fr,0.5fr,1.5fr,auto] gap-2 px-2 pb-2 border-b font-semibold text-xs text-gray-500 uppercase sticky top-0 bg-gray-50 py-2 z-10",children:[e.jsx("div",{children:"Code"}),e.jsx("div",{children:"Title"}),e.jsx("div",{className:"text-start",children:"Units"}),e.jsx("div",{className:"text-start",children:"Lec"}),e.jsx("div",{className:"text-start",children:"Lab"}),e.jsx("div",{className:"text-start",children:"Hrs"}),e.jsx("div",{className:"text-start",children:"Lec"}),e.jsx("div",{className:"text-start",children:"Lab"}),e.jsx("div",{children:"Pre-req"}),e.jsx("div",{})]}),e.jsx("div",{className:"space-y-2 pt-2 min-w-[920px]",children:f.map((h,l)=>e.jsxs("div",{className:`p-2 rounded-md transition-colors ${d[l]?.unitError||d[l]?.hourError?"bg-red-50 border border-red-200":""}`,children:[e.jsxs("div",{className:"grid grid-cols-[1fr,3fr,0.5fr,0.5fr,0.5fr,0.5fr,0.5fr,0.5fr,1.5fr,auto] gap-2 items-center",children:[e.jsx(x,{placeholder:"Code",value:h.code,onChange:m=>p(l,"code",m.target.value),className:"min-w-0"}),e.jsx(x,{placeholder:"Title",value:h.name,onChange:m=>p(l,"name",m.target.value),className:"min-w-0"}),e.jsx(x,{type:"number",value:h.unitsTotal||"",onChange:m=>p(l,"unitsTotal",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.unitError?"border-red-500":""}`}),e.jsx(x,{type:"number",value:h.unitsLec||"",onChange:m=>p(l,"unitsLec",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.unitError?"border-red-500":""}`}),e.jsx(x,{type:"number",value:h.unitsLab||"",onChange:m=>p(l,"unitsLab",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.unitError?"border-red-500":""}`}),e.jsx(x,{type:"number",value:h.hoursTotal||"",onChange:m=>p(l,"hoursTotal",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.hourError?"border-red-500":""}`}),e.jsx(x,{type:"number",value:h.hoursLec||"",onChange:m=>p(l,"hoursLec",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.hourError?"border-red-500":""}`}),e.jsx(x,{type:"number",value:h.hoursLab||"",onChange:m=>p(l,"hoursLab",Number(m.target.value)||0),className:`text-center min-w-0 ${d[l]?.hourError?"border-red-500":""}`}),e.jsx(x,{placeholder:"None",value:h.prerequisite,onChange:m=>p(l,"prerequisite",m.target.value),className:"min-w-0"}),e.jsx(b,{type:"button",variant:"ghost",size:"icon",onClick:()=>a(l),className:"text-red-500 h-8 w-8 shrink-0","aria-label":"Remove row",title:"Remove row",children:e.jsx(I,{size:16})})]}),(d[l]?.unitError||d[l]?.hourError)&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-xs mt-1 px-1",children:[e.jsx(V,{size:14}),e.jsxs("span",{children:[d[l].unitError," ",d[l].hourError]})]})]},l))})]}),e.jsxs(b,{type:"button",variant:"outline",onClick:E,className:"mt-4 flex items-center gap-2 self-start md:self-stretch md:w-full md:justify-center",children:[e.jsx(U,{size:16})," Add Subject Row"]}),e.jsxs(B,{className:"mt-5 pt-4 border-t flex flex-col gap-2",children:[e.jsx(O,{asChild:!0,children:e.jsx(b,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(b,{type:"submit",disabled:g,children:g?"Fix Errors to Save":"Save Curriculum"})]})]})]})})}function Be({isOpen:i,onClose:N,onSave:S,initialData:j}){const[o,f]=c.useState("");c.useEffect(()=>{i&&f(j||"")},[i,j]);const t=d=>{d.preventDefault(),S(o)};return e.jsx(q,{open:i,onOpenChange:N,children:e.jsxs(z,{className:"md:w-[90%]",children:[e.jsx(F,{children:e.jsx(M,{children:"Rename Semester"})}),e.jsxs("form",{onSubmit:t,className:"py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(y,{htmlFor:"semesterName",children:"Semester Name"}),e.jsx(x,{id:"semesterName",value:o,onChange:d=>f(d.target.value),required:!0})]}),e.jsxs(B,{className:"pt-4",children:[e.jsx(O,{asChild:!0,children:e.jsx(b,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(b,{type:"submit",children:"Save Changes"})]})]})]})})}function Ie({isOpen:i,onClose:N,onSave:S,initialData:j}){const[o,f]=c.useState({code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""}),[t,d]=c.useState(null);c.useEffect(()=>{const a=o.unitsLec+o.unitsLab>o.unitsTotal?"Lec+Lab units > Total.":null,p=o.hoursLec+o.hoursLab>o.hoursTotal?"Lec+Lab hours > Total.":null;d(a||p?{unitError:a,hourError:p}:null)},[o]),c.useEffect(()=>{i&&f(j||{code:"",name:"",unitsTotal:0,unitsLec:0,unitsLab:0,hoursTotal:0,hoursLec:0,hoursLab:0,prerequisite:""})},[i,j]);const L=(a,p)=>f(A=>({...A,[a]:p})),g=(a,p)=>L(a,Number(p)||0),E=a=>{if(a.preventDefault(),t){alert("Please fix the errors before saving.");return}S(o)};return e.jsx(q,{open:i,onOpenChange:N,children:e.jsxs(z,{className:"max-w-lg md:w-[90%]",children:[e.jsx(F,{children:e.jsx(M,{children:j?`Edit Subject: ${j.code}`:"Add New Subject"})}),e.jsxs("form",{onSubmit:E,className:"py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Course Code"}),e.jsx(x,{value:o.code,onChange:a=>L("code",a.target.value),disabled:!!j,required:!0}),!!j&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Course code cannot be edited."})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Pre-requisite"}),e.jsx(x,{value:o.prerequisite,onChange:a=>L("prerequisite",a.target.value),placeholder:"None"})]})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Descriptive Title"}),e.jsx(x,{value:o.name,onChange:a=>L("name",a.target.value),required:!0})]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsx(y,{className:"font-semibold",children:"Unit Allocation"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Total"}),e.jsx(x,{type:"number",value:o.unitsTotal||"",onChange:a=>g("unitsTotal",a.target.value),className:t?.unitError?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Lec"}),e.jsx(x,{type:"number",value:o.unitsLec||"",onChange:a=>g("unitsLec",a.target.value),className:t?.unitError?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Lab"}),e.jsx(x,{type:"number",value:o.unitsLab||"",onChange:a=>g("unitsLab",a.target.value),className:t?.unitError?"border-red-500":""})]})]})]}),t?.unitError&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-2",children:[e.jsx(V,{size:14}),t.unitError]}),e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx(y,{className:"font-semibold",children:"Hour Allocation"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Total"}),e.jsx(x,{type:"number",value:o.hoursTotal||"",onChange:a=>g("hoursTotal",a.target.value),className:t?.hourError?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Lec"}),e.jsx(x,{type:"number",value:o.hoursLec||"",onChange:a=>g("hoursLec",a.target.value),className:t?.hourError?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Lab"}),e.jsx(x,{type:"number",value:o.hoursLab||"",onChange:a=>g("hoursLab",a.target.value),className:t?.hourError?"border-red-500":""})]})]})]}),t?.hourError&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-2",children:[e.jsx(V,{size:14}),t.hourError]})]}),e.jsxs(B,{className:"mt-8 pt-4 border-t flex flex-col gap-2",children:[e.jsx(O,{asChild:!0,children:e.jsx(b,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(b,{type:"submit",disabled:!!t,children:t?"Fix Errors":"Save Subject"})]})]})]})})}function ns(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col min-h-0 bg-gray-50",children:e.jsx(fe,{})}),e.jsx("main",{className:"flex-1 min-h-0 p-4 md:p-0",children:e.jsx(ze,{})})]})}export{ns as default};
