import{j as e,g as w,d as I,U as D,m as u,r as d,A as C,B as R,X as _,f as O,C as z,h as B,P,i as T,t as j,a as p}from"./index-jewFnda3.js";import{B as F}from"./book-copy-DUANSd3I.js";import{B as X}from"./badge-Ci_bdU4p.js";import{M as U}from"./map-pin-B1QSt18C.js";import{C as V}from"./calendar-x-2-GGt9Pnz8.js";import{C as W}from"./calendar-check-DpPk0mLw.js";const H={Users:D,BookCopy:F,Building2:I,BarChart3:w},G=({data:a})=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map((s,r)=>{const t=H[s.icon]||D;return e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+r*.1},className:"bg-card p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-md bg-primary/10 text-primary",children:e.jsx(t,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.title})]})]})},s.title)})}),q=({weeklyOverviewData:a,selectedDay:s,onDaySelect:r})=>{const[t,o]=d.useState(null),i=d.useMemo(()=>Object.entries(a),[a]),m=d.useMemo(()=>Math.max(...Object.values(a),1),[a]),n=d.useMemo(()=>i.reduce((l,c)=>c[1]>l[1]?c:l)[0],[i]);return e.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-1",children:"Weekly Schedule Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Click a bar to see the detailed schedule for that day."}),e.jsx("div",{className:"flex justify-between items-end gap-3 h-48 pt-8",children:i.map(([l,c])=>e.jsxs("div",{onMouseEnter:()=>o(l),onMouseLeave:()=>o(null),onClick:()=>r(l),className:"relative flex-1 flex flex-col items-center gap-2 h-full cursor-pointer group",children:[e.jsx(C,{children:t===l&&e.jsxs(u.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute -top-8 w-max px-2 py-1 bg-foreground text-background text-xs font-bold rounded-md z-10",children:[c," classes"]})}),e.jsx(u.div,{initial:{height:0},animate:{height:`${c/m*100}%`},transition:{duration:.5,ease:"easeOut"},className:`w-full rounded-t-md transition-all duration-300 ${l===n&&c>0?"bg-amber-400":"bg-primary"} ${s&&s!==l?"opacity-40":""}`}),e.jsx("p",{className:`text-xs font-bold transition-colors ${s===l?"text-primary":"text-muted-foreground"}`,children:l})]},l))})]})},K={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday"},J=({selectedDay:a,classes:s,onClear:r})=>{const t=s.filter(i=>i.day===a),o=K[a]||"Selected Day";return e.jsxs(u.div,{layout:!0,initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-foreground",children:["Schedule for ",o]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(_,{size:18})})]}),e.jsx("div",{className:"space-y-3",children:t.length>0?t.map((i,m)=>e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*m},className:"group flex items-start gap-3 rounded-md border p-3 bg-background hover:border-primary/50",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("p",{className:"font-semibold text-foreground",children:[i.code," - ",i.title]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(O,{size:14})," ",i.facultyName]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(U,{size:14})," Room: ",i.room]})]})]}),e.jsxs(X,{variant:"outline",className:"shrink-0 font-mono",children:[e.jsx(z,{size:12,className:"mr-1.5"}),i.time]})]},i.id)):e.jsxs("div",{className:"py-10 text-center text-muted-foreground rounded-md border-2 border-dashed",children:[e.jsx(V,{size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"No classes scheduled for this day."})]})})]})};var f="Progress",v=100,[Q,he]=B(f),[Y,Z]=Q(f),k=d.forwardRef((a,s)=>{const{__scopeProgress:r,value:t=null,max:o,getValueLabel:i=ee,...m}=a;(o||o===0)&&!b(o)&&console.error(ae(`${o}`,"Progress"));const n=b(o)?o:v;t!==null&&!N(t,n)&&console.error(se(`${t}`,"Progress"));const l=N(t,n)?t:null,c=h(l)?i(l,n):void 0;return e.jsx(Y,{scope:r,value:l,max:n,children:e.jsx(P.div,{"aria-valuemax":n,"aria-valuemin":0,"aria-valuenow":h(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":A(l,n),"data-value":l??void 0,"data-max":n,...m,ref:s})})});k.displayName=f;var M="ProgressIndicator",S=d.forwardRef((a,s)=>{const{__scopeProgress:r,...t}=a,o=Z(M,r);return e.jsx(P.div,{"data-state":A(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...t,ref:s})});S.displayName=M;function ee(a,s){return`${Math.round(a/s*100)}%`}function A(a,s){return a==null?"indeterminate":a===s?"complete":"loading"}function h(a){return typeof a=="number"}function b(a){return h(a)&&!isNaN(a)&&a>0}function N(a,s){return h(a)&&!isNaN(a)&&a<=s&&a>=0}function ae(a,s){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${v}\`.`}function se(a,s){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${v} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var E=k,re=S;const $=d.forwardRef(({className:a,value:s,...r},t)=>e.jsx(E,{ref:t,className:T("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...r,children:e.jsx(re,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));$.displayName=E.displayName;const te=({facultyLoadData:a})=>e.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-foreground flex items-center gap-2 mb-4",children:[e.jsx(w,{className:"text-primary"}),"Faculty Load Distribution"]}),e.jsx("div",{className:"space-y-4",children:a.map((r,t)=>{const o=Math.min(100,r.load/20*100);return e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2+t*.1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[e.jsx("span",{className:"font-semibold text-foreground",children:r.name}),e.jsxs("span",{className:"font-mono text-muted-foreground",children:[r.load,"h / ",20,"h"]})]}),e.jsx($,{value:o})]},r.name)})})]}),L=()=>localStorage.getItem("accessToken"),oe=()=>({Authorization:`Bearer ${L()}`}),le=async()=>{if(!L())throw new Error("Authentication required.");const s={headers:oe()};try{const[r,t,o]=await Promise.all([p.get("kpi",s),p.get("weekly-schedule",s),p.get("faculty-load",s)]);return{kpiData:r.data.data.map(i=>({...i,icon:i.icon})),weeklySchedule:t.data,facultyLoad:o.data.data}}catch(r){throw console.error("Dashboard Data Fetch Error:",r),new Error("Failed to load dashboard data from the server.")}},ie=()=>e.jsxs("div",{className:"space-y-8 animate-accordion-down",children:[e.jsx("div",{className:"h-40 w-full bg-purple-200 rounded-xl shadow-lg"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,s)=>e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg border h-24",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-md mb-2"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-300 rounded"})]},s))}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-xl border h-72",children:[e.jsx("div",{className:"h-4 w-1/3 bg-gray-300 rounded mb-4"}),e.jsx("div",{className:"flex justify-between items-end gap-3 h-48 pt-8",children:Array.from({length:6}).map((a,s)=>e.jsxs("div",{className:"relative flex-1 flex flex-col items-center gap-2 h-full",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-t-md",style:{height:`${(s+1)*10}%`}}),e.jsx("div",{className:"h-3 w-8 bg-gray-300 rounded"})]},s))})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsxs("div",{className:"bg-gray-100 p-6 rounded-xl border h-72",children:[e.jsx("div",{className:"h-4 w-1/2 bg-gray-300 rounded mb-6"}),Array.from({length:3}).map((a,s)=>e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"h-3 w-3/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full"})]},s))]})})]})]});function ge(){const[a,s]=d.useState(null),[r,t]=d.useState(null),[o,i]=d.useState(!0),m=g=>{s(x=>x===g?null:g)};if(d.useEffect(()=>{(async()=>{i(!0);try{const x=await le();t(x),j.success("Dashboard data loaded.")}catch(x){console.error("Dashboard Load Error:",x),j.error(x.message||"Failed to load dashboard data.")}finally{i(!1)}})()},[]),o||!r)return e.jsx(ie,{});const{kpiData:n,weeklySchedule:l,facultyLoad:c}=r,y=l.allClasses;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-purple-600 to-fuchsia-500 text-white shadow-lg",children:e.jsx("div",{className:"relative p-6 md:p-8",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-xs font-semibold",children:[e.jsx(W,{size:14}),"Dean's Dashboard"]}),e.jsx("h1",{className:"mt-3 text-3xl md:text-4xl font-bold tracking-tight",children:"Scheduling Overview"}),e.jsx("p",{className:"text-white/80 max-w-2xl",children:"Manage and oversee all faculty schedules for the department."})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(G,{data:n}),e.jsx(q,{weeklyOverviewData:l.weeklyOverview,allClasses:y,selectedDay:a,onDaySelect:m}),e.jsx(C,{children:a&&e.jsx(J,{selectedDay:a,classes:y,onClear:()=>s(null)})})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsx(te,{facultyLoadData:c})})]})]})}export{ge as default};
