import{c as w,e as C,g as k,d as L,j as e,m as h,r as n,B as g,A,C as S,U as _,D as T,a as D}from"./index-OPaprxhi.js";import{C as F}from"./clipboard-list-Dm9D56ez.js";import{C as z,a as $,c as B,d as I,b as U}from"./card-D5eL2WsC.js";import{F as M}from"./funnel-CmN29CdF.js";import{F as E,P as O}from"./presentation-C04i84fn.js";import{L as P}from"./loader-circle-CO1KivE4.js";import{C as H}from"./circle-alert-HUqE7tsy.js";import{D as q}from"./door-closed-CgeQb0Pb.js";import{C as R}from"./chevron-up-DcQHaALJ.js";import{C as V}from"./calendar-check-Bcq8zzS3.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Y=w("calendar-clock",W);function G({counts:t,isLoading:o}){const r=[{title:"Active Faculty Today",value:t?.total_faculty_active||0,icon:C,color:"text-violet-600",bgColor:"bg-violet-100/80"},{title:"Rooms Utilized",value:t?.total_rooms_utilized||0,icon:k,color:"text-fuchsia-600",bgColor:"bg-fuchsia-100/80"},{title:"Subjects Taught",value:t?.total_subjects_taught||0,icon:L,color:"text-purple-600",bgColor:"bg-purple-100/80"},{title:"Classes Scheduled",value:t?.total_scheduled_classes||0,icon:F,color:"text-sky-600",bgColor:"bg-sky-100/80"}];return o?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsxs("div",{className:"bg-card p-5 rounded-xl border border-border shadow-sm flex items-center gap-5 h-[100px] animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-muted/50"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-6 w-1/3 bg-muted/50 rounded"}),e.jsx("div",{className:"h-4 w-2/3 bg-muted/50 rounded"})]})]},a))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((a,l)=>e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+l*.1,duration:.4,ease:"easeOut"},className:"bg-card p-5 rounded-xl border border-border shadow-sm flex items-center gap-5 transition-transform duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:`p-3 rounded-lg ${a.bgColor}`,children:e.jsx(a.icon,{className:a.color,size:28})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.title})]})]},l))})}const b=[{border:"border-sky-500",bg:"bg-sky-50",text:"text-sky-600"},{border:"border-amber-500",bg:"bg-amber-50",text:"text-amber-600"},{border:"border-emerald-500",bg:"bg-emerald-50",text:"text-emerald-600"},{border:"border-indigo-500",bg:"bg-indigo-50",text:"text-indigo-600"},{border:"border-fuchsia-500",bg:"bg-fuchsia-50",text:"text-fuchsia-600"},{border:"border-orange-500",bg:"bg-orange-50",text:"text-orange-600"},{border:"border-rose-500",bg:"bg-rose-50",text:"text-rose-600"}],u=3,f=t=>{if(!t)return"";const[o,r]=t.split(":"),a=new Date;return a.setHours(parseInt(o),parseInt(r)),a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},J=({schedules:t,isLoading:o})=>{const[r,a]=n.useState(!1),[l,d]=n.useState("ALL"),[i,p]=n.useState("ALL"),j=n.useMemo(()=>{const s=t.map(c=>c.faculty_name).filter(Boolean);return Array.from(new Set(s)).sort()},[t]),m=n.useMemo(()=>t.filter(s=>{const c=l==="ALL"||s.faculty_name===l,x=i==="ALL"||s.type===i;return c&&x}),[t,l,i]),v=r?m:m.slice(0,u);return e.jsxs(z,{className:"shadow-sm rounded-xl h-full flex flex-col border border-border",children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(B,{className:"text-xl font-bold flex items-center gap-3 text-foreground",children:[e.jsx("span",{className:"flex items-center justify-center h-8 w-8 rounded-lg bg-primary/10 text-primary",children:e.jsx(Y,{size:18})}),"Today's Schedule"]}),e.jsx(I,{className:"mt-1",children:o?"Checking for active classes...":`Overview of ${m.length} active classes.`})]}),!o&&t.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"h-9 w-[140px] appearance-none rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-8",value:l,onChange:s=>{d(s.target.value),a(!1)},children:[e.jsx("option",{value:"ALL",children:"All Faculty"}),j.map((s,c)=>e.jsx("option",{value:s,children:s},c))]}),e.jsx(M,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"h-9 w-[130px] appearance-none rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-8",value:i,onChange:s=>{p(s.target.value),a(!1)},children:[e.jsx("option",{value:"ALL",children:"All Types"}),e.jsx("option",{value:"LEC",children:"Lecture"}),e.jsx("option",{value:"LAB",children:"Laboratory"})]}),i==="LAB"?e.jsx(E,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none"}):e.jsx(O,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none"})]})]})]})}),e.jsx(U,{className:"flex-grow p-4 md:p-6 pt-0",children:o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 gap-3 text-muted-foreground",children:[e.jsx(P,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm",children:"Loading schedule details..."})]}):m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground bg-muted/20 rounded-lg border border-dashed",children:[e.jsx(H,{className:"h-10 w-10 mb-2 opacity-50"}),e.jsx("p",{children:t.length===0?"No classes scheduled for today.":"No classes match your selected filters."}),t.length>0&&e.jsx(g,{variant:"link",onClick:()=>{d("ALL"),p("ALL")},className:"mt-2 h-auto p-0",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(A,{mode:"popLayout",children:v.map((s,c)=>{const x=b[c%b.length],y=f(s.start_time),N=f(s.end_time);return e.jsx(h.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95,transition:{duration:.2}},transition:{duration:.3},children:e.jsxs("div",{className:`flex flex-col p-4 rounded-lg border-l-4 h-full ${x.border} ${x.bg} shadow-sm transition-all hover:shadow-md`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:`font-bold text-sm ${x.text} uppercase tracking-tight`,children:s.subject_code}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold bg-white/60 ${x.text}`,children:s.type})]}),e.jsx("p",{className:"text-xs font-medium text-foreground/80 line-clamp-1 mt-0.5",title:s.description,children:s.description})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{size:14,className:"mr-2 flex-shrink-0 text-foreground/60"}),e.jsxs("span",{className:"font-medium text-foreground/90",children:[y," - ",N]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:14,className:"mr-2 flex-shrink-0 text-foreground/60"}),e.jsx("span",{children:s.room_number})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{size:14,className:"mr-2 flex-shrink-0 text-foreground/60"}),e.jsx("span",{children:s.faculty_name})]})]})]})},s.id)})})})}),!o&&m.length>u&&e.jsx("div",{className:"p-4 mt-auto border-t border-border",children:e.jsxs(g,{variant:"ghost",className:"w-full text-primary hover:text-primary hover:bg-primary/10 transition-colors",onClick:()=>a(!r),children:[r?"Show Less":`See ${m.length-u} more`,r?e.jsx(R,{size:16,className:"ml-2"}):e.jsx(T,{size:16,className:"ml-2"})]})})]})};function le(){const[t,o]=n.useState(null),[r,a]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("accessToken");if(!d)return;const i=await D.get("dashboard/today-statistics",{headers:{Authorization:`Bearer ${d}`}});i.data.success&&o(i.data)}catch(d){console.error("Error fetching dashboard data:",d)}finally{a(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-violet-600 via-purple-600 to-fuchsia-600 text-white shadow-lg mb-8",children:[e.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 opacity-50 blur-2xl"}),e.jsx("div",{className:"absolute -left-10 -bottom-10 h-40 w-40 rounded-full bg-white/10 opacity-50 blur-2xl"}),e.jsxs("div",{className:"relative p-6 md:p-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-xs font-semibold",children:[e.jsx(V,{size:14}),"Admin Dashboard"]}),e.jsx("h1",{className:"mt-3 text-3xl md:text-4xl font-bold tracking-tight",children:"Welcome Back, Admin!"}),e.jsx("p",{className:"text-white/80 max-w-2xl mt-2",children:r?"Loading schedule data...":`Here's a snapshot of today's schedule (${t?.day}, ${t?.date}).`})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(G,{counts:t?.counts,isLoading:r})}),e.jsx("div",{children:e.jsx(J,{schedules:t?.details||[],isLoading:r})})]})}export{le as default};
