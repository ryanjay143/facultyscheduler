import{j as e,g as f,d as N,U as j,m as c,r as n,A as b,B as w,X as D,f as k,C,t as y,a as g}from"./index-CrtpwQ5O.js";import{B as M}from"./book-copy-CBLLZpgV.js";import{B as S}from"./badge-gfnmk8ZU.js";import{M as A}from"./map-pin-xLqOqnRs.js";import{C as L}from"./calendar-x-2-CzqrgM6f.js";import{P as E}from"./progress-CsSe7uGs.js";import{C as z}from"./calendar-check-_KhhdP3d.js";const B={Users:j,BookCopy:M,Building2:N,BarChart3:f},O=({data:a})=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map((s,r)=>{const d=B[s.icon]||j;return e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+r*.1},className:"bg-card p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-md bg-primary/10 text-primary",children:e.jsx(d,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.title})]})]})},s.title)})}),F=({weeklyOverviewData:a,selectedDay:s,onDaySelect:r})=>{const[d,o]=n.useState(null),t=n.useMemo(()=>Object.entries(a),[a]),x=n.useMemo(()=>Math.max(...Object.values(a),1),[a]),h=n.useMemo(()=>t.reduce((l,i)=>i[1]>l[1]?i:l)[0],[t]);return e.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-1",children:"Weekly Schedule Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Click a bar to see the detailed schedule for that day."}),e.jsx("div",{className:"flex justify-between items-end gap-3 h-48 pt-8",children:t.map(([l,i])=>e.jsxs("div",{onMouseEnter:()=>o(l),onMouseLeave:()=>o(null),onClick:()=>r(l),className:"relative flex-1 flex flex-col items-center gap-2 h-full cursor-pointer group",children:[e.jsx(b,{children:d===l&&e.jsxs(c.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute -top-8 w-max px-2 py-1 bg-foreground text-background text-xs font-bold rounded-md z-10",children:[i," classes"]})}),e.jsx(c.div,{initial:{height:0},animate:{height:`${i/x*100}%`},transition:{duration:.5,ease:"easeOut"},className:`w-full rounded-t-md transition-all duration-300 ${l===h&&i>0?"bg-amber-400":"bg-primary"} ${s&&s!==l?"opacity-40":""}`}),e.jsx("p",{className:`text-xs font-bold transition-colors ${s===l?"text-primary":"text-muted-foreground"}`,children:l})]},l))})]})},T={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday"},I=({selectedDay:a,classes:s,onClear:r})=>{const d=s.filter(t=>t.day===a),o=T[a]||"Selected Day";return e.jsxs(c.div,{layout:!0,initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-foreground",children:["Schedule for ",o]}),e.jsx(w,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(D,{size:18})})]}),e.jsx("div",{className:"space-y-3",children:d.length>0?d.map((t,x)=>e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*x},className:"group flex items-start gap-3 rounded-md border p-3 bg-background hover:border-primary/50",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("p",{className:"font-semibold text-foreground",children:[t.code," - ",t.title]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(k,{size:14})," ",t.facultyName]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(A,{size:14})," Room: ",t.room]})]})]}),e.jsxs(S,{variant:"outline",className:"shrink-0 font-mono",children:[e.jsx(C,{size:12,className:"mr-1.5"}),t.time]})]},t.id)):e.jsxs("div",{className:"py-10 text-center text-muted-foreground rounded-md border-2 border-dashed",children:[e.jsx(L,{size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"No classes scheduled for this day."})]})})]})},P=({facultyLoadData:a})=>e.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-foreground flex items-center gap-2 mb-4",children:[e.jsx(f,{className:"text-primary"}),"Faculty Load Distribution"]}),e.jsx("div",{className:"space-y-4",children:a.map((r,d)=>{const o=Math.min(100,r.load/20*100);return e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2+d*.1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[e.jsx("span",{className:"font-semibold text-foreground",children:r.name}),e.jsxs("span",{className:"font-mono text-muted-foreground",children:[r.load,"h / ",20,"h"]})]}),e.jsx(E,{value:o})]},r.name)})})]}),v=()=>localStorage.getItem("accessToken"),R=()=>({Authorization:`Bearer ${v()}`}),_=async()=>{if(!v())throw new Error("Authentication required.");const s={headers:R()};try{const[r,d,o]=await Promise.all([g.get("kpi",s),g.get("weekly-schedule",s),g.get("faculty-load",s)]);return{kpiData:r.data.data.map(t=>({...t,icon:t.icon})),weeklySchedule:d.data,facultyLoad:o.data.data}}catch(r){throw console.error("Dashboard Data Fetch Error:",r),new Error("Failed to load dashboard data from the server.")}},$=()=>e.jsxs("div",{className:"space-y-8 animate-accordion-down",children:[e.jsx("div",{className:"h-40 w-full bg-purple-200 rounded-xl shadow-lg"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,s)=>e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg border h-24",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-md mb-2"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-300 rounded"})]},s))}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-xl border h-72",children:[e.jsx("div",{className:"h-4 w-1/3 bg-gray-300 rounded mb-4"}),e.jsx("div",{className:"flex justify-between items-end gap-3 h-48 pt-8",children:Array.from({length:6}).map((a,s)=>e.jsxs("div",{className:"relative flex-1 flex flex-col items-center gap-2 h-full",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-t-md",style:{height:`${(s+1)*10}%`}}),e.jsx("div",{className:"h-3 w-8 bg-gray-300 rounded"})]},s))})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsxs("div",{className:"bg-gray-100 p-6 rounded-xl border h-72",children:[e.jsx("div",{className:"h-4 w-1/2 bg-gray-300 rounded mb-6"}),Array.from({length:3}).map((a,s)=>e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"h-3 w-3/4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full"})]},s))]})})]})]});function J(){const[a,s]=n.useState(null),[r,d]=n.useState(null),[o,t]=n.useState(!0),x=u=>{s(m=>m===u?null:u)};if(n.useEffect(()=>{(async()=>{t(!0);try{const m=await _();d(m),y.success("Dashboard data loaded.")}catch(m){console.error("Dashboard Load Error:",m),y.error(m.message||"Failed to load dashboard data.")}finally{t(!1)}})()},[]),o||!r)return e.jsx($,{});const{kpiData:h,weeklySchedule:l,facultyLoad:i}=r,p=l.allClasses;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-purple-600 to-fuchsia-500 text-white shadow-lg",children:e.jsx("div",{className:"relative p-6 md:p-8",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-xs font-semibold",children:[e.jsx(z,{size:14}),"Dean's Dashboard"]}),e.jsx("h1",{className:"mt-3 text-3xl md:text-4xl font-bold tracking-tight",children:"Scheduling Overview"}),e.jsx("p",{className:"text-white/80 max-w-2xl",children:"Manage and oversee all faculty schedules for the department."})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(O,{data:h}),e.jsx(F,{weeklyOverviewData:l.weeklyOverview,allClasses:p,selectedDay:a,onDaySelect:x}),e.jsx(b,{children:a&&e.jsx(I,{selectedDay:a,classes:p,onClear:()=>s(null)})})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsx(P,{facultyLoadData:i})})]})]})}export{J as default};
