import{c as re,j as e,C as xe,r as l,a as Q,t as oe,B as Z,R as qe,k as Ge,l as Ft,n as q,o as ee,i as se,p as J,h as Wt,P as ie,U as Qe,d as Ze,A as zt}from"./index-OPaprxhi.js";import{S as De}from"./sweetalert2.esm.all-ePrzfkxH.js";import{I as fe}from"./input-BYhbHLVf.js";import{S as X,D as Ke,a as Je,b as et,c as tt,d as Vt,e as rt,f as st}from"./dialog-B7vVHQq0.js";import{B as le}from"./badge-CTm3coYD.js";import{C as Ut}from"./calendar-off-D7pN-Agb.js";import{L as Ne}from"./label-s_wDV_Zn.js";import{C as Ht}from"./chevron-right-B-LvHPFy.js";import{C as ae}from"./check-fQlgCkkG.js";import{F as Bt}from"./funnel-CmN29CdF.js";import{S as nt}from"./search-B-KhkR3H.js";import{C as Yt}from"./circle-check-big-BRgBpBAx.js";import{L as he}from"./loader-circle-CO1KivE4.js";import{C as Xt}from"./calendar-x-2-yaKPduVT.js";import{T as qt}from"./triangle-alert-DHqV5C-q.js";import{u as Gt,c as Qt}from"./Combination-N5JmmW9F.js";import{T as Zt,a as Kt,b as Jt,c as er}from"./tabs-DMNIAjGF.js";import{C as tr,b as rr}from"./card-D5eL2WsC.js";import{C as sr}from"./circle-alert-HUqE7tsy.js";import{C as nr}from"./calendar-check-Bcq8zzS3.js";import{P as or,F as ar}from"./presentation-C04i84fn.js";import{M as lr}from"./map-pin-CstDMQbc.js";import{C as ir}from"./circle-plus-B_3saWs4.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],dr=re("circle-arrow-down",cr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mr=re("circle-check",ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hr=re("info",fr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],pr=re("list",xr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],br=re("search-x",gr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ie=re("trending-up",vr);function jr(){return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg border flex",children:[e.jsx("div",{className:"relative flex-shrink-0 w-1/3 bg-slate-50 flex items-center justify-center p-6",children:e.jsx(X,{className:"w-24 h-24 rounded-full"})}),e.jsxs("div",{className:"flex-grow flex flex-col p-5 w-2/3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{className:"h-6 w-4/5"}),e.jsx(X,{className:"h-4 w-3/5"})]}),e.jsx("div",{className:"flex-grow"}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(X,{className:"h-3 w-1/3"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(X,{className:"h-5 w-20 rounded-full"}),e.jsx(X,{className:"h-5 w-24 rounded-full"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(X,{className:"h-9 w-full rounded-md"}),e.jsx(X,{className:"h-9 w-full rounded-md"})]})]})]})}const yr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Oe=t=>{if(!t||!t.includes(":"))return"Invalid Time";const[r,s]=t.split(":");let n=parseInt(r,10);const o=n>=12?"PM":"AM";return n=n%12||12,`${n}:${s} ${o}`};function wr({schedule:t}){const r=new Date().toLocaleString("en-US",{weekday:"long"});return e.jsx("div",{className:"bg-background p-2 rounded-lg border max-h-64 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-1 gap-2",children:yr.map(s=>{const n=t[s],o=n&&n.length>0,a=s===r;return e.jsxs("div",{className:`rounded-md p-3 flex flex-col min-h-[80px] transition-all duration-200 ${a?"bg-primary/10 border-2 border-primary/80":"bg-muted/50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:`font-bold text-sm ${a?"text-primary":"text-foreground"}`,children:s}),a&&e.jsx(le,{variant:"default",className:"text-[10px] h-5",children:"TODAY"})]}),o?e.jsx("div",{className:"space-y-1.5 flex-grow",children:n.map((d,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-3.5 w-3.5 text-muted-foreground flex-shrink-0"}),e.jsxs("p",{className:"font-mono text-xs text-foreground font-medium",children:[Oe(d.start)," - ",Oe(d.end)]})]},c))}):e.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow text-center text-slate-400",children:[e.jsx(Ut,{className:"h-5 w-5 mb-1"}),e.jsx("p",{className:"text-xs italic",children:"Not available"})]})]},s)})})})}const B=t=>{if(!t)return 0;const[r,s]=t.split(":").map(Number);return r*60+s},Sr=t=>{const r=Math.floor(t/60),s=t%60;return`${String(r).padStart(2,"0")}:${String(s).padStart(2,"0")}`},Nr=(t,r)=>{if(!t)return"";const s=B(t)+r,n=Math.max(0,Math.min(1439,s));return Sr(n)},Fe=t=>{if(!t)return"";const r=t.split(":");if(r.length<2)return t;const s=parseInt(r[0]||"0",10),n=parseInt(r[1]||"0",10),o=s>=12?"PM":"AM";return`${s%12===0?12:s%12}:${String(n).padStart(2,"0")} ${o}`},Cr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function _r({isOpen:t,onClose:r,faculty:s,availableSubjects:n=[],onAssign:o}){const[a,d]=l.useState(1),[c,u]=l.useState(""),[i,x]=l.useState(null),[m,f]=l.useState({lec:{day:"",startTime:"",endTime:""},lab:{day:"",startTime:"",endTime:""}}),[p,b]=l.useState({lec:null,lab:null}),[w,_]=l.useState({lec:[],lab:[]}),[k,I]=l.useState({lec:!1,lab:!1}),[P,V]=l.useState({lec:null,lab:null}),[T,F]=l.useState({}),[Y,N]=l.useState(!0),[v,S]=l.useState(!1),$=()=>{d(1),u(""),x(null),f({lec:{day:"",startTime:"",endTime:""},lab:{day:"",startTime:"",endTime:""}}),b({lec:null,lab:null}),_({lec:[],lab:[]}),V({lec:null,lab:null}),S(!1)};l.useEffect(()=>{t&&s&&(async()=>{$(),N(!0);const j=localStorage.getItem("accessToken");if(!j){N(!1);return}try{const y=await Q.get(`/faculties/${s.id}/availability`,{headers:{Authorization:`Bearer ${j}`}});F(y.data)}catch{F({})}finally{N(!1)}})()},[t,s]),l.useEffect(()=>{i&&d(2)},[i]),l.useEffect(()=>{const h=(j,y)=>{const{day:g,startTime:A,endTime:C}=m[j];if(!A||!C||!i||!g||y===0)return null;const E=B(A),R=B(C),O=y*60,W=R-E;if(E>=R)return"End time must be after start time.";if(W>O)return`Duration cannot exceed ${y} hour(s).`;const L=T[g];return L?.length?L.some(Me=>E>=B(Me.start)&&R<=B(Me.end))?null:"Time is outside faculty's availability.":"Faculty is not available on this day."};i&&V({lec:h("lec",i.total_lec_hrs??0),lab:h("lab",i.total_lab_hrs??0)})},[m,i,T]);const U=l.useCallback(async h=>{const j=m[h];if(!j.day||!j.startTime||!j.endTime||P[h]){_(g=>({...g,[h]:[]}));return}I(g=>({...g,[h]:!0}));const y=localStorage.getItem("accessToken");if(!y){I(g=>({...g,[h]:!1}));return}try{const A=(await Q.get("/rooms/availabilities",{headers:{Authorization:`Bearer ${y}`},params:{day:j.day,start_time:j.startTime,end_time:j.endTime,type:h==="lec"?"Lecture":"Laboratory"}})).data.rooms||[],C=await Promise.all(A.map(async E=>{try{const R=await Q.get(`/rooms/${E.id}/availabilities`,{headers:{Authorization:`Bearer ${y}`}});return{...E,availabilities:R.data.availabilities||[]}}catch{return{...E,availabilities:[]}}}));_(E=>({...E,[h]:C}))}catch{oe.error(`Failed to fetch available ${h} rooms.`),_(A=>({...A,[h]:[]}))}finally{I(g=>({...g,[h]:!1}))}},[m,P]),H=l.useMemo(()=>(i?.total_lec_hrs??0)>0?m.lec.day&&m.lec.startTime&&m.lec.endTime&&!P.lec:!0,[m.lec,P.lec,i]),G=l.useMemo(()=>(i?.total_lab_hrs??0)>0?m.lab.day&&m.lab.startTime&&m.lab.endTime&&!P.lab:!0,[m.lab,P.lab,i]);l.useEffect(()=>{H&&(i?.total_lec_hrs??0)>0&&U("lec")},[H,m.lec,i,U]),l.useEffect(()=>{G&&(i?.total_lab_hrs??0)>0&&U("lab")},[G,m.lab,i,U]),l.useEffect(()=>{i||d(1)},[i]);const M=l.useMemo(()=>c.trim()?n.filter(h=>h.subject_code.toLowerCase().includes(c.toLowerCase())||h.des_title.toLowerCase().includes(c.toLowerCase())):n,[n,c]),ne=(h,j,y)=>{f(g=>({...g,[h]:{...g[h],[j]:y}})),b(g=>({...g,[h]:null}))},we=async()=>{if(!i)return;const h=[];if((i.total_lec_hrs??0)>0){const{day:j,startTime:y,endTime:g}=m.lec;if(!j||!y||!g||!p.lec){oe.error("Incomplete lecture schedule or room selection.");return}h.push({type:"LEC",day:j,time:`${y}-${g}`,roomId:p.lec})}if((i.total_lab_hrs??0)>0){const{day:j,startTime:y,endTime:g}=m.lab;if(!j||!y||!g||!p.lab){oe.error("Incomplete laboratory schedule or room selection.");return}h.push({type:"LAB",day:j,time:`${y}-${g}`,roomId:p.lab})}S(!0);try{const j=localStorage.getItem("accessToken"),y={facultyId:s.id,subjectId:i.id,schedules:h},g=await Q.post("faculty-loading/assign",y,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});g.data.success&&(oe.success(g.data.message||"Subject assigned successfully!"),o(s.id,i.id,h),r())}catch(j){console.error("Assignment Error:",j);const y=j.response?.data?.message||"Failed to assign subject. Please check conflicts.";oe.error(y)}finally{S(!1)}},de=(i?.total_lec_hrs??0)>0?!!p.lec:!0,ue=(i?.total_lab_hrs??0)>0?!!p.lab:!0,It=!i||!H||!G||!de||!ue||v,Ot=Object.values(T).some(h=>h.length>0),$e=({type:h,hours:j})=>{const y=l.useMemo(()=>{const g=m[h].day;if(!g||!T[g]?.length)return{min:void 0,max:void 0};const A=T[g],C=A.reduce((R,O)=>O.start<R?O.start:R,A[0].start),E=A.reduce((R,O)=>O.end>R?O.end:R,A[0].end);return{min:C,max:E}},[m[h].day,T]);return e.jsxs("div",{className:"pt-4 border-t space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-md text-foreground",children:[h==="lec"?"Lecture":"Laboratory"," Schedule (",j," hours)"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx(Ne,{htmlFor:`${h}-day`,children:"Day of Class"}),e.jsxs("select",{id:`${h}-day`,value:m[h].day,onChange:g=>ne(h,"day",g.target.value),className:"w-full mt-1 p-2 border rounded-md bg-background disabled:opacity-50",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a day"}),Cr.map(g=>e.jsxs("option",{value:g,disabled:!T[g]?.length,children:[g," ",!T[g]?.length&&"(Unavailable)"]},g))]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ne,{htmlFor:`${h}-start-time`,className:"text-xs font-semibold text-muted-foreground",children:"Start Time"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:`${h}-start-time`,type:"time",value:m[h].startTime,onChange:g=>ne(h,"startTime",g.target.value),className:"pl-9",step:"1800",min:y.min,max:y.max,disabled:!m[h].day})]})]}),e.jsxs("div",{children:[e.jsx(Ne,{htmlFor:`${h}-end-time`,className:"text-xs font-semibold text-muted-foreground",children:"End Time"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:`${h}-end-time`,type:"time",value:m[h].endTime,onChange:g=>ne(h,"endTime",g.target.value),className:"pl-9",step:"1800",min:y.min,max:y.max,disabled:!m[h].day})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:(()=>{const g=A=>{if(!A)return"--:--";const C=A.split(":");return`${C[0]?.padStart(2,"0")}:${C[1]?.padStart(2,"0")}`};return`Window: ${g(y.min)} - ${g(y.max)}`})()}),(j??0)>0&&m[h].startTime&&e.jsxs(Z,{type:"button",size:"sm",variant:"outline",onClick:()=>f(g=>({...g,[h]:{...g[h],endTime:Nr(g[h].startTime,(j||0)*60)}})),children:["Auto-fill end (+",j,"h)"]})]}),P[h]&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-destructive/10 border-destructive/30 rounded-lg text-destructive text-sm",children:[e.jsx(qt,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("p",{children:P[h]})]})]})},ke=({type:h})=>e.jsx("div",{className:"pt-4 border-t space-y-3",children:k[h]?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(he,{className:"h-6 w-6 animate-spin text-primary"})}):(()=>{const j=m[h].day||"",y=m[h].startTime||"",g=m[h].endTime||"",A=j&&y&&g?w[h].filter(C=>{const E=h==="lec"?"Lecture":"Laboratory";return C.type!==E?!1:(C.availabilities||[]).filter(W=>(W.day||"").toString().toLowerCase()===j.toString().toLowerCase()).some(W=>{const L=W.start_time??W.start??"",Se=W.end_time??W.end??"";return!L||!Se?!1:B(L)<=B(y)&&B(Se)>=B(g)})}):w[h].filter(C=>C.type===(h==="lec"?"Lecture":"Laboratory"));return A.length===0?j?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No available rooms found."}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select day to see availability"}):e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto pr-2 -mr-2",children:A.map(C=>{const E=C.availabilities||[],R=j,O=E.filter(L=>(L.day||"").toString().toLowerCase()===R.toString().toLowerCase()),W=O.length>0?O.map(L=>`${Fe(L.start_time??L.start)} - ${Fe(L.end_time??L.end)}`).join(", "):"No data";return e.jsxs("button",{onClick:()=>b(L=>({...L,[h]:C.id})),className:`p-2 border rounded-md text-left transition-all relative ${p[h]===C.id?"bg-primary/10 border-primary shadow-sm":"bg-background hover:border-primary/50"}`,children:[p[h]===C.id&&e.jsx(ae,{className:"h-4 w-4 text-primary absolute top-2 right-2"}),e.jsx("p",{className:"font-semibold text-sm",children:C.roomNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cap: ",C.capacity??"--"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 truncate",children:m[h].day?`Avail: ${W}`:"Select day"})]},C.id)})})})()});return e.jsx(Ke,{open:t,onOpenChange:r,children:e.jsxs(Je,{className:"max-w-7xl w-[96%] h-[92vh] flex flex-col p-0",children:[e.jsx(et,{className:"p-6 pb-4 border-b bg-gradient-to-r from-indigo-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(tt,{className:"text-2xl font-bold tracking-tight",children:"Assign Subject"}),e.jsxs(Vt,{children:["Assign a subject to ",e.jsx("span",{className:"font-semibold text-foreground",children:s.name}),"."]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:`h-6 px-2 rounded-full flex items-center gap-1 ${i?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:[e.jsx("span",{className:"font-semibold",children:"1"}),e.jsx("span",{children:"Select"})]}),e.jsx(Ht,{className:"w-4 h-4"}),e.jsxs("div",{className:`h-6 px-2 rounded-full flex items-center gap-1 ${a>=2?de&&ue?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700":"bg-muted text-muted-foreground"}`,children:[e.jsx("span",{className:"font-semibold",children:"2"}),e.jsx("span",{children:"Details"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 flex-grow overflow-y-auto px-6 py-6 bg-muted/30",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center font-bold text-lg transition-colors ${i?"bg-green-500 text-white":"bg-primary text-primary-foreground"}`,children:i?e.jsx(ae,{className:"h-5 w-5"}):"1"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Select Subject"})]}),e.jsxs(Z,{size:"sm",variant:"outline",className:"hidden md:inline-flex",children:[e.jsx(Bt,{className:"mr-2 h-4 w-4"})," Filter"]})]}),e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(fe,{placeholder:"Search...",value:c,onChange:h=>u(h.target.value),className:"pl-10 bg-background"})]})}),e.jsx("div",{className:"flex-grow overflow-y-auto space-y-2 -mr-2 pr-2",children:M.length>0?M.map(h=>e.jsxs("button",{onClick:()=>x(h),className:`w-full text-left p-3 rounded-md border transition-all duration-200 relative ${i?.id===h.id?"bg-primary/10 border-primary shadow-sm":"bg-background hover:border-primary/50 hover:bg-primary/5"}`,children:[i?.id===h.id&&e.jsx(Yt,{className:"h-5 w-5 text-primary absolute top-3 right-3"}),e.jsx("p",{className:"font-semibold text-foreground pr-6",children:h.subject_code}),e.jsx("p",{className:"text-sm text-muted-foreground truncate mb-2",children:h.des_title}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded",children:["Lec: ",h.total_lec_hrs??0]}),e.jsxs("span",{className:"bg-amber-50 text-amber-700 px-2 py-0.5 rounded",children:["Lab: ",h.total_lab_hrs??0]})]})]},h.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground rounded-lg bg-background border-2 border-dashed p-4",children:[e.jsx(br,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm",children:"No subjects found"})]})})]})]}),e.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex flex-col transition-all ${a<2&&"opacity-50 pointer-events-none"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center font-bold text-lg transition-colors ${a>=2&&H&&G?"bg-green-500 text-white":a>=2?"bg-primary text-primary-foreground":"bg-muted-foreground/30 text-muted-foreground"}`,children:a>=2&&H&&G?e.jsx(ae,{className:"h-5 w-5"}):"2"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Set Schedule"})]}),a>=2&&e.jsx("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:Y?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(he,{className:"h-8 w-8 animate-spin text-primary"})}):Ot?e.jsxs("div",{className:"space-y-4",children:[e.jsx(wr,{schedule:T}),(i?.total_lec_hrs??0)>0&&e.jsx($e,{type:"lec",hours:i?.total_lec_hrs??0}),(i?.total_lab_hrs??0)>0&&e.jsx($e,{type:"lab",hours:i?.total_lab_hrs??0})]}):e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-destructive/10 border-destructive/30 rounded-lg text-destructive",children:[e.jsx(Xt,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:"No faculty availability found."})]})})]}),e.jsxs("div",{className:`flex flex-col gap-4 h-full ${a<2&&"opacity-50 pointer-events-none"}`,children:[(i?.total_lec_hrs??0)>0&&e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col flex-1 min-h-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center font-bold text-lg transition-colors ${a>=3&&de?"bg-green-500 text-white":a>=3?"bg-primary text-primary-foreground":"bg-muted-foreground/30 text-muted-foreground"}`,children:a>=3&&de?e.jsx(ae,{className:"h-5 w-5"}):"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Lecture Room"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select room for lecture"})]})]}),a>=2&&e.jsx("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:e.jsx(ke,{type:"lec"})})]}),(i?.total_lab_hrs??0)>0&&e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col flex-1 min-h-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center font-bold text-lg transition-colors ${a>=3&&ue?"bg-green-500 text-white":a>=3?"bg-primary text-primary-foreground":"bg-muted-foreground/30 text-muted-foreground"}`,children:a>=3&&ue?e.jsx(ae,{className:"h-5 w-5"}):"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Laboratory Room"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select room for lab"})]})]}),a>=2&&e.jsx("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:e.jsx(ke,{type:"lab"})})]}),(i?.total_lec_hrs??0)===0&&(i?.total_lab_hrs??0)===0&&e.jsx("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col items-center justify-center h-full text-muted-foreground",children:e.jsx("p",{children:"Select a subject to view room options."})})]})]}),e.jsxs(rt,{className:"p-6 pt-4 border-t bg-background",children:[e.jsx(st,{asChild:!0,children:e.jsx(Z,{variant:"outline",disabled:v,children:"Cancel"})}),e.jsx(Z,{onClick:we,disabled:It,children:v?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"})," Assigning..."]}):"Assign Subject"})]})]})})}function Ar(t,r=[]){let s=[];function n(a,d){const c=l.createContext(d);c.displayName=a+"Context";const u=s.length;s=[...s,d];const i=m=>{const{scope:f,children:p,...b}=m,w=f?.[t]?.[u]||c,_=l.useMemo(()=>b,Object.values(b));return e.jsx(w.Provider,{value:_,children:p})};i.displayName=a+"Provider";function x(m,f){const p=f?.[t]?.[u]||c,b=l.useContext(p);if(b)return b;if(d!==void 0)return d;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[i,x]}const o=()=>{const a=s.map(d=>l.createContext(d));return function(c){const u=c?.[t]||a;return l.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return o.scopeName=t,[n,Tr(o,...r)]}function Tr(...t){const r=t[0];if(t.length===1)return r;const s=()=>{const n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const d=n.reduce((c,{useScope:u,scopeName:i})=>{const m=u(a)[`__scope${i}`];return{...c,...m}},{});return l.useMemo(()=>({[`__scope${r.scopeName}`]:d}),[d])}};return s.scopeName=r.scopeName,s}var Er=Symbol.for("react.lazy"),pe=qe[" use ".trim().toString()];function Rr(t){return typeof t=="object"&&t!==null&&"then"in t}function ot(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Er&&"_payload"in t&&Rr(t._payload)}function Pr(t){const r=Lr(t),s=l.forwardRef((n,o)=>{let{children:a,...d}=n;ot(a)&&typeof pe=="function"&&(a=pe(a._payload));const c=l.Children.toArray(a),u=c.find(kr);if(u){const i=u.props.children,x=c.map(m=>m===u?l.Children.count(i)>1?l.Children.only(null):l.isValidElement(i)?i.props.children:null:m);return e.jsx(r,{...d,ref:o,children:l.isValidElement(i)?l.cloneElement(i,void 0,x):null})}return e.jsx(r,{...d,ref:o,children:a})});return s.displayName=`${t}.Slot`,s}function Lr(t){const r=l.forwardRef((s,n)=>{let{children:o,...a}=s;if(ot(o)&&typeof pe=="function"&&(o=pe(o._payload)),l.isValidElement(o)){const d=Dr(o),c=Mr(a,o.props);return o.type!==l.Fragment&&(c.ref=n?Ge(n,d):d),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var $r=Symbol("radix.slottable");function kr(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$r}function Mr(t,r){const s={...r};for(const n in r){const o=t[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?s[n]=(...c)=>{const u=a(...c);return o(...c),u}:o&&(s[n]=o):n==="style"?s[n]={...o,...a}:n==="className"&&(s[n]=[o,a].filter(Boolean).join(" "))}return{...t,...s}}function Dr(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Ir=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=Ir.reduce((t,r)=>{const s=Pr(`Primitive.${r}`),n=l.forwardRef((o,a)=>{const{asChild:d,...c}=o,u=d?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...c,ref:a})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Ce={exports:{}},_e={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We;function Or(){if(We)return _e;We=1;var t=Ft();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var s=typeof Object.is=="function"?Object.is:r,n=t.useState,o=t.useEffect,a=t.useLayoutEffect,d=t.useDebugValue;function c(m,f){var p=f(),b=n({inst:{value:p,getSnapshot:f}}),w=b[0].inst,_=b[1];return a(function(){w.value=p,w.getSnapshot=f,u(w)&&_({inst:w})},[m,p,f]),o(function(){return u(w)&&_({inst:w}),m(function(){u(w)&&_({inst:w})})},[m]),d(p),p}function u(m){var f=m.getSnapshot;m=m.value;try{var p=f();return!s(m,p)}catch{return!0}}function i(m,f){return f()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?i:c;return _e.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,_e}var ze;function Fr(){return ze||(ze=1,Ce.exports=Or()),Ce.exports}var Wr=Fr();function zr(){return Wr.useSyncExternalStore(Vr,()=>!0,()=>!1)}function Vr(){return()=>{}}var Te="Avatar",[Ur,Zs]=Ar(Te),[Hr,at]=Ur(Te),lt=l.forwardRef((t,r)=>{const{__scopeAvatar:s,...n}=t,[o,a]=l.useState("idle");return e.jsx(Hr,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:e.jsx(Ae.span,{...n,ref:r})})});lt.displayName=Te;var it="AvatarImage",ct=l.forwardRef((t,r)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:o=()=>{},...a}=t,d=at(it,s),c=Br(n,a),u=q(i=>{o(i),d.onImageLoadingStatusChange(i)});return ee(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?e.jsx(Ae.img,{...a,ref:r,src:n}):null});ct.displayName=it;var dt="AvatarFallback",ut=l.forwardRef((t,r)=>{const{__scopeAvatar:s,delayMs:n,...o}=t,a=at(dt,s),[d,c]=l.useState(n===void 0);return l.useEffect(()=>{if(n!==void 0){const u=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(u)}},[n]),d&&a.imageLoadingStatus!=="loaded"?e.jsx(Ae.span,{...o,ref:r}):null});ut.displayName=dt;function Ve(t,r){return t?r?(t.src!==r&&(t.src=r),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Br(t,{referrerPolicy:r,crossOrigin:s}){const n=zr(),o=l.useRef(null),a=n?(o.current||(o.current=new window.Image),o.current):null,[d,c]=l.useState(()=>Ve(a,t));return ee(()=>{c(Ve(a,t))},[a,t]),ee(()=>{const u=m=>()=>{c(m)};if(!a)return;const i=u("loaded"),x=u("error");return a.addEventListener("load",i),a.addEventListener("error",x),r&&(a.referrerPolicy=r),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",i),a.removeEventListener("error",x)}},[a,s,r]),d}var mt=lt,ft=ct,ht=ut;const xt=l.forwardRef(({className:t,...r},s)=>e.jsx(mt,{ref:s,className:se("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r}));xt.displayName=mt.displayName;const pt=l.forwardRef(({className:t,...r},s)=>e.jsx(ft,{ref:s,className:se("aspect-square h-full w-full",t),...r}));pt.displayName=ft.displayName;const gt=l.forwardRef(({className:t,...r},s)=>e.jsx(ht,{ref:s,className:se("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r}));gt.displayName=ht.displayName;function Yr(t,r){return l.useReducer((s,n)=>r[s][n]??s,t)}var ce=t=>{const{present:r,children:s}=t,n=Xr(r),o=typeof s=="function"?s({present:n.isPresent}):l.Children.only(s),a=J(n.ref,qr(o));return typeof s=="function"||n.isPresent?l.cloneElement(o,{ref:a}):null};ce.displayName="Presence";function Xr(t){const[r,s]=l.useState(),n=l.useRef(null),o=l.useRef(t),a=l.useRef("none"),d=t?"mounted":"unmounted",[c,u]=Yr(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const i=me(n.current);a.current=c==="mounted"?i:"none"},[c]),ee(()=>{const i=n.current,x=o.current;if(x!==t){const f=a.current,p=me(i);t?u("MOUNT"):p==="none"||i?.display==="none"?u("UNMOUNT"):u(x&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),ee(()=>{if(r){let i;const x=r.ownerDocument.defaultView??window,m=p=>{const w=me(n.current).includes(CSS.escape(p.animationName));if(p.target===r&&w&&(u("ANIMATION_END"),!o.current)){const _=r.style.animationFillMode;r.style.animationFillMode="forwards",i=x.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=_)})}},f=p=>{p.target===r&&(a.current=me(n.current))};return r.addEventListener("animationstart",f),r.addEventListener("animationcancel",m),r.addEventListener("animationend",m),()=>{x.clearTimeout(i),r.removeEventListener("animationstart",f),r.removeEventListener("animationcancel",m),r.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[r,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:l.useCallback(i=>{n.current=i?getComputedStyle(i):null,s(i)},[])}}function me(t){return t?.animationName||"none"}function qr(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function K(t,r,{checkForDefaultPrevented:s=!0}={}){return function(o){if(t?.(o),s===!1||!o.defaultPrevented)return r?.(o)}}function Gr(t,r){return l.useReducer((s,n)=>r[s][n]??s,t)}var Ee="ScrollArea",[bt,Ks]=Wt(Ee),[Qr,D]=bt(Ee),vt=l.forwardRef((t,r)=>{const{__scopeScrollArea:s,type:n="hover",dir:o,scrollHideDelay:a=600,...d}=t,[c,u]=l.useState(null),[i,x]=l.useState(null),[m,f]=l.useState(null),[p,b]=l.useState(null),[w,_]=l.useState(null),[k,I]=l.useState(0),[P,V]=l.useState(0),[T,F]=l.useState(!1),[Y,N]=l.useState(!1),v=J(r,$=>u($)),S=Gt(o);return e.jsx(Qr,{scope:s,type:n,dir:S,scrollHideDelay:a,scrollArea:c,viewport:i,onViewportChange:x,content:m,onContentChange:f,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:T,onScrollbarXEnabledChange:F,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:Y,onScrollbarYEnabledChange:N,onCornerWidthChange:I,onCornerHeightChange:V,children:e.jsx(ie.div,{dir:S,...d,ref:v,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});vt.displayName=Ee;var jt="ScrollAreaViewport",yt=l.forwardRef((t,r)=>{const{__scopeScrollArea:s,children:n,nonce:o,...a}=t,d=D(jt,s),c=l.useRef(null),u=J(r,c,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(ie.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});yt.displayName=jt;var z="ScrollAreaScrollbar",Re=l.forwardRef((t,r)=>{const{forceMount:s,...n}=t,o=D(z,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:d}=o,c=t.orientation==="horizontal";return l.useEffect(()=>(c?a(!0):d(!0),()=>{c?a(!1):d(!1)}),[c,a,d]),o.type==="hover"?e.jsx(Zr,{...n,ref:r,forceMount:s}):o.type==="scroll"?e.jsx(Kr,{...n,ref:r,forceMount:s}):o.type==="auto"?e.jsx(wt,{...n,ref:r,forceMount:s}):o.type==="always"?e.jsx(Pe,{...n,ref:r}):null});Re.displayName=z;var Zr=l.forwardRef((t,r)=>{const{forceMount:s,...n}=t,o=D(z,t.__scopeScrollArea),[a,d]=l.useState(!1);return l.useEffect(()=>{const c=o.scrollArea;let u=0;if(c){const i=()=>{window.clearTimeout(u),d(!0)},x=()=>{u=window.setTimeout(()=>d(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",i),c.addEventListener("pointerleave",x),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",i),c.removeEventListener("pointerleave",x)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(ce,{present:s||a,children:e.jsx(wt,{"data-state":a?"visible":"hidden",...n,ref:r})})}),Kr=l.forwardRef((t,r)=>{const{forceMount:s,...n}=t,o=D(z,t.__scopeScrollArea),a=t.orientation==="horizontal",d=ye(()=>u("SCROLL_END"),100),[c,u]=Gr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(c==="idle"){const i=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(i)}},[c,o.scrollHideDelay,u]),l.useEffect(()=>{const i=o.viewport,x=a?"scrollLeft":"scrollTop";if(i){let m=i[x];const f=()=>{const p=i[x];m!==p&&(u("SCROLL"),d()),m=p};return i.addEventListener("scroll",f),()=>i.removeEventListener("scroll",f)}},[o.viewport,a,u,d]),e.jsx(ce,{present:s||c!=="hidden",children:e.jsx(Pe,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:K(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:K(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),wt=l.forwardRef((t,r)=>{const s=D(z,t.__scopeScrollArea),{forceMount:n,...o}=t,[a,d]=l.useState(!1),c=t.orientation==="horizontal",u=ye(()=>{if(s.viewport){const i=s.viewport.offsetWidth<s.viewport.scrollWidth,x=s.viewport.offsetHeight<s.viewport.scrollHeight;d(c?i:x)}},10);return te(s.viewport,u),te(s.content,u),e.jsx(ce,{present:n||a,children:e.jsx(Pe,{"data-state":a?"visible":"hidden",...o,ref:r})})}),Pe=l.forwardRef((t,r)=>{const{orientation:s="vertical",...n}=t,o=D(z,t.__scopeScrollArea),a=l.useRef(null),d=l.useRef(0),[c,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),i=At(c.viewport,c.content),x={...n,sizes:c,onSizesChange:u,hasThumb:i>0&&i<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:f=>d.current=f};function m(f,p){return ns(f,d.current,c,p)}return s==="horizontal"?e.jsx(Jr,{...x,ref:r,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollLeft,p=Ue(f,c,o.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=m(f,o.dir))}}):s==="vertical"?e.jsx(es,{...x,ref:r,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollTop,p=Ue(f,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=m(f))}}):null}),Jr=l.forwardRef((t,r)=>{const{sizes:s,onSizesChange:n,...o}=t,a=D(z,t.__scopeScrollArea),[d,c]=l.useState(),u=l.useRef(null),i=J(r,u,a.onScrollbarXChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(Nt,{"data-orientation":"horizontal",...o,ref:i,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":je(s)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,m)=>{if(a.viewport){const f=a.viewport.scrollLeft+x.deltaX;t.onWheelScroll(f),Et(f,m)&&x.preventDefault()}},onResize:()=>{u.current&&a.viewport&&d&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:be(d.paddingLeft),paddingEnd:be(d.paddingRight)}})}})}),es=l.forwardRef((t,r)=>{const{sizes:s,onSizesChange:n,...o}=t,a=D(z,t.__scopeScrollArea),[d,c]=l.useState(),u=l.useRef(null),i=J(r,u,a.onScrollbarYChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(Nt,{"data-orientation":"vertical",...o,ref:i,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":je(s)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,m)=>{if(a.viewport){const f=a.viewport.scrollTop+x.deltaY;t.onWheelScroll(f),Et(f,m)&&x.preventDefault()}},onResize:()=>{u.current&&a.viewport&&d&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:be(d.paddingTop),paddingEnd:be(d.paddingBottom)}})}})}),[ts,St]=bt(z),Nt=l.forwardRef((t,r)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:o,onThumbChange:a,onThumbPointerUp:d,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:i,onWheelScroll:x,onResize:m,...f}=t,p=D(z,s),[b,w]=l.useState(null),_=J(r,v=>w(v)),k=l.useRef(null),I=l.useRef(""),P=p.viewport,V=n.content-n.viewport,T=q(x),F=q(u),Y=ye(m,10);function N(v){if(k.current){const S=v.clientX-k.current.left,$=v.clientY-k.current.top;i({x:S,y:$})}}return l.useEffect(()=>{const v=S=>{const $=S.target;b?.contains($)&&T(S,V)};return document.addEventListener("wheel",v,{passive:!1}),()=>document.removeEventListener("wheel",v,{passive:!1})},[P,b,V,T]),l.useEffect(F,[n,F]),te(b,Y),te(p.content,Y),e.jsx(ts,{scope:s,scrollbar:b,hasThumb:o,onThumbChange:q(a),onThumbPointerUp:q(d),onThumbPositionChange:F,onThumbPointerDown:q(c),children:e.jsx(ie.div,{...f,ref:_,style:{position:"absolute",...f.style},onPointerDown:K(t.onPointerDown,v=>{v.button===0&&(v.target.setPointerCapture(v.pointerId),k.current=b.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(v))}),onPointerMove:K(t.onPointerMove,N),onPointerUp:K(t.onPointerUp,v=>{const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=I.current,p.viewport&&(p.viewport.style.scrollBehavior=""),k.current=null})})})}),ge="ScrollAreaThumb",Ct=l.forwardRef((t,r)=>{const{forceMount:s,...n}=t,o=St(ge,t.__scopeScrollArea);return e.jsx(ce,{present:s||o.hasThumb,children:e.jsx(rs,{ref:r,...n})})}),rs=l.forwardRef((t,r)=>{const{__scopeScrollArea:s,style:n,...o}=t,a=D(ge,s),d=St(ge,s),{onThumbPositionChange:c}=d,u=J(r,m=>d.onThumbChange(m)),i=l.useRef(void 0),x=ye(()=>{i.current&&(i.current(),i.current=void 0)},100);return l.useEffect(()=>{const m=a.viewport;if(m){const f=()=>{if(x(),!i.current){const p=os(m,c);i.current=p,c()}};return c(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[a.viewport,x,c]),e.jsx(ie.div,{"data-state":d.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:K(t.onPointerDownCapture,m=>{const p=m.target.getBoundingClientRect(),b=m.clientX-p.left,w=m.clientY-p.top;d.onThumbPointerDown({x:b,y:w})}),onPointerUp:K(t.onPointerUp,d.onThumbPointerUp)})});Ct.displayName=ge;var Le="ScrollAreaCorner",_t=l.forwardRef((t,r)=>{const s=D(Le,t.__scopeScrollArea),n=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&n?e.jsx(ss,{...t,ref:r}):null});_t.displayName=Le;var ss=l.forwardRef((t,r)=>{const{__scopeScrollArea:s,...n}=t,o=D(Le,s),[a,d]=l.useState(0),[c,u]=l.useState(0),i=!!(a&&c);return te(o.scrollbarX,()=>{const x=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(x),u(x)}),te(o.scrollbarY,()=>{const x=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(x),d(x)}),i?e.jsx(ie.div,{...n,ref:r,style:{width:a,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function be(t){return t?parseInt(t,10):0}function At(t,r){const s=t/r;return isNaN(s)?0:s}function je(t){const r=At(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-s)*r;return Math.max(n,18)}function ns(t,r,s,n="ltr"){const o=je(s),a=o/2,d=r||a,c=o-d,u=s.scrollbar.paddingStart+d,i=s.scrollbar.size-s.scrollbar.paddingEnd-c,x=s.content-s.viewport,m=n==="ltr"?[0,x]:[x*-1,0];return Tt([u,i],m)(t)}function Ue(t,r,s="ltr"){const n=je(r),o=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,a=r.scrollbar.size-o,d=r.content-r.viewport,c=a-n,u=s==="ltr"?[0,d]:[d*-1,0],i=Qt(t,u);return Tt([0,d],[0,c])(i)}function Tt(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(t[1]-t[0]);return r[0]+n*(s-t[0])}}function Et(t,r){return t>0&&t<r}var os=(t,r=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},n=0;return function o(){const a={left:t.scrollLeft,top:t.scrollTop},d=s.left!==a.left,c=s.top!==a.top;(d||c)&&r(),s=a,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function ye(t,r){const s=q(t),n=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),l.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,r)},[s,r])}function te(t,r){const s=q(r);ee(()=>{let n=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(s)});return o.observe(t),()=>{window.cancelAnimationFrame(n),o.unobserve(t)}}},[t,s])}var Rt=vt,as=yt,ls=_t;const Pt=l.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(Rt,{ref:n,className:se("relative overflow-hidden",t),...s,children:[e.jsx(as,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Lt,{}),e.jsx(ls,{})]}));Pt.displayName=Rt.displayName;const Lt=l.forwardRef(({className:t,orientation:r="vertical",...s},n)=>e.jsx(Re,{ref:n,orientation:r,className:se("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:e.jsx(Ct,{className:"relative flex-1 rounded-full bg-border"})}));Lt.displayName=Re.displayName;var is=Symbol.for("react.lazy"),ve=qe[" use ".trim().toString()];function cs(t){return typeof t=="object"&&t!==null&&"then"in t}function $t(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===is&&"_payload"in t&&cs(t._payload)}function ds(t){const r=us(t),s=l.forwardRef((n,o)=>{let{children:a,...d}=n;$t(a)&&typeof ve=="function"&&(a=ve(a._payload));const c=l.Children.toArray(a),u=c.find(fs);if(u){const i=u.props.children,x=c.map(m=>m===u?l.Children.count(i)>1?l.Children.only(null):l.isValidElement(i)?i.props.children:null:m);return e.jsx(r,{...d,ref:o,children:l.isValidElement(i)?l.cloneElement(i,void 0,x):null})}return e.jsx(r,{...d,ref:o,children:a})});return s.displayName=`${t}.Slot`,s}function us(t){const r=l.forwardRef((s,n)=>{let{children:o,...a}=s;if($t(o)&&typeof ve=="function"&&(o=ve(o._payload)),l.isValidElement(o)){const d=xs(o),c=hs(a,o.props);return o.type!==l.Fragment&&(c.ref=n?Ge(n,d):d),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var ms=Symbol("radix.slottable");function fs(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ms}function hs(t,r){const s={...r};for(const n in r){const o=t[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?s[n]=(...c)=>{const u=a(...c);return o(...c),u}:o&&(s[n]=o):n==="style"?s[n]={...o,...a}:n==="className"&&(s[n]=[o,a].filter(Boolean).join(" "))}return{...t,...s}}function xs(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var ps=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gs=ps.reduce((t,r)=>{const s=ds(`Primitive.${r}`),n=l.forwardRef((o,a)=>{const{asChild:d,...c}=o,u=d?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...c,ref:a})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),bs="Separator",He="horizontal",vs=["horizontal","vertical"],kt=l.forwardRef((t,r)=>{const{decorative:s,orientation:n=He,...o}=t,a=js(n)?n:He,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return e.jsx(gs.div,{"data-orientation":a,...c,...o,ref:r})});kt.displayName=bs;function js(t){return vs.includes(t)}var Mt=kt;const Dt=l.forwardRef(({className:t,orientation:r="horizontal",decorative:s=!0,...n},o)=>e.jsx(Mt,{ref:o,decorative:s,orientation:r,className:se("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Dt.displayName=Mt.displayName;const Be=t=>{if(!t)return"";const[r,s]=t.split(":"),n=new Date;return n.setHours(parseInt(r),parseInt(s)),n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},ys=(t,r)=>{if(!t||!r)return"";const s=new Date(`1970-01-01T${t}`),o=new Date(`1970-01-01T${r}`).getTime()-s.getTime(),a=Math.round(o/6e4),d=Math.floor(a/60),c=a%60;return d>0&&c>0?`${d} hr ${c} mins`:d>0?`${d} hr${d>1?"s":""}`:`${c} mins`},Ye={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7};function ws({facultyId:t,onDataLoaded:r}){const[s,n]=l.useState([]),[o,a]=l.useState(!0),[d,c]=l.useState(!1),u=new Date().toLocaleDateString("en-US",{weekday:"long"});l.useEffect(()=>{(async()=>{if(t){a(!0),c(!1);try{const p=localStorage.getItem("accessToken"),b=await Q.get(`faculty-loading/${t}/schedules`,{headers:{Authorization:`Bearer ${p}`}});if(b.data.success){const w=b.data.data;n(w),r&&r(w.length)}}catch(p){console.error("Error fetching schedules",p),c(!0)}finally{a(!1)}}})()},[t]);const i=l.useMemo(()=>{const f=new Map;return Object.keys(Ye).forEach(p=>f.set(p,[])),s.forEach(p=>{const b=p.day;f.has(b)&&f.get(b).push(p)}),f.forEach(p=>{p.sort((b,w)=>b.start_time.localeCompare(w.start_time))}),f},[s]),x=Object.keys(Ye).filter(f=>f!=="Sunday"),m=x.includes(u)?u:"Monday";return o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-2 text-muted-foreground",children:[e.jsx(he,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{children:"Loading schedule..."})]}):d?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-destructive p-6 text-center",children:[e.jsx(sr,{className:"h-10 w-10 mb-2"}),e.jsx("p",{className:"font-medium",children:"Failed to load schedule."})]}):e.jsx("div",{className:"h-full flex flex-col bg-muted/10 rounded-lg overflow-hidden border",children:e.jsxs(Zt,{defaultValue:m,className:"flex-1 flex flex-col h-full w-full",children:[e.jsx("div",{className:"bg-background border-b px-2 pt-2",children:e.jsx(Kt,{className:"w-full justify-start h-auto p-0 bg-transparent gap-2 overflow-x-auto no-scrollbar pb-2",children:x.map(f=>{const p=i.get(f)?.length||0,b=p>0;return e.jsxs(Jt,{value:f,className:`
                                        flex flex-col gap-1 rounded-md border px-4 py-2 min-w-[90px] transition-all
                                        data-[state=active]:border-primary data-[state=active]:bg-primary/5
                                        ${b?"":"opacity-60"}
                                    `,children:[e.jsx("span",{className:"text-xs font-semibold uppercase text-muted-foreground",children:f.substring(0,3)}),e.jsx("span",{className:`text-lg font-bold ${b?"text-primary":"text-muted-foreground"}`,children:p})]},f)})})}),e.jsx("div",{className:"flex-1 bg-muted/5 relative",children:x.map(f=>{const p=i.get(f)||[];return e.jsx(er,{value:f,className:"h-full m-0 absolute inset-0",children:e.jsx(Pt,{className:"h-full px-4 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-10",children:[e.jsxs("div",{className:"mb-4 pl-1 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:[f," Schedule"]}),e.jsxs(le,{variant:"outline",className:"text-muted-foreground",children:[p.length," ",p.length===1?"Subject":"Subjects"]})]}),p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center opacity-60",children:[e.jsx(nr,{className:"h-14 w-14 mb-4 text-muted-foreground/30"}),e.jsx("p",{className:"font-medium",children:"No classes scheduled."})]}):e.jsx("div",{className:"grid gap-4",children:p.map(b=>e.jsx(Ss,{sched:b},b.id))})]})})},f)})})]})})}function Ss({sched:t}){const r=t.type==="LEC",s=r?{border:"border-l-blue-500",bg:"bg-blue-50/40",badge:"bg-blue-100 hover:bg-blue-200 text-blue-800"}:{border:"border-l-amber-500",bg:"bg-amber-50/40",badge:"bg-amber-100 hover:bg-amber-200 text-amber-800"},n=r?or:ar,o=ys(t.start_time,t.end_time);return e.jsx(tr,{className:`overflow-hidden shadow-sm hover:shadow-md transition-shadow border-l-[6px] ${s.border}`,children:e.jsxs(rr,{className:"p-0 flex flex-col sm:flex-row",children:[e.jsxs("div",{className:`p-4 flex flex-col justify-center items-center sm:w-36 border-b sm:border-b-0 sm:border-r ${s.bg}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-lg font-bold text-foreground leading-none",children:Be(t.start_time)}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase font-medium my-1 block",children:"to"}),e.jsx("span",{className:"block text-sm font-medium text-muted-foreground leading-none",children:Be(t.end_time)})]}),e.jsx(Dt,{className:"my-3 w-12 bg-black/10"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsx("span",{children:o})]})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-start gap-2 mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:t.subject.subject_code}),e.jsxs(le,{variant:"secondary",className:`${s.badge} border-none`,children:[e.jsx(n,{className:"h-3 w-3 mr-1"}),t.type==="LEC"?"Lecture":"Laboratory"]})]})}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t.subject.des_title})]}),e.jsx("div",{className:"mt-4 pt-3 border-t flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-muted p-1.5 rounded-md",children:e.jsx(lr,{className:"h-4 w-4 text-foreground/70"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-muted-foreground leading-tight",children:"Room"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:t.room.roomNumber})]})]})})]})]})})}function Ns({isOpen:t,onClose:r,faculty:s}){const[n,o]=l.useState(0);if(!s)return null;const a=u=>u.split(" ").map(i=>i[0]).join("").toUpperCase().substring(0,2),d=u=>u?u.startsWith("http")||u.startsWith("data:")?u:`https://green-deer-882383.hostingersite.com/${u}`:"",c=u=>{o(u)};return e.jsx(Ke,{open:t,onOpenChange:r,children:e.jsxs(Je,{className:"sm:max-w-3xl h-[85vh] flex flex-col p-0 gap-0 overflow-hidden border-0 shadow-2xl",children:[e.jsx(et,{className:"px-6 py-6 border-b bg-muted/20",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(xt,{className:"h-20 w-20 border-4 border-background shadow-lg ring-1 ring-muted",children:[e.jsx(pt,{src:d(s.profile_picture),alt:s.name,className:"object-cover"}),e.jsx(gt,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-lg font-bold",children:a(s.name)})]}),e.jsx("span",{className:"absolute bottom-1 right-1 h-4 w-4 rounded-full bg-emerald-500 ring-2 ring-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(tt,{className:"text-2xl font-bold tracking-tight text-foreground",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5 bg-background px-2.5 py-1 rounded-md border shadow-sm",children:[e.jsx(Qe,{className:"h-3.5 w-3.5 text-blue-500"}),"Faculty Member"]}),e.jsxs("span",{className:"flex items-center gap-1.5 bg-background px-2.5 py-1 rounded-md border shadow-sm",children:[e.jsx(Ze,{className:"h-3.5 w-3.5 text-amber-500"}),e.jsx("span",{className:"font-semibold text-foreground",children:n})," Total Subjects Assigned"]})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-background",children:e.jsx(ws,{facultyId:s.id,onDataLoaded:c})}),e.jsxs(rt,{className:"px-6 py-4 border-t bg-muted/10 flex items-center justify-between sm:justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground italic",children:"* Schedule is subject to changes by the department head."}),e.jsx(st,{asChild:!0,children:e.jsx(Z,{variant:"outline",className:"px-6",children:"Close"})})]})]})})}const Xe=[{bg:"bg-blue-100",text:"text-blue-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-amber-100",text:"text-amber-800"},{bg:"bg-rose-100",text:"text-rose-800"},{bg:"bg-indigo-100",text:"text-indigo-800"},{bg:"bg-cyan-100",text:"text-cyan-800"},{bg:"bg-pink-100",text:"text-pink-800"}];function Cs(t){let r=0;const s=(t||"").toLowerCase();for(let o=0;o<s.length;o++)r=(r<<5)-r+s.charCodeAt(o),r|=0;const n=Math.abs(r)%Xe.length;return Xe[n]}function _s({data:t,onAssignClick:r,onViewSubjectsClick:s}){return t.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6",children:t.map(n=>{const o=n.profile_picture?n.profile_picture.startsWith("http")?n.profile_picture:`https://green-deer-882383.hostingersite.com/${n.profile_picture}`:null,d=n.overload_units>0?"overloaded":"ok",u={overloaded:{label:"Overload",icon:Ie,text:"text-red-700",bg:"bg-red-50",ring:"ring-1 ring-red-200",dot:"bg-red-500"},ok:{label:"Regular",icon:mr,text:"text-emerald-700",bg:"bg-emerald-50",ring:"ring-1 ring-emerald-200",dot:"bg-emerald-500"}}[d],i=u.icon;return e.jsxs("div",{className:`relative overflow-hidden rounded-2xl border bg-white p-5 shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 ${u.ring}`,children:[e.jsx("div",{className:"pointer-events-none absolute -right-16 -top-16 h-40 w-40 rounded-full bg-gradient-to-br from-primary/15 to-indigo-100 blur-2xl"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[o?e.jsx("img",{src:o,alt:n.name,className:"h-16 w-16 rounded-full object-cover border-4 border-white shadow-md ring-2 ring-primary/20"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-indigo-500 to-violet-500 text-white grid place-items-center text-lg font-bold border-4 border-white shadow-md ring-2 ring-primary/20",children:e.jsx(Qe,{className:"w-7 h-7 opacity-90"})}),e.jsx("span",{className:`absolute -bottom-1 -right-1 h-3.5 w-3.5 rounded-full ring-2 ring-white ${u.dot}`})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"truncate text-lg font-bold text-foreground",children:n.name}),e.jsxs("div",{className:`ml-2 inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-[11px] font-semibold ${u.bg} ${u.text}`,children:[e.jsx(i,{size:12}),e.jsx("span",{children:u.label})]})]}),e.jsx("div",{className:"mt-1",children:e.jsx(le,{variant:"secondary",className:"text-[10px] px-2 py-0 font-normal text-muted-foreground border-slate-200",children:n.department})}),n.expertise?.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:n.expertise.slice(0,3).map((x,m)=>{const f=Cs(x);return e.jsx(le,{className:`text-[10px] px-2 py-0.5 ${f.bg} hover:${f.bg} ${f.text} border-0`,children:x},`${x}-${m}`)})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex flex-col justify-between p-3 rounded-xl bg-blue-50/50 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-600 mb-2",children:[e.jsx(Ze,{size:13}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Regular"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-xl font-bold text-blue-900 leading-none",children:n.t_load_units||0}),e.jsx("span",{className:"text-[10px] font-medium text-blue-600/70 mb-0.5",children:"/ 24 Units"})]}),e.jsx("div",{className:"h-2 w-full bg-blue-200/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(100,(n.t_load_units||0)/24*100)}%`}})})]})]}),e.jsxs("div",{className:"flex flex-col justify-between p-3 rounded-xl bg-amber-50/50 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-amber-600 mb-2",children:[e.jsx(dr,{size:13}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Deload"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-xl font-bold text-amber-900 leading-none",children:n.deload_units||0}),e.jsx("span",{className:"text-[10px] font-medium text-amber-600/70 mb-0.5",children:"Units"})]}),e.jsx("div",{className:"h-2 w-full bg-amber-200/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(100,(n.deload_units||0)/12*100)}%`}})})]})]}),e.jsxs("div",{className:"flex flex-col justify-between p-3 rounded-xl bg-red-50/50 border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 mb-2",children:[e.jsx(Ie,{size:13}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Overload"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-xl font-bold text-red-900 leading-none",children:n.overload_units||0}),e.jsx("span",{className:"text-[10px] font-medium text-red-600/70 mb-0.5",children:"Units"})]}),e.jsx("div",{className:"h-2 w-full bg-red-200/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.min(100,(n.overload_units||0)/9*100)}%`}})})]})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end gap-2 border-t pt-4",children:[e.jsxs(Z,{size:"sm",onClick:()=>r(n),className:"shadow-sm h-8",children:[e.jsx(ir,{className:"mr-2 h-3.5 w-3.5"})," Assign"]}),e.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>s(n),className:"h-8",children:[e.jsx(pr,{className:"mr-2 h-3.5 w-3.5"})," View Schedule"]})]})]},n.id)})}):e.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:"No faculty found."})}function As(){const[t,r]=l.useState([]),[s,n]=l.useState([]),[o,a]=l.useState([]),[d,c]=l.useState(""),[u,i]=l.useState(!0),[x,m]=l.useState(!1),[f,p]=l.useState(null),[b,w]=l.useState(!1),[_,k]=l.useState(null);l.useEffect(()=>{(async()=>{i(!0);try{const v=localStorage.getItem("accessToken");if(!v){De.fire({icon:"warning",title:"Authentication Error",text:"You must be logged in."}),i(!1);return}const S={headers:{Authorization:`Bearer ${v}`}},[$,U]=await Promise.all([Q.get("/faculties",S),Q.get("/get-subjects",S)]),H=[{id:101,subject_code:"CS 101",des_title:"Intro to Programming",schedule:{day:"MWF",time:"10:00 - 11:00 AM"}},{id:102,subject_code:"IT 203",des_title:"Database Systems",schedule:{day:"TTH",time:"1:00 - 2:30 PM"}}],G=$.data.faculties.map((M,ne)=>({id:M.id,name:M.user.name,department:M.department||"No Department",expertise:M.expertises?M.expertises.map(we=>we.list_of_expertise):[],profile_picture:M.profile_picture,t_load_units:M.t_load_units??0,deload_units:M.deload_units??0,overload_units:M.overload_units??0,availability:{},assignedSubjects:ne===0?H:[]}));r(G),n(U.data.subject||[])}catch(v){console.error("Error fetching data:",v),De.fire({icon:"error",title:"Fetch Error",text:"Failed to retrieve data from the server."})}finally{i(!1)}})()},[]);const I=t.filter(N=>N.name.toLowerCase().includes(d.toLowerCase())||N.expertise.some(v=>v.toLowerCase().includes(d.toLowerCase()))),P=N=>{const v=N.expertise.map(S=>S.toLowerCase().trim());if(v.length===0)a(s);else{const S=s.filter($=>{const U=`${$.des_title} ${$.subject_code}`.toLowerCase();return v.some(H=>U.includes(H))});a(S)}p(N),m(!0)},V=()=>{m(!1),p(null),a([])},T=N=>{k(N),w(!0)},F=()=>{w(!1),k(null)},Y=(N,v,S)=>{console.log("Assigning Subject:",{facultyId:N,subjectId:v,schedules:S})};return e.jsxs(e.Fragment,{children:[e.jsxs(zt,{children:[x&&f&&e.jsx(_r,{isOpen:x,onClose:V,faculty:f,availableSubjects:o,onAssign:Y}),b&&_&&e.jsx(Ns,{isOpen:b,onClose:F,faculty:_})]}),e.jsxs("header",{className:"mb-8 text-start",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Faculty Loading"}),e.jsx("p",{className:"text-muted-foreground mt-3 ",children:"Assign subjects to faculty based on expertise and availability."})]}),e.jsxs("div",{className:"bg-card p-4 md:p-6 rounded-xl shadow-sm border border-border",children:[e.jsx("div",{className:"flex justify-start mb-8",children:e.jsxs("div",{className:"relative w-full md:max-w-lg",children:[e.jsx(nt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),e.jsx(fe,{placeholder:"Search by faculty name or expertise...",value:d,onChange:N=>c(N.target.value),className:"pl-12 h-12 rounded-full text-base"})]})}),u?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:6}).map((N,v)=>e.jsx(jr,{},v))}):I.length>0?e.jsx(_s,{data:I,onAssignClick:P,onViewSubjectsClick:T}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center text-muted-foreground bg-muted/50 rounded-lg border-2 border-dashed",children:[e.jsx(hr,{size:40,className:"mb-4 text-primary"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"No Faculty Found"}),e.jsxs("p",{children:['Your search for "',d,'" did not match any faculty profiles.']})]})]})]})}function Js(){return e.jsx("main",{children:e.jsx(As,{})})}export{Js as default};
