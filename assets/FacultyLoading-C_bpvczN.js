import{c as A,r as g,j as e,B as b,A as N,m as j,X as k,U as L,d as D,b as P,e as W}from"./index-BuWw9RbP.js";import{C as I,S as w}from"./sparkles-BkYVtqzf.js";import{T as C}from"./triangle-alert-DtfoSuJb.js";import{I as U}from"./input-yEXRpp2T.js";import{S as O}from"./search-C5McUNk5.js";import{C as $}from"./circle-plus-BZrtEclA.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],H=A("brain-circuit",E);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],V=A("gauge",B),M=["Mon","Tue","Wed","Thu","Fri"],R=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],y=t=>{const[m,n]=t.split(":").map(Number);return m*60+n},F=y("08:00"),S=5,_=t=>{try{const m=t.split(" ")[1],[n,u]=m.split("-"),x=(y(n)-F)/60*S,d=(y(u)-y(n))/60*S;return{top:`${x}rem`,height:`${d}rem`}}catch{return{top:0,height:"3rem"}}};function G({subjects:t,faculty:m,onAssignSubject:n}){const[u,x]=g.useState("Mon"),[d,p]=g.useState(!1),[s,c]=g.useState(null),[r,l]=g.useState(0),o=g.useMemo(()=>t.filter(a=>a.days.includes(u)),[t,u]);g.useEffect(()=>{const a=()=>{const v=new Date,z=(v.getHours()*60+v.getMinutes()-F)/60*S;l(z)};a();const f=setInterval(a,6e4);return()=>clearInterval(f)},[]);const h=a=>{a.assignedTo||(c(a),p(!0))},i=a=>{s&&(n(s.id,a),p(!1),c(null))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-card border rounded-xl shadow-sm flex flex-col h-[85vh]",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Daily Timeline Schedule"}),e.jsx("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:M.map(a=>e.jsx(b,{variant:u===a?"secondary":"ghost",size:"sm",onClick:()=>x(a),className:"w-20",children:a},a))})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto relative p-4",children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 w-16",children:R.map(a=>e.jsxs("div",{className:"relative text-right h-[5rem]",children:[e.jsx("span",{className:"absolute -top-2 right-2 text-xs text-muted-foreground",children:a}),e.jsx("div",{className:"absolute top-0 right-0 w-[calc(100vw)] h-px bg-border -z-10"})]},a))}),new Date().getDay()-1===M.indexOf(u)&&e.jsx("div",{className:"absolute left-16 right-0 z-20",style:{top:`${r}rem`},children:e.jsx("div",{className:"relative h-px bg-red-500",children:e.jsx("div",{className:"absolute -left-1.5 -top-1.5 w-3 h-3 bg-red-500 rounded-full"})})}),e.jsxs("div",{className:"relative ml-16 h-full",children:[e.jsx(N,{children:o.map(a=>{const f=a.assignedTo?m.find(T=>T.id===a.assignedTo):null,v=_(a.schedule);return e.jsxs(j.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`absolute w-full p-3 rounded-lg text-sm transition-all shadow-md cursor-pointer ${f?"bg-gradient-to-br from-violet-500 to-purple-600 text-white":"bg-muted border border-dashed hover:bg-muted/80"}`,style:{top:v.top,height:v.height},onClick:()=>h(a),children:[e.jsx("p",{className:"font-bold truncate",children:a.code}),e.jsx("p",{className:f?"text-white/80":"text-muted-foreground",children:a.title}),f&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-white/20",children:[e.jsx("img",{src:f.imageUrl,className:"w-6 h-6 rounded-full border-2 border-white/50",alt:f.name}),e.jsx("span",{className:"font-semibold",children:f.name})]})]},a.id)})}),o.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsx(I,{size:48}),e.jsxs("p",{className:"mt-4 text-lg font-semibold",children:["No classes scheduled for ",u]})]})]})]})})]}),e.jsx(q,{isOpen:d,onClose:()=>p(!1),subject:s,facultyList:m,onAssign:i})]})}function q({isOpen:t,onClose:m,subject:n,facultyList:u,onAssign:x}){if(!n)return null;const d=s=>{const c=s.expertise.includes(n.expertise),r=n.days.every(a=>s.availability.days.includes(a)),l=s.currentLoad+n.units>s.maxLoad,o=s.assignedSubjects.length>=s.maxSubjects,h=c&&r&&!l&&!o;let i="";return l?i="Overloaded":o?i="Subject limit reached":r?c||(i="Expertise mismatch"):i="Schedule conflict",{canAssign:h,reason:i,isGoodMatch:c&&r}},p=g.useMemo(()=>u?[...u].sort((s,c)=>{const r=d(s),l=d(c);return r.canAssign&&!l.canAssign?-1:!r.canAssign&&l.canAssign?1:0}):[],[u,n]);return e.jsx(N,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40",onClick:m}),e.jsxs(j.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-full max-w-md bg-card border-l z-50 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Assign Subject"}),e.jsx(b,{variant:"ghost",size:"icon",onClick:m,children:e.jsx(k,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:p.map(s=>{const{canAssign:c,reason:r,isGoodMatch:l}=d(s);return e.jsxs("div",{className:`p-3 border rounded-lg flex items-center gap-4 transition-opacity ${!c&&"opacity-50"}`,children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:s.name}),e.jsxs("div",{className:"text-xs",children:[l&&!r&&e.jsxs("span",{className:"flex items-center gap-1 text-green-500 font-semibold",children:[e.jsx(w,{size:14})," Good Match"]}),r&&e.jsxs("span",{className:"flex items-center gap-1 text-amber-500 font-semibold",children:[e.jsx(C,{size:14})," ",r]})]})]}),e.jsx(b,{onClick:()=>x(s.id),disabled:!c,children:"Assign"})]},s.id)})})]})]})})}function J({faculty:t,subjects:m,onUnassignSubject:n,onAssignSubject:u}){const[x,d]=g.useState(t[0]?.id||null),[p,s]=g.useState(""),[c,r]=g.useState(!1),l=t.filter(i=>i.name.toLowerCase().includes(p.toLowerCase())),o=t.find(i=>i.id===x),h=g.useMemo(()=>m.filter(i=>i.assignedTo===null),[m]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[75vh]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-card border rounded-xl shadow-sm flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(U,{placeholder:"Search faculty...",className:"pl-10",value:p,onChange:i=>s(i.target.value)})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:l.map(i=>e.jsxs("button",{className:`flex items-center gap-4 w-full text-left p-4 border-b transition-colors ${x===i.id?"bg-primary/10":"hover:bg-muted/50"}`,onClick:()=>d(i.id),children:[e.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Load: ",i.currentLoad,"/",i.maxLoad," units"]})]})]},i.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-card border rounded-xl shadow-sm h-full overflow-y-auto p-6",children:o?e.jsx(X,{faculty:o,onUnassignSubject:n,onOpenAssignModal:()=>r(!0)}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsx(L,{size:48}),e.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Select a faculty to see details"})]})})]}),o&&e.jsx(Y,{isOpen:c,onClose:()=>r(!1),faculty:o,unassignedSubjects:h,onAssign:u})]})}function X({faculty:t,onUnassignSubject:m,onOpenAssignModal:n}){const u=t.currentLoad/t.maxLoad*100,x=t.assignedSubjects.length/t.maxSubjects*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-24 h-24 rounded-full border-4 border-background shadow-md"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.name}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.expertise.map(d=>e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-primary/10 text-primary",children:d},d))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border bg-background",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 font-semibold text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(V,{size:14}),"Unit Load"]})," ",e.jsxs("span",{children:[t.currentLoad," / ",t.maxLoad]})]}),e.jsx("div",{className:"w-full h-2 bg-muted rounded-full",children:e.jsx(j.div,{className:"h-2 rounded-full bg-primary",initial:{width:0},animate:{width:`${u}%`}})})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-background",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 font-semibold text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(D,{size:14}),"Subject Load"]})," ",e.jsxs("span",{children:[t.assignedSubjects.length," / ",t.maxSubjects]})]}),e.jsx("div",{className:"w-full h-2 bg-muted rounded-full",children:e.jsx(j.div,{className:"h-2 rounded-full bg-violet-500",initial:{width:0},animate:{width:`${x}%`}})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Assigned Subjects"}),e.jsxs(b,{size:"sm",onClick:n,children:[e.jsx($,{size:16,className:"mr-2"}),"Assign New Subject"]})]}),e.jsx("div",{className:"space-y-2",children:t.assignedSubjects.length>0?t.assignedSubjects.map(d=>e.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-md border bg-background",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[d.code," - ",d.title]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.schedule," â€¢ ",d.units," units"]})]}),e.jsx(b,{variant:"ghost",size:"icon",className:"text-muted-foreground opacity-0 group-hover:opacity-100",onClick:()=>m(d.id),children:e.jsx(k,{size:16})})]},d.id)):e.jsx("p",{className:"text-center py-4 border rounded-md border-dashed text-muted-foreground",children:"No subjects assigned."})})]})]})}function Y({isOpen:t,onClose:m,faculty:n,unassignedSubjects:u,onAssign:x}){const d=s=>{const c=n.expertise.includes(s.expertise),r=s.days.every(a=>n.availability.days.includes(a)),l=n.currentLoad+s.units>n.maxLoad,o=n.assignedSubjects.length>=n.maxSubjects,h=r&&!l&&!o;let i="";return l?i="Faculty is overloaded":o?i="Subject limit reached":r||(i="Schedule conflict"),{canAssign:h,reason:i,hasExpertise:c}},p=s=>{x(s,n.id),m()};return e.jsx(N,{children:t&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:m,children:e.jsxs(j.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-card rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-bold",children:["Assign Subject to ",n.name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Showing available unassigned subjects."})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[u.map(s=>{const{canAssign:c,reason:r,hasExpertise:l}=d(s);return e.jsxs("div",{className:`p-3 border rounded-lg flex items-center gap-4 transition-opacity ${!c&&"opacity-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-bold",children:[s.code," - ",s.title]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 font-semibold ${l?"text-green-500":"text-amber-500"}`,children:[l?e.jsx(w,{size:14}):e.jsx(H,{size:14}),s.expertise," ",l?"":"(Mismatch)"]}),e.jsx("span",{children:s.schedule})]})]}),e.jsx("div",{className:"text-right",children:r?e.jsxs("span",{className:"text-xs font-semibold text-destructive flex items-center gap-1",children:[e.jsx(C,{size:14})," ",r]}):e.jsx(b,{onClick:()=>p(s.id),disabled:!c,children:"Assign"})})]},s.id)}),u.length===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No unassigned subjects available."})]})]})})})}const Z=[{id:"subj-1",code:"CS-301",title:"Data Structures",schedule:"MWF 9:00-10:00",days:["Mon","Wed","Fri"],units:3,expertise:"Algorithms",assignedTo:null},{id:"subj-2",code:"IT-411",title:"Advanced Programming",schedule:"TTH 10:30-12:00",days:["Tue","Thu"],units:3,expertise:"Programming",assignedTo:null},{id:"subj-3",code:"DS-210",title:"Intro to Data Science",schedule:"MWF 1:00-2:00",days:["Mon","Wed","Fri"],units:3,expertise:"Data Science",assignedTo:null},{id:"subj-4",code:"CS-412",title:"Machine Learning",schedule:"TTH 2:30-4:00",days:["Tue","Thu"],units:3,expertise:"Machine Learning",assignedTo:null},{id:"subj-5",code:"IT-205",title:"Database Management",schedule:"MWF 11:00-12:00",days:["Mon","Wed","Fri"],units:3,expertise:"Database",assignedTo:"fac-2"},{id:"subj-6",code:"CS-101",title:"Intro to Computing",schedule:"TTH 8:30-10:00",days:["Tue","Thu"],units:3,expertise:"Programming",assignedTo:null},{id:"subj-7",code:"SYS-300",title:"Systems Architecture",schedule:"MWF 10:00-11:00",days:["Mon","Wed","Fri"],units:3,expertise:"Systems Architecture",assignedTo:null},{id:"subj-8",code:"SE-301",title:"Software Engineering",schedule:"TTH 1:00-2:30",days:["Tue","Thu"],units:3,expertise:"Software Engineering",assignedTo:null},{id:"subj-9",code:"HCI-200",title:"Human-Computer Interaction",schedule:"MWF 3:00-4:00",days:["Mon","Wed","Fri"],units:3,expertise:"HCI",assignedTo:null}],K=[{id:"fac-1",name:"Dr. Maria Santos",maxLoad:12,maxSubjects:4,expertise:["Machine Learning","Data Science"],availability:{days:["Tue","Thu"],note:"Prefers TTH"},imageUrl:"https://i.pravatar.cc/150?u=maria.santos"},{id:"fac-2",name:"Prof. Albie Cruz",maxLoad:15,maxSubjects:4,expertise:["Programming","Database","Algorithms"],availability:{days:["Mon","Wed","Fri"],note:"Prefers MWF AM"},imageUrl:"https://i.pravatar.cc/150?u=albie.cruz"},{id:"fac-3",name:"Prof. John Reyes",maxLoad:12,maxSubjects:4,expertise:["Algorithms","Systems Architecture"],availability:{days:["Mon","Tue","Wed","Thu","Fri"],note:"Anytime"},imageUrl:"https://i.pravatar.cc/150?u=john.reyes"},{id:"fac-4",name:"Prof. Angela David",maxLoad:12,maxSubjects:4,expertise:["Computer Networks","Cyber Security"],availability:{days:["Tue","Thu"],note:"Prefers TTH PM"},imageUrl:"https://i.pravatar.cc/150?u=angela.david"},{id:"fac-5",name:"Dr. Ben Castro",maxLoad:15,maxSubjects:4,expertise:["Software Engineering","Software Development","Programming"],availability:{days:["Mon","Wed","Fri"],note:"Anytime"},imageUrl:"https://i.pravatar.cc/150?u=ben.castro"}];function ne(){const[t,m]=g.useState(Z),[n,u]=g.useState(K),[x,d]=g.useState("schedule"),p=(r,l)=>{m(o=>o.map(h=>h.id===r?{...h,assignedTo:l}:h))},s=r=>{m(l=>l.map(o=>o.id===r?{...o,assignedTo:null}:o))},c=g.useMemo(()=>n.map(r=>{const l=t.filter(h=>h.assignedTo===r.id),o=l.reduce((h,i)=>h+i.units,0);return{...r,assignedSubjects:l,currentLoad:o}}),[t,n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-violet-600 via-purple-600 to-fuchsia-600 text-white shadow-lg p-6 md:p-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-xs font-semibold shadow-sm",children:[e.jsx(w,{size:14})," Faculty Loading"]}),e.jsx("h1",{className:"mt-2 text-3xl font-extrabold tracking-tight",children:"Assign Subjects, Balance Loads"}),e.jsx("p",{className:"text-white/85 max-w-2xl",children:"Use the master schedule to assign subjects or view individual faculty loads."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"p-1 bg-muted rounded-lg flex items-center gap-1",children:[e.jsxs(b,{onClick:()=>d("schedule"),className:`flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold transition-colors ${x==="schedule"?"bg-background text-primary shadow-sm":"bg-transparent text-muted-foreground hover:text-primary"}`,variant:"ghost",children:[e.jsx(P,{size:16})," Master Schedule"]}),e.jsxs(b,{onClick:()=>d("faculty"),className:`flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold transition-colors ${x==="faculty"?"bg-background text-primary shadow-sm":"bg-transparent text-muted-foreground hover:text-primary"}`,variant:"ghost",children:[e.jsx(W,{size:16})," Faculty View"]})]})}),e.jsx(N,{mode:"wait",children:e.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x==="schedule"?e.jsx(G,{subjects:t,faculty:c,onAssignSubject:p}):e.jsx(J,{faculty:c,subjects:t,onUnassignSubject:s,onAssignSubject:p})},x)})]})}export{ne as default};
